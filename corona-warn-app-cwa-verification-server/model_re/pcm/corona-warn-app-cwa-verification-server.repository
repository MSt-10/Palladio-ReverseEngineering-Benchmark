<?xml version="1.0" encoding="UTF-8"?>
<repository:Repository xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:composition="http://palladiosimulator.org/PalladioComponentModel/Core/Composition/5.2" xmlns:repository="http://palladiosimulator.org/PalladioComponentModel/Repository/5.2" xmlns:seff="http://palladiosimulator.org/PalladioComponentModel/SEFF/5.2" xmlns:stoex="http://sdq.ipd.uka.de/StochasticExpressions/2.2" id="_30_J1A87Ee-VpvqVVotcWA">
  <components__Repository xsi:type="repository:BasicComponent" id="_30rn0Q87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_controller_InternalTanController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_30rAyA87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST] Provider" providedInterface__OperationProvidedRole="_30rAwg87Ee-VpvqVVotcWA"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_30rn0A87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST] Provider" providedInterface__OperationProvidedRole="_30rAxA87Ee-VpvqVVotcWA"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_3z8BBA87Ee-VpvqVVotcWA" describedService__SEFF="_3uOagw87Ee-VpvqVVotcWA">
      <steps_Behaviour xsi:type="seff:StartAction" id="_3z7Z5Q87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z7Z8g87Ee-VpvqVVotcWA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_3z7Z8g87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3z7Z5Q87Ee-VpvqVVotcWA" successor_AbstractAction="_3z8BAg87Ee-VpvqVVotcWA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z7Z6Q87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_3z7Z6w87Ee-VpvqVVotcWA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_3z7Z5g87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z7Z5w87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_3z7Z5w87Ee-VpvqVVotcWA" entityName="requiredRoles.add(AuthorizationRole.AUTH_C19_HOTLINE)" predecessor_AbstractAction="_3z7Z5g87Ee-VpvqVVotcWA" successor_AbstractAction="_3z7Z6A87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_3z7Z6A87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z7Z5w87Ee-VpvqVVotcWA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(teleTanType == null)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z7Z7w87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_3z7Z8Q87Ee-VpvqVVotcWA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_3z7Z7A87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z7Z7Q87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_3z7Z7Q87Ee-VpvqVVotcWA" entityName="requiredRoles.add(AuthorizationRole.AUTH_C19_HOTLINE_EVENT)" predecessor_AbstractAction="_3z7Z7A87Ee-VpvqVVotcWA" successor_AbstractAction="_3z7Z7g87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_3z7Z7g87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z7Z7Q87Ee-VpvqVVotcWA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(teleTanType == TeleTanType.EVENT)"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_3z8BAg87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3z7Z8g87Ee-VpvqVVotcWA" successor_AbstractAction="_3z8BAw87Ee-VpvqVVotcWA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z8A_w87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_3z8BAQ87Ee-VpvqVVotcWA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_3z8A8A87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z8A_Q87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_3z8A_Q87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3z8A8A87Ee-VpvqVVotcWA" successor_AbstractAction="_3z8A_g87Ee-VpvqVVotcWA">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z8A9Q87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_3z8A9w87Ee-VpvqVVotcWA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_3z8A8Q87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z8A8g87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z8A8g87Ee-VpvqVVotcWA" entityName="log.info(&quot;The teleTAN is generated.&quot;)" predecessor_AbstractAction="_3z8A8Q87Ee-VpvqVVotcWA" successor_AbstractAction="_3z8A8w87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_3z8A8w87Ee-VpvqVVotcWA" entityName="ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))" predecessor_AbstractAction="_3z8A8g87Ee-VpvqVVotcWA" successor_AbstractAction="_3z8A9A87Ee-VpvqVVotcWA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_3z8A9A87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z8A8w87Ee-VpvqVVotcWA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(tanService.isTeleTanRateLimitNotExceeded())"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z8A-g87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_3z8A_A87Ee-VpvqVVotcWA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_3z8A-A87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z8A-Q87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_3z8A-Q87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z8A-A87Ee-VpvqVVotcWA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: else"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_3z8A_g87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z8A_Q87Ee-VpvqVVotcWA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(jwtService.isAuthorized(authorization.getToken(),requiredRoles))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_3z8BAw87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z8BAg87Ee-VpvqVVotcWA"/>
    </serviceEffectSpecifications__BasicComponent>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_3z8oBA87Ee-VpvqVVotcWA" describedService__SEFF="_3uNMYg87Ee-VpvqVVotcWA">
      <steps_Behaviour xsi:type="seff:StartAction" id="_3z8oAQ87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z8oAg87Ee-VpvqVVotcWA"/>
      <steps_Behaviour xsi:type="seff:SetVariableAction" id="_3z8oAg87Ee-VpvqVVotcWA" entityName="tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)" predecessor_AbstractAction="_3z8oAQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z8oAw87Ee-VpvqVVotcWA">
        <localVariableUsages_SetVariableAction>
          <variableCharacterisation_VariableUsage type="VALUE">
            <specification_VariableCharacterisation specification="PrimitiveType.tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)"/>
          </variableCharacterisation_VariableUsage>
          <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
            <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)"/>
          </namedReference__VariableUsage>
        </localVariableUsages_SetVariableAction>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_3z8oAw87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z8oAg87Ee-VpvqVVotcWA"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_30xucQ87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_controller_ExternalTanController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_30xucA87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/tan[POST] Provider" providedInterface__OperationProvidedRole="_30rAxg87Ee-VpvqVVotcWA"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_3z-dMw87Ee-VpvqVVotcWA" describedService__SEFF="_3uNzcA87Ee-VpvqVVotcWA">
      <steps_Behaviour xsi:type="seff:StartAction" id="_3z8oBg87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z9PEA87Ee-VpvqVVotcWA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_3z9PEA87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3z8oBg87Ee-VpvqVVotcWA" successor_AbstractAction="_3z9PEQ87Ee-VpvqVVotcWA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z8oCg87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_3z8oDA87Ee-VpvqVVotcWA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_3z8oBw87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z8oCA87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_3z8oCA87Ee-VpvqVVotcWA" entityName="fakeRequestService.generateTan(registrationToken)" predecessor_AbstractAction="_3z8oBw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z8oCQ87Ee-VpvqVVotcWA">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestService.generateTan(registrationToken)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestService.generateTan(registrationToken)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_3z8oCQ87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z8oCA87Ee-VpvqVVotcWA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_3z9PEQ87Ee-VpvqVVotcWA" entityName="stopWatch.start()" predecessor_AbstractAction="_3z9PEA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z-dMQ87Ee-VpvqVVotcWA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_3z-dMQ87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3z9PEQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z-dMg87Ee-VpvqVVotcWA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z92NA87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_3z-dMA87Ee-VpvqVVotcWA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_3z9PEg87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z92Mg87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_3z92Mg87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3z9PEg87Ee-VpvqVVotcWA" successor_AbstractAction="_3z92Mw87Ee-VpvqVVotcWA">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z92Lw87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_3z92MQ87Ee-VpvqVVotcWA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_3z9PEw87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z92JQ87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_3z92JQ87Ee-VpvqVVotcWA" entityName="Switch Branch" predecessor_AbstractAction="_3z9PEw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z92Jg87Ee-VpvqVVotcWA">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z9PHg87Ee-VpvqVVotcWA">
                      <branchBehaviour_BranchTransition id="_3z9PIA87Ee-VpvqVVotcWA">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_3z9PFA87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z9PGw87Ee-VpvqVVotcWA"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_3z9PGw87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3z9PFA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z9PHA87Ee-VpvqVVotcWA">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z9PGA87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_3z9PGg87Ee-VpvqVVotcWA">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_3z9PFQ87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z9PFg87Ee-VpvqVVotcWA"/>
                              <steps_Behaviour xsi:type="seff:InternalAction" id="_3z9PFg87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z9PFQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z9PFw87Ee-VpvqVVotcWA"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_3z9PFw87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z9PFg87Ee-VpvqVVotcWA"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(covidTestResult.getTestResult() != LabTestResult.POSITIVE.getTestResult() &amp;&amp; covidTestResult.getTestResult() != LabTestResult.QUICK_POSITIVE.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_3z9PHA87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z9PGw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z9PHQ87Ee-VpvqVVotcWA"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_3z9PHQ87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z9PHA87Ee-VpvqVVotcWA"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
                    </branches_Branch>
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z9PJA87Ee-VpvqVVotcWA">
                      <branchBehaviour_BranchTransition id="_3z9PJg87Ee-VpvqVVotcWA">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_3z9PIQ87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z9PIg87Ee-VpvqVVotcWA"/>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_3z9PIg87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z9PIQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z9PIw87Ee-VpvqVVotcWA"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_3z9PIw87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z9PIg87Ee-VpvqVVotcWA"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
                    </branches_Branch>
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z92Ig87Ee-VpvqVVotcWA">
                      <branchBehaviour_BranchTransition id="_3z92JA87Ee-VpvqVVotcWA">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_3z9PJw87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z92IA87Ee-VpvqVVotcWA"/>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_3z92IA87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z9PJw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z92IQ87Ee-VpvqVVotcWA"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_3z92IQ87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z92IA87Ee-VpvqVVotcWA"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z92Jg87Ee-VpvqVVotcWA" entityName="appSession.incrementTanCounter()" predecessor_AbstractAction="_3z92JQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z92Jw87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z92Jw87Ee-VpvqVVotcWA" entityName="appSession.setUpdatedAt(LocalDateTime.now())" predecessor_AbstractAction="_3z92Jg87Ee-VpvqVVotcWA" successor_AbstractAction="_3z92KA87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z92KA87Ee-VpvqVVotcWA" entityName="appSessionService.saveAppSession(appSession)" predecessor_AbstractAction="_3z92Jw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z92KQ87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z92KQ87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z92KA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z92Kg87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z92Kg87Ee-VpvqVVotcWA" entityName="fakeDelayService.updateFakeTanRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_3z92KQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z92Kw87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z92Kw87Ee-VpvqVVotcWA" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.status(HttpStatus.CREATED).body(returnTan)),fakeDelayService.realDelayTan(),MILLISECONDS)" predecessor_AbstractAction="_3z92Kg87Ee-VpvqVVotcWA" successor_AbstractAction="_3z92LA87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z92LA87Ee-VpvqVVotcWA" entityName="log.info(&quot;Returning the successfully generated tan.&quot;)" predecessor_AbstractAction="_3z92Kw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z92LQ87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_3z92LQ87Ee-VpvqVVotcWA" entityName="deferredResult" predecessor_AbstractAction="_3z92LA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z92Lg87Ee-VpvqVVotcWA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_3z92Lg87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z92LQ87Ee-VpvqVVotcWA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.getTanCounter() &lt; tancountermax)"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_3z92Mw87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z92Mg87Ee-VpvqVVotcWA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(actual.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_3z-dMg87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z-dMQ87Ee-VpvqVVotcWA"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_300KuQ87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_controller_ExternalTestStateController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_300KuA87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/testresult[POST] Provider" providedInterface__OperationProvidedRole="_30rAxw87Ee-VpvqVVotcWA"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_30ASbg87Ee-VpvqVVotcWA" describedService__SEFF="_3taiMA87Ee-VpvqVVotcWA">
      <steps_Behaviour xsi:type="seff:StartAction" id="_3z-dNQ87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z-dPA87Ee-VpvqVVotcWA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_3z-dPA87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3z-dNQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z-dPQ87Ee-VpvqVVotcWA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z-dOQ87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_3z-dOw87Ee-VpvqVVotcWA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_3z-dNg87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z-dNw87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_3z-dNw87Ee-VpvqVVotcWA" entityName="fakeRequestService.getTestState(registrationToken)" predecessor_AbstractAction="_3z-dNg87Ee-VpvqVVotcWA" successor_AbstractAction="_3z-dOA87Ee-VpvqVVotcWA">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestService.getTestState(registrationToken)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestService.getTestState(registrationToken)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_3z-dOA87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z-dNw87Ee-VpvqVVotcWA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_3z-dPQ87Ee-VpvqVVotcWA" entityName="stopWatch.start()" predecessor_AbstractAction="_3z-dPA87Ee-VpvqVVotcWA" successor_AbstractAction="_30ASaw87Ee-VpvqVVotcWA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_30ASaw87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3z-dPQ87Ee-VpvqVVotcWA" successor_AbstractAction="_30ASbA87Ee-VpvqVVotcWA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_30ASaA87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_30ASag87Ee-VpvqVVotcWA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_3z-dPg87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_30ASZg87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_30ASZg87Ee-VpvqVVotcWA" entityName="Switch Branch" predecessor_AbstractAction="_3z-dPg87Ee-VpvqVVotcWA" successor_AbstractAction="_30ASZw87Ee-VpvqVVotcWA">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z_rUg87Ee-VpvqVVotcWA">
                <branchBehaviour_BranchTransition id="_3z_rVA87Ee-VpvqVVotcWA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_3z-dPw87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z-dQA87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z-dQA87Ee-VpvqVVotcWA" entityName="testResult.setResponsePadding(RandomStringUtils.randomAlphanumeric(RESPONSE_PADDING_LENGTH))" predecessor_AbstractAction="_3z-dPw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_ERg87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_3z_ERg87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3z-dQA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_ERw87Ee-VpvqVVotcWA">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z_EQw87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
                      <branchBehaviour_BranchTransition id="_3z_ERQ87Ee-VpvqVVotcWA">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_3z-dQQ87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z_EQQ87Ee-VpvqVVotcWA"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_3z_EQQ87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3z-dQQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_EQg87Ee-VpvqVVotcWA">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z-dRA87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_3z_EQA87Ee-VpvqVVotcWA">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_3z-dQg87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z-dQw87Ee-VpvqVVotcWA"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_3z-dQw87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z-dQg87Ee-VpvqVVotcWA"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(testResultDob.getTestResult() != testResult.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_3z_EQg87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z_EQQ87Ee-VpvqVVotcWA"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(!config.isDisableDobHashCheckForExternalTestResult() &amp;&amp; appSession.get().getHashedGuidDob() != null)"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z_ERw87Ee-VpvqVVotcWA" entityName="log.debug(&quot;Result {}&quot;,testResult)" predecessor_AbstractAction="_3z_ERg87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_ESA87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z_ESA87Ee-VpvqVVotcWA" entityName="log.info(&quot;The result for registration token based on hashed Guid will be returned.&quot;)" predecessor_AbstractAction="_3z_ERw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_ESQ87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z_ESQ87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z_ESA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_ESg87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z_ESg87Ee-VpvqVVotcWA" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_3z_ESQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_ESw87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z_ESw87Ee-VpvqVVotcWA" entityName="deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId())))" predecessor_AbstractAction="_3z_ESg87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_ETA87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_3z_ETA87Ee-VpvqVVotcWA" entityName="deferredResult" predecessor_AbstractAction="_3z_ESw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_ETQ87Ee-VpvqVVotcWA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z_ETQ87Ee-VpvqVVotcWA" entityName="log.info(&quot;The result for registration token based on teleTAN will be returned.&quot;)" predecessor_AbstractAction="_3z_ETA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_ETg87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z_ETg87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z_ETQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_ETw87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z_ETw87Ee-VpvqVVotcWA" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_3z_ETg87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_EUA87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z_EUA87Ee-VpvqVVotcWA" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(LabTestResult.POSITIVE.getTestResult(),appSession.get().getCreatedAt().toEpochSecond(ZoneOffset.UTC),null))),fakeDelayService.realDelayTest(),MILLISECONDS)" predecessor_AbstractAction="_3z_ETw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_EUQ87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_3z_EUQ87Ee-VpvqVVotcWA" entityName="deferredResult" predecessor_AbstractAction="_3z_EUA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_rUA87Ee-VpvqVVotcWA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z_rUA87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z_EUQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_rUQ87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_3z_rUQ87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z_rUA87Ee-VpvqVVotcWA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z_rXQ87Ee-VpvqVVotcWA">
                <branchBehaviour_BranchTransition id="_3z_rXw87Ee-VpvqVVotcWA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_3z_rVQ87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z_rVg87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z_rVg87Ee-VpvqVVotcWA" entityName="log.info(&quot;The result for registration token based on teleTAN will be returned.&quot;)" predecessor_AbstractAction="_3z_rVQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_rVw87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z_rVw87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z_rVg87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_rWA87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z_rWA87Ee-VpvqVVotcWA" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_3z_rVw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_rWQ87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z_rWQ87Ee-VpvqVVotcWA" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(LabTestResult.POSITIVE.getTestResult(),appSession.get().getCreatedAt().toEpochSecond(ZoneOffset.UTC),null))),fakeDelayService.realDelayTest(),MILLISECONDS)" predecessor_AbstractAction="_3z_rWA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_rWg87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_3z_rWg87Ee-VpvqVVotcWA" entityName="deferredResult" predecessor_AbstractAction="_3z_rWQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_rWw87Ee-VpvqVVotcWA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z_rWw87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z_rWg87Ee-VpvqVVotcWA" successor_AbstractAction="_3z_rXA87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_3z_rXA87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z_rWw87Ee-VpvqVVotcWA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_30ASYw87Ee-VpvqVVotcWA">
                <branchBehaviour_BranchTransition id="_30ASZQ87Ee-VpvqVVotcWA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_30ASYA87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_30ASYQ87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_30ASYQ87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_30ASYA87Ee-VpvqVVotcWA" successor_AbstractAction="_30ASYg87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_30ASYg87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_30ASYQ87Ee-VpvqVVotcWA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_30ASZw87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_30ASZg87Ee-VpvqVVotcWA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_30ASbA87Ee-VpvqVVotcWA" entityName="log.info(&quot;The registration token doesn't exist.&quot;)" predecessor_AbstractAction="_30ASaw87Ee-VpvqVVotcWA" successor_AbstractAction="_30ASbQ87Ee-VpvqVVotcWA"/>
      <steps_Behaviour xsi:type="seff:StopAction" id="_30ASbQ87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_30ASbA87Ee-VpvqVVotcWA"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_302m9w87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_controller_ExternalTokenController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_302m9g87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST] Provider" providedInterface__OperationProvidedRole="_30rAww87Ee-VpvqVVotcWA"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_3z7Z4w87Ee-VpvqVVotcWA" describedService__SEFF="_3uPBkA87Ee-VpvqVVotcWA">
      <steps_Behaviour xsi:type="seff:StartAction" id="_3z49pQ87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z49rA87Ee-VpvqVVotcWA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_3z49rA87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3z49pQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z49rQ87Ee-VpvqVVotcWA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z49qQ87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_3z49qw87Ee-VpvqVVotcWA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_3z49pg87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z49pw87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_3z49pw87Ee-VpvqVVotcWA" entityName="fakeRequestController.generateRegistrationToken(request)" predecessor_AbstractAction="_3z49pg87Ee-VpvqVVotcWA" successor_AbstractAction="_3z49qA87Ee-VpvqVVotcWA">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestController.generateRegistrationToken(request)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestController.generateRegistrationToken(request)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_3z49qA87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z49pw87Ee-VpvqVVotcWA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_3z49rQ87Ee-VpvqVVotcWA" entityName="stopWatch.start()" predecessor_AbstractAction="_3z49rA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z7Z4Q87Ee-VpvqVVotcWA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_3z7Z4Q87Ee-VpvqVVotcWA" entityName="Switch Branch" predecessor_AbstractAction="_3z49rQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z7Z4g87Ee-VpvqVVotcWA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z6Lxw87Ee-VpvqVVotcWA">
          <branchBehaviour_BranchTransition id="_3z6LyQ87Ee-VpvqVVotcWA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_3z5ksA87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z5ksQ87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_3z5ksQ87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z5ksA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z5ksg87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_3z5ksg87Ee-VpvqVVotcWA" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_3z5ksQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z5ksw87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_3z5ksw87Ee-VpvqVVotcWA" entityName="deferredResult.setResult(responseEntity)" predecessor_AbstractAction="_3z5ksg87Ee-VpvqVVotcWA" successor_AbstractAction="_3z5ktA87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_3z5ktA87Ee-VpvqVVotcWA" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_3z5ksw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z5ktQ87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_3z5ktQ87Ee-VpvqVVotcWA" entityName="deferredResult" predecessor_AbstractAction="_3z5ktA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z6Lww87Ee-VpvqVVotcWA">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_3z6Lww87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3z5ktQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z6LxA87Ee-VpvqVVotcWA">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z6LwA87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_3z6Lwg87Ee-VpvqVVotcWA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_3z5ktg87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z5ktw87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z5ktw87Ee-VpvqVVotcWA" entityName="teleTan.setRedeemed(true)" predecessor_AbstractAction="_3z5ktg87Ee-VpvqVVotcWA" successor_AbstractAction="_3z5kuA87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z5kuA87Ee-VpvqVVotcWA" entityName="tanService.saveTan(teleTan)" predecessor_AbstractAction="_3z5ktw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z5kuQ87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z5kuQ87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z5kuA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z5kug87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z5kug87Ee-VpvqVVotcWA" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_3z5kuQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z5kuw87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z5kuw87Ee-VpvqVVotcWA" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(response),fakeDelayService.realDelayToken(),MILLISECONDS)" predecessor_AbstractAction="_3z5kug87Ee-VpvqVVotcWA" successor_AbstractAction="_3z5kvA87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z5kvA87Ee-VpvqVVotcWA" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_3z5kuw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z5kvQ87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_3z5kvQ87Ee-VpvqVVotcWA" entityName="deferredResult" predecessor_AbstractAction="_3z5kvA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z5kvg87Ee-VpvqVVotcWA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_3z5kvg87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z5kvQ87Ee-VpvqVVotcWA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(optional.isPresent())"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_3z6LxA87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z6Lww87Ee-VpvqVVotcWA" successor_AbstractAction="_3z6LxQ87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_3z6LxQ87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z6LxA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z6Lxg87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_3z6Lxg87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z6LxQ87Ee-VpvqVVotcWA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(GUID)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z6y2Q87Ee-VpvqVVotcWA">
          <branchBehaviour_BranchTransition id="_3z6y2w87Ee-VpvqVVotcWA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_3z6Lyg87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z6y1Q87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_3z6y1Q87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3z6Lyg87Ee-VpvqVVotcWA" successor_AbstractAction="_3z6y1g87Ee-VpvqVVotcWA">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z6y0g87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_3z6y1A87Ee-VpvqVVotcWA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_3z6Lyw87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z6LzA87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z6LzA87Ee-VpvqVVotcWA" entityName="teleTan.setRedeemed(true)" predecessor_AbstractAction="_3z6Lyw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z6LzQ87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z6LzQ87Ee-VpvqVVotcWA" entityName="tanService.saveTan(teleTan)" predecessor_AbstractAction="_3z6LzA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z6Lzg87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z6Lzg87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z6LzQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z6Lzw87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z6Lzw87Ee-VpvqVVotcWA" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_3z6Lzg87Ee-VpvqVVotcWA" successor_AbstractAction="_3z6L0A87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z6L0A87Ee-VpvqVVotcWA" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(response),fakeDelayService.realDelayToken(),MILLISECONDS)" predecessor_AbstractAction="_3z6Lzw87Ee-VpvqVVotcWA" successor_AbstractAction="_3z6L0Q87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z6L0Q87Ee-VpvqVVotcWA" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_3z6L0A87Ee-VpvqVVotcWA" successor_AbstractAction="_3z6y0A87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_3z6y0A87Ee-VpvqVVotcWA" entityName="deferredResult" predecessor_AbstractAction="_3z6L0Q87Ee-VpvqVVotcWA" successor_AbstractAction="_3z6y0Q87Ee-VpvqVVotcWA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_3z6y0Q87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z6y0A87Ee-VpvqVVotcWA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(optional.isPresent())"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_3z6y1g87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z6y1Q87Ee-VpvqVVotcWA" successor_AbstractAction="_3z6y1w87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_3z6y1w87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z6y1g87Ee-VpvqVVotcWA" successor_AbstractAction="_3z6y2A87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_3z6y2A87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z6y1w87Ee-VpvqVVotcWA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z6y3w87Ee-VpvqVVotcWA">
          <branchBehaviour_BranchTransition id="_3z7Z4A87Ee-VpvqVVotcWA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_3z6y3A87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z6y3Q87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_3z6y3Q87Ee-VpvqVVotcWA" entityName="stopWatch.stop()" predecessor_AbstractAction="_3z6y3A87Ee-VpvqVVotcWA" successor_AbstractAction="_3z6y3g87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_3z6y3g87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z6y3Q87Ee-VpvqVVotcWA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_3z7Z4g87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z7Z4Q87Ee-VpvqVVotcWA"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_305DOg87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_controller_InternalTestStateController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_305DOQ87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2 Provider" providedInterface__OperationProvidedRole="_30rAxQ87Ee-VpvqVVotcWA"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_3z49ow87Ee-VpvqVVotcWA" describedService__SEFF="_3uNzcw87Ee-VpvqVVotcWA">
      <steps_Behaviour xsi:type="seff:StartAction" id="_3up4UQ87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z49oA87Ee-VpvqVVotcWA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_3z49oA87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3up4UQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z49oQ87Ee-VpvqVVotcWA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z4WoQ87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_3z4Wow87Ee-VpvqVVotcWA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_3urtgA87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z4Wnw87Ee-VpvqVVotcWA"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_3z4Wnw87Ee-VpvqVVotcWA" entityName="Switch Branch" predecessor_AbstractAction="_3urtgA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z4WoA87Ee-VpvqVVotcWA">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z4WkQ87Ee-VpvqVVotcWA">
                <branchBehaviour_BranchTransition id="_3z4Wkw87Ee-VpvqVVotcWA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_3usUkA87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z0FJQ87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_3z0FJQ87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3usUkA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z0sMA87Ee-VpvqVVotcWA">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z0FIg87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
                      <branchBehaviour_BranchTransition id="_3z0FJA87Ee-VpvqVVotcWA">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_3usUkQ87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z0FIA87Ee-VpvqVVotcWA"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_3z0FIA87Ee-VpvqVVotcWA" entityName="If Branch" predecessor_AbstractAction="_3usUkQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z0FIQ87Ee-VpvqVVotcWA">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3utisA87Ee-VpvqVVotcWA" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_3uuJwA87Ee-VpvqVVotcWA">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_3us7oA87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3us7oQ87Ee-VpvqVVotcWA"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_3us7oQ87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3us7oA87Ee-VpvqVVotcWA"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(testResultDob.getTestResult() != testResult.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_3z0FIQ87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z0FIA87Ee-VpvqVVotcWA"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.get().getHashedGuidDob() != null)"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z0sMA87Ee-VpvqVVotcWA" entityName="log.debug(&quot;Result {}&quot;,testResult)" predecessor_AbstractAction="_3z0FJQ87Ee-VpvqVVotcWA" successor_AbstractAction="_3z1TQA87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z1TQA87Ee-VpvqVVotcWA" entityName="log.info(&quot;The result for registration token based on hashed Guid will be returned.&quot;)" predecessor_AbstractAction="_3z0sMA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z3vgA87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_3z3vgA87Ee-VpvqVVotcWA" entityName="ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))" predecessor_AbstractAction="_3z1TQA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z3vgQ87Ee-VpvqVVotcWA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z3vgQ87Ee-VpvqVVotcWA" entityName="log.info(&quot;Internal TestState is not allowed for TeleTan Token.&quot;)" predecessor_AbstractAction="_3z3vgA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z4WkA87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_3z4WkA87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z3vgQ87Ee-VpvqVVotcWA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z4Wlw87Ee-VpvqVVotcWA">
                <branchBehaviour_BranchTransition id="_3z4WmQ87Ee-VpvqVVotcWA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_3z4WlA87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z4WlQ87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_3z4WlQ87Ee-VpvqVVotcWA" entityName="log.info(&quot;Internal TestState is not allowed for TeleTan Token.&quot;)" predecessor_AbstractAction="_3z4WlA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z4Wlg87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_3z4Wlg87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z4WlQ87Ee-VpvqVVotcWA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_3z4WnA87Ee-VpvqVVotcWA">
                <branchBehaviour_BranchTransition id="_3z4Wng87Ee-VpvqVVotcWA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_3z4Wmg87Ee-VpvqVVotcWA" entityName="Start Action" successor_AbstractAction="_3z4Wmw87Ee-VpvqVVotcWA"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_3z4Wmw87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z4Wmg87Ee-VpvqVVotcWA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_3z4WoA87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z4Wnw87Ee-VpvqVVotcWA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_3z49oQ87Ee-VpvqVVotcWA" entityName="log.info(&quot;The registration token doesn't exist.&quot;)" predecessor_AbstractAction="_3z49oA87Ee-VpvqVVotcWA" successor_AbstractAction="_3z49og87Ee-VpvqVVotcWA"/>
      <steps_Behaviour xsi:type="seff:StopAction" id="_3z49og87Ee-VpvqVVotcWA" entityName="Stop Action" predecessor_AbstractAction="_3z49oQ87Ee-VpvqVVotcWA"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_308GgA87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_service_FakeRequestService"/>
  <components__Repository xsi:type="repository:CompositeComponent" id="_3097sQ87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_controller_ExternalTestStateController">
    <assemblyContexts__ComposedStructure id="_30-iwg87Ee-VpvqVVotcWA" encapsulatedComponent__AssemblyContext="_300KuQ87Ee-VpvqVVotcWA"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_30_w4A87Ee-VpvqVVotcWA" innerProvidedRole_ProvidedDelegationConnector="_300KuA87Ee-VpvqVVotcWA" outerProvidedRole_ProvidedDelegationConnector="_3097sA87Ee-VpvqVVotcWA" assemblyContext_ProvidedDelegationConnector="_30-iwg87Ee-VpvqVVotcWA"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_3097sA87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/testresult[POST] Provider" providedInterface__OperationProvidedRole="_30rAxw87Ee-VpvqVVotcWA"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_3097sw87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_controller_ExternalTanController">
    <assemblyContexts__ComposedStructure id="_30-ixg87Ee-VpvqVVotcWA" encapsulatedComponent__AssemblyContext="_30xucQ87Ee-VpvqVVotcWA"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_30_w4Q87Ee-VpvqVVotcWA" innerProvidedRole_ProvidedDelegationConnector="_30xucA87Ee-VpvqVVotcWA" outerProvidedRole_ProvidedDelegationConnector="_3097sg87Ee-VpvqVVotcWA" assemblyContext_ProvidedDelegationConnector="_30-ixg87Ee-VpvqVVotcWA"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_3097sg87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/tan[POST] Provider" providedInterface__OperationProvidedRole="_30rAxg87Ee-VpvqVVotcWA"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_3097tQ87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_controller_ExternalTokenController">
    <assemblyContexts__ComposedStructure id="_30-ixA87Ee-VpvqVVotcWA" encapsulatedComponent__AssemblyContext="_302m9w87Ee-VpvqVVotcWA"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_30_w4g87Ee-VpvqVVotcWA" innerProvidedRole_ProvidedDelegationConnector="_302m9g87Ee-VpvqVVotcWA" outerProvidedRole_ProvidedDelegationConnector="_3097tA87Ee-VpvqVVotcWA" assemblyContext_ProvidedDelegationConnector="_30-ixA87Ee-VpvqVVotcWA"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_3097tA87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST] Provider" providedInterface__OperationProvidedRole="_30rAww87Ee-VpvqVVotcWA"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_3097uA87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_controller_InternalTanController">
    <assemblyContexts__ComposedStructure id="_30_J0g87Ee-VpvqVVotcWA" encapsulatedComponent__AssemblyContext="_30rn0Q87Ee-VpvqVVotcWA"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_30_w4w87Ee-VpvqVVotcWA" innerProvidedRole_ProvidedDelegationConnector="_30rAyA87Ee-VpvqVVotcWA" outerProvidedRole_ProvidedDelegationConnector="_3097tw87Ee-VpvqVVotcWA" assemblyContext_ProvidedDelegationConnector="_30_J0g87Ee-VpvqVVotcWA"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_30_w5Q87Ee-VpvqVVotcWA" innerProvidedRole_ProvidedDelegationConnector="_30rn0A87Ee-VpvqVVotcWA" outerProvidedRole_ProvidedDelegationConnector="_3097tg87Ee-VpvqVVotcWA" assemblyContext_ProvidedDelegationConnector="_30_J0g87Ee-VpvqVVotcWA"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_3097tg87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST] Provider" providedInterface__OperationProvidedRole="_30rAxA87Ee-VpvqVVotcWA"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_3097tw87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST] Provider" providedInterface__OperationProvidedRole="_30rAwg87Ee-VpvqVVotcWA"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_3097ug87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_controller_InternalTestStateController">
    <assemblyContexts__ComposedStructure id="_30-iwA87Ee-VpvqVVotcWA" encapsulatedComponent__AssemblyContext="_305DOg87Ee-VpvqVVotcWA"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_30_w5A87Ee-VpvqVVotcWA" innerProvidedRole_ProvidedDelegationConnector="_305DOQ87Ee-VpvqVVotcWA" outerProvidedRole_ProvidedDelegationConnector="_3097uQ87Ee-VpvqVVotcWA" assemblyContext_ProvidedDelegationConnector="_30-iwA87Ee-VpvqVVotcWA"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_3097uQ87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2 Provider" providedInterface__OperationProvidedRole="_30rAxQ87Ee-VpvqVVotcWA"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_3097uw87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_service_FakeRequestService">
    <assemblyContexts__ComposedStructure id="_30_J0A87Ee-VpvqVVotcWA" encapsulatedComponent__AssemblyContext="_308GgA87Ee-VpvqVVotcWA"/>
  </components__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_30rAwg87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST]">
    <signatures__OperationInterface id="_3uOagw87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST]" returnType__OperationSignature="_3uNMYQ87Ee-VpvqVVotcWA">
      <parameters__OperationSignature dataType__Parameter="_3uOagQ87Ee-VpvqVVotcWA" parameterName="AuthorizationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature dataType__Parameter="_3uOagg87Ee-VpvqVVotcWA" parameterName="TeleTanType" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_30rAww87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST]">
    <signatures__OperationInterface id="_3uPBkA87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST]" returnType__OperationSignature="_3tZ7IA87Ee-VpvqVVotcWA">
      <parameters__OperationSignature dataType__Parameter="_3uOahg87Ee-VpvqVVotcWA" parameterName="RegistrationTokenRequest" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="String" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_30rAxA87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST]">
    <signatures__OperationInterface id="_3uNMYg87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST]" returnType__OperationSignature="_3uNMYQ87Ee-VpvqVVotcWA">
      <parameters__OperationSignature dataType__Parameter="_3uNMYA87Ee-VpvqVVotcWA" parameterName="Tan" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_30rAxQ87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2">
    <signatures__OperationInterface id="_3uNzcw87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2" returnType__OperationSignature="_3uNMYQ87Ee-VpvqVVotcWA">
      <parameters__OperationSignature dataType__Parameter="_3tYtAA87Ee-VpvqVVotcWA" parameterName="RegistrationToken" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_30rAxg87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/tan[POST]">
    <signatures__OperationInterface id="_3uNzcA87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/tan[POST]" returnType__OperationSignature="_3tZ7IA87Ee-VpvqVVotcWA">
      <parameters__OperationSignature dataType__Parameter="_3tYtAA87Ee-VpvqVVotcWA" parameterName="RegistrationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="String" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_30rAxw87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/testresult[POST]">
    <signatures__OperationInterface id="_3taiMA87Ee-VpvqVVotcWA" entityName="SPRING-APPLICATION/version/v1/testresult[POST]" returnType__OperationSignature="_3tZ7IA87Ee-VpvqVVotcWA">
      <parameters__OperationSignature dataType__Parameter="_3tYtAA87Ee-VpvqVVotcWA" parameterName="RegistrationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="String" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_3tYtAA87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_model_RegistrationToken"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_3tZ7IA87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_controller_DeferredResult"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_3uNMYA87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_model_Tan"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_3uNMYQ87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_controller_ResponseEntity"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_3uOagQ87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_model_AuthorizationToken"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_3uOagg87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_model_TeleTanType"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_3uOahg87Ee-VpvqVVotcWA" entityName="app_coronawarn_verification_model_RegistrationTokenRequest"/>
</repository:Repository>
