<?xml version="1.0" encoding="UTF-8"?>
<repository:Repository xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:composition="http://palladiosimulator.org/PalladioComponentModel/Core/Composition/5.2" xmlns:repository="http://palladiosimulator.org/PalladioComponentModel/Repository/5.2" xmlns:seff="http://palladiosimulator.org/PalladioComponentModel/SEFF/5.2" xmlns:stoex="http://sdq.ipd.uka.de/StochasticExpressions/2.2" id="_jDLVuMGeEe-iN6ojpugYyg">
  <components__Repository xsi:type="repository:BasicComponent" id="_jC5o6cGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_controller_ExternalTanController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_jC5o6MGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/tan[POST] Provider" providedInterface__OperationProvidedRole="_jC5o4sGeEe-iN6ojpugYyg"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_jCLQLMGeEe-iN6ojpugYyg" describedService__SEFF="_i8WU8cGeEe-iN6ojpugYyg">
      <steps_Behaviour xsi:type="seff:StartAction" id="_i8yZ0cGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCIz4MGeEe-iN6ojpugYyg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_jCIz4MGeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_i8yZ0cGeEe-iN6ojpugYyg" successor_AbstractAction="_jCJa8MGeEe-iN6ojpugYyg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCHlwMGeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_jCIM0MGeEe-iN6ojpugYyg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_i80PAMGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCG-sMGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_jCG-sMGeEe-iN6ojpugYyg" entityName="fakeRequestService.generateTan(registrationToken)" predecessor_AbstractAction="_i80PAMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCG-scGeEe-iN6ojpugYyg">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestService_generateTan(registrationToken)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestService_generateTan(registrationToken)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_jCG-scGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCG-sMGeEe-iN6ojpugYyg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_jCJa8MGeEe-iN6ojpugYyg" entityName="stopWatch.start()" predecessor_AbstractAction="_jCIz4MGeEe-iN6ojpugYyg" successor_AbstractAction="_jCLQKsGeEe-iN6ojpugYyg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_jCLQKsGeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCJa8MGeEe-iN6ojpugYyg" successor_AbstractAction="_jCLQK8GeEe-iN6ojpugYyg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCLQJ8GeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_jCLQKcGeEe-iN6ojpugYyg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_jCJa8cGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCLQJcGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_jCLQJcGeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCJa8cGeEe-iN6ojpugYyg" successor_AbstractAction="_jCLQJsGeEe-iN6ojpugYyg">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCLQIsGeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_jCLQJMGeEe-iN6ojpugYyg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_jCJa8sGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCKpF8GeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_jCKpF8GeEe-iN6ojpugYyg" entityName="Switch Branch" predecessor_AbstractAction="_jCJa8sGeEe-iN6ojpugYyg" successor_AbstractAction="_jCKpGMGeEe-iN6ojpugYyg">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCKCCsGeEe-iN6ojpugYyg">
                      <branchBehaviour_BranchTransition id="_jCKCDMGeEe-iN6ojpugYyg">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_jCKCAMGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCKCB8GeEe-iN6ojpugYyg"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_jCKCB8GeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCKCAMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCKCCMGeEe-iN6ojpugYyg">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCKCBMGeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_jCKCBsGeEe-iN6ojpugYyg">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_jCKCAcGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCKCAsGeEe-iN6ojpugYyg"/>
                              <steps_Behaviour xsi:type="seff:InternalAction" id="_jCKCAsGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCKCAcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCKCA8GeEe-iN6ojpugYyg"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_jCKCA8GeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCKCAsGeEe-iN6ojpugYyg"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(covidTestResult.getTestResult() != LabTestResult.POSITIVE.getTestResult() &amp;&amp; covidTestResult.getTestResult() != LabTestResult.QUICK_POSITIVE.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_jCKCCMGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCKCB8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCKCCcGeEe-iN6ojpugYyg"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_jCKCCcGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCKCCMGeEe-iN6ojpugYyg"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
                    </branches_Branch>
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCKCEMGeEe-iN6ojpugYyg">
                      <branchBehaviour_BranchTransition id="_jCKpEMGeEe-iN6ojpugYyg">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_jCKCDcGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCKCDsGeEe-iN6ojpugYyg"/>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_jCKCDsGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCKCDcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCKCD8GeEe-iN6ojpugYyg"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_jCKCD8GeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCKCDsGeEe-iN6ojpugYyg"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
                    </branches_Branch>
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCKpFMGeEe-iN6ojpugYyg">
                      <branchBehaviour_BranchTransition id="_jCKpFsGeEe-iN6ojpugYyg">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_jCKpEcGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCKpEsGeEe-iN6ojpugYyg"/>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_jCKpEsGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCKpEcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCKpE8GeEe-iN6ojpugYyg"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_jCKpE8GeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCKpEsGeEe-iN6ojpugYyg"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCKpGMGeEe-iN6ojpugYyg" entityName="appSession.incrementTanCounter()" predecessor_AbstractAction="_jCKpF8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCKpGcGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCKpGcGeEe-iN6ojpugYyg" entityName="appSession.setUpdatedAt(LocalDateTime.now())" predecessor_AbstractAction="_jCKpGMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCKpGsGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCKpGsGeEe-iN6ojpugYyg" entityName="appSessionService.saveAppSession(appSession)" predecessor_AbstractAction="_jCKpGcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCKpG8GeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCKpG8GeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCKpGsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCKpHMGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCKpHMGeEe-iN6ojpugYyg" entityName="fakeDelayService.updateFakeTanRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_jCKpG8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCKpHcGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCKpHcGeEe-iN6ojpugYyg" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.status(HttpStatus.CREATED).body(returnTan)),fakeDelayService.realDelayTan(),MILLISECONDS)" predecessor_AbstractAction="_jCKpHMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCKpHsGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCKpHsGeEe-iN6ojpugYyg" entityName="log.info(&quot;Returning the successfully generated tan.&quot;)" predecessor_AbstractAction="_jCKpHcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCLQIMGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_jCLQIMGeEe-iN6ojpugYyg" entityName="deferredResult" predecessor_AbstractAction="_jCKpHsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCLQIcGeEe-iN6ojpugYyg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_jCLQIcGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCLQIMGeEe-iN6ojpugYyg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.getTanCounter() &lt; tancountermax)"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_jCLQJsGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCLQJcGeEe-iN6ojpugYyg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(actual.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_jCLQK8GeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCLQKsGeEe-iN6ojpugYyg"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_jC9TQcGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_controller_InternalTestStateController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_jC9TQMGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/testresult[POST] Provider" providedInterface__OperationProvidedRole="_jC5o5cGeEe-iN6ojpugYyg"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_jCO6gcGeEe-iN6ojpugYyg" describedService__SEFF="_i7icoMGeEe-iN6ojpugYyg">
      <steps_Behaviour xsi:type="seff:StartAction" id="_jCNsZ8GeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCOThsGeEe-iN6ojpugYyg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_jCOThsGeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCNsZ8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCOTh8GeEe-iN6ojpugYyg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCOTg8GeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_jCOThcGeEe-iN6ojpugYyg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_jCNsaMGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCOTgcGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_jCOTgcGeEe-iN6ojpugYyg" entityName="Switch Branch" predecessor_AbstractAction="_jCNsaMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCOTgsGeEe-iN6ojpugYyg">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCOTc8GeEe-iN6ojpugYyg">
                <branchBehaviour_BranchTransition id="_jCOTdcGeEe-iN6ojpugYyg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_jCNsacGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCNsdcGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_jCNsdcGeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCNsacGeEe-iN6ojpugYyg" successor_AbstractAction="_jCNsdsGeEe-iN6ojpugYyg">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCNscsGeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
                      <branchBehaviour_BranchTransition id="_jCNsdMGeEe-iN6ojpugYyg">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_jCNsasGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCNscMGeEe-iN6ojpugYyg"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_jCNscMGeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCNsasGeEe-iN6ojpugYyg" successor_AbstractAction="_jCNsccGeEe-iN6ojpugYyg">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCNsbcGeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_jCNsb8GeEe-iN6ojpugYyg">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_jCNsa8GeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCNsbMGeEe-iN6ojpugYyg"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_jCNsbMGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCNsa8GeEe-iN6ojpugYyg"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(testResultDob.getTestResult() != testResult.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_jCNsccGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCNscMGeEe-iN6ojpugYyg"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.get().getHashedGuidDob() != null)"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCNsdsGeEe-iN6ojpugYyg" entityName="log.debug(&quot;Result {}&quot;,testResult)" predecessor_AbstractAction="_jCNsdcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCNsd8GeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCNsd8GeEe-iN6ojpugYyg" entityName="log.info(&quot;The result for registration token based on hashed Guid will be returned.&quot;)" predecessor_AbstractAction="_jCNsdsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCOTcMGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_jCOTcMGeEe-iN6ojpugYyg" entityName="ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))" predecessor_AbstractAction="_jCNsd8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCOTccGeEe-iN6ojpugYyg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.ResponseEntity_ok(new InternalTestResult(testResult_getTestResult(),testResult_getSc(),testResult_getLabId(),testResult_getResponsePadding(),appSession_get()_getHashedGuid()))"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="ResponseEntity_ok(new InternalTestResult(testResult_getTestResult(),testResult_getSc(),testResult_getLabId(),testResult_getResponsePadding(),appSession_get()_getHashedGuid()))"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCOTccGeEe-iN6ojpugYyg" entityName="log.info(&quot;Internal TestState is not allowed for TeleTan Token.&quot;)" predecessor_AbstractAction="_jCOTcMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCOTcsGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_jCOTcsGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCOTccGeEe-iN6ojpugYyg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCOTecGeEe-iN6ojpugYyg">
                <branchBehaviour_BranchTransition id="_jCOTe8GeEe-iN6ojpugYyg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_jCOTdsGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCOTd8GeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCOTd8GeEe-iN6ojpugYyg" entityName="log.info(&quot;Internal TestState is not allowed for TeleTan Token.&quot;)" predecessor_AbstractAction="_jCOTdsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCOTeMGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_jCOTeMGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCOTd8GeEe-iN6ojpugYyg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCOTfsGeEe-iN6ojpugYyg">
                <branchBehaviour_BranchTransition id="_jCOTgMGeEe-iN6ojpugYyg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_jCOTfMGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCOTfcGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_jCOTfcGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCOTfMGeEe-iN6ojpugYyg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_jCOTgsGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCOTgcGeEe-iN6ojpugYyg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_jCOTh8GeEe-iN6ojpugYyg" entityName="log.info(&quot;The registration token doesn't exist.&quot;)" predecessor_AbstractAction="_jCOThsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCO6gMGeEe-iN6ojpugYyg"/>
      <steps_Behaviour xsi:type="seff:StopAction" id="_jCO6gMGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCOTh8GeEe-iN6ojpugYyg"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_jC_vgcGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_controller_ExternalTestStateController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_jC_vgMGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2 Provider" providedInterface__OperationProvidedRole="_jC5o5sGeEe-iN6ojpugYyg"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_jCR95MGeEe-iN6ojpugYyg" describedService__SEFF="_i8XjEMGeEe-iN6ojpugYyg">
      <steps_Behaviour xsi:type="seff:StartAction" id="_jCQIp8GeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCQIrsGeEe-iN6ojpugYyg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_jCQIrsGeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCQIp8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCQIr8GeEe-iN6ojpugYyg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCQIq8GeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_jCQIrcGeEe-iN6ojpugYyg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_jCQIqMGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCQIqcGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_jCQIqcGeEe-iN6ojpugYyg" entityName="fakeRequestService.getTestState(registrationToken)" predecessor_AbstractAction="_jCQIqMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCQIqsGeEe-iN6ojpugYyg">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestService_getTestState(registrationToken)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestService_getTestState(registrationToken)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_jCQIqsGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCQIqcGeEe-iN6ojpugYyg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_jCQIr8GeEe-iN6ojpugYyg" entityName="stopWatch.start()" predecessor_AbstractAction="_jCQIrsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCR94cGeEe-iN6ojpugYyg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_jCR94cGeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCQIr8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCR94sGeEe-iN6ojpugYyg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCR93sGeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_jCR94MGeEe-iN6ojpugYyg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_jCQIsMGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCR93MGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_jCR93MGeEe-iN6ojpugYyg" entityName="Switch Branch" predecessor_AbstractAction="_jCQIsMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCR93cGeEe-iN6ojpugYyg">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCRWxMGeEe-iN6ojpugYyg">
                <branchBehaviour_BranchTransition id="_jCRWxsGeEe-iN6ojpugYyg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_jCQIscGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCQIssGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCQIssGeEe-iN6ojpugYyg" entityName="testResult.setResponsePadding(RandomStringUtils.randomAlphanumeric(RESPONSE_PADDING_LENGTH))" predecessor_AbstractAction="_jCQIscGeEe-iN6ojpugYyg" successor_AbstractAction="_jCQvtcGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_jCQvtcGeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCQIssGeEe-iN6ojpugYyg" successor_AbstractAction="_jCQvtsGeEe-iN6ojpugYyg">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCQvssGeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
                      <branchBehaviour_BranchTransition id="_jCQvtMGeEe-iN6ojpugYyg">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_jCQIs8GeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCQvsMGeEe-iN6ojpugYyg"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_jCQvsMGeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCQIs8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCQvscGeEe-iN6ojpugYyg">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCQItsGeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_jCQIuMGeEe-iN6ojpugYyg">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_jCQItMGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCQItcGeEe-iN6ojpugYyg"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_jCQItcGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCQItMGeEe-iN6ojpugYyg"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(testResultDob.getTestResult() != testResult.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_jCQvscGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCQvsMGeEe-iN6ojpugYyg"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(!config.isDisableDobHashCheckForExternalTestResult() &amp;&amp; appSession.get().getHashedGuidDob() != null)"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCQvtsGeEe-iN6ojpugYyg" entityName="log.debug(&quot;Result {}&quot;,testResult)" predecessor_AbstractAction="_jCQvtcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCQvt8GeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCQvt8GeEe-iN6ojpugYyg" entityName="log.info(&quot;The result for registration token based on hashed Guid will be returned.&quot;)" predecessor_AbstractAction="_jCQvtsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCQvuMGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCQvuMGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCQvt8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCQvucGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCQvucGeEe-iN6ojpugYyg" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_jCQvuMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCQvusGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCQvusGeEe-iN6ojpugYyg" entityName="deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId())))" predecessor_AbstractAction="_jCQvucGeEe-iN6ojpugYyg" successor_AbstractAction="_jCQvu8GeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_jCQvu8GeEe-iN6ojpugYyg" entityName="deferredResult" predecessor_AbstractAction="_jCQvusGeEe-iN6ojpugYyg" successor_AbstractAction="_jCQvvMGeEe-iN6ojpugYyg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCQvvMGeEe-iN6ojpugYyg" entityName="log.info(&quot;The result for registration token based on teleTAN will be returned.&quot;)" predecessor_AbstractAction="_jCQvu8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCQvvcGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCQvvcGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCQvvMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCQvvsGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCQvvsGeEe-iN6ojpugYyg" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_jCQvvcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCRWwMGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCRWwMGeEe-iN6ojpugYyg" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(LabTestResult.POSITIVE.getTestResult(),appSession.get().getCreatedAt().toEpochSecond(ZoneOffset.UTC),null))),fakeDelayService.realDelayTest(),MILLISECONDS)" predecessor_AbstractAction="_jCQvvsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCRWwcGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_jCRWwcGeEe-iN6ojpugYyg" entityName="deferredResult" predecessor_AbstractAction="_jCRWwMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCRWwsGeEe-iN6ojpugYyg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCRWwsGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCRWwcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCRWw8GeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_jCRWw8GeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCRWwsGeEe-iN6ojpugYyg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCR908GeEe-iN6ojpugYyg">
                <branchBehaviour_BranchTransition id="_jCR91cGeEe-iN6ojpugYyg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_jCRWx8GeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCRWyMGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCRWyMGeEe-iN6ojpugYyg" entityName="log.info(&quot;The result for registration token based on teleTAN will be returned.&quot;)" predecessor_AbstractAction="_jCRWx8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCRWycGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCRWycGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCRWyMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCRWysGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCRWysGeEe-iN6ojpugYyg" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_jCRWycGeEe-iN6ojpugYyg" successor_AbstractAction="_jCRWy8GeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCRWy8GeEe-iN6ojpugYyg" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(LabTestResult.POSITIVE.getTestResult(),appSession.get().getCreatedAt().toEpochSecond(ZoneOffset.UTC),null))),fakeDelayService.realDelayTest(),MILLISECONDS)" predecessor_AbstractAction="_jCRWysGeEe-iN6ojpugYyg" successor_AbstractAction="_jCR90MGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_jCR90MGeEe-iN6ojpugYyg" entityName="deferredResult" predecessor_AbstractAction="_jCRWy8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCR90cGeEe-iN6ojpugYyg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCR90cGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCR90MGeEe-iN6ojpugYyg" successor_AbstractAction="_jCR90sGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_jCR90sGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCR90cGeEe-iN6ojpugYyg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCR92cGeEe-iN6ojpugYyg">
                <branchBehaviour_BranchTransition id="_jCR928GeEe-iN6ojpugYyg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_jCR91sGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCR918GeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCR918GeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCR91sGeEe-iN6ojpugYyg" successor_AbstractAction="_jCR92MGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_jCR92MGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCR918GeEe-iN6ojpugYyg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_jCR93cGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCR93MGeEe-iN6ojpugYyg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_jCR94sGeEe-iN6ojpugYyg" entityName="log.info(&quot;The registration token doesn't exist.&quot;)" predecessor_AbstractAction="_jCR94cGeEe-iN6ojpugYyg" successor_AbstractAction="_jCR948GeEe-iN6ojpugYyg"/>
      <steps_Behaviour xsi:type="seff:StopAction" id="_jCR948GeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCR94sGeEe-iN6ojpugYyg"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_jDCLwMGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_service_FakeRequestService"/>
  <components__Repository xsi:type="repository:BasicComponent" id="_jDCLwsGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_controller_ExternalTokenController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_jDCLwcGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST] Provider" providedInterface__OperationProvidedRole="_jC5o5MGeEe-iN6ojpugYyg"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_jCNsZcGeEe-iN6ojpugYyg" describedService__SEFF="_i8W8AcGeEe-iN6ojpugYyg">
      <steps_Behaviour xsi:type="seff:StartAction" id="_jCLQLsGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCL3NsGeEe-iN6ojpugYyg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_jCL3NsGeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCLQLsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCL3N8GeEe-iN6ojpugYyg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCL3M8GeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_jCL3NcGeEe-iN6ojpugYyg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_jCL3MMGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCL3McGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_jCL3McGeEe-iN6ojpugYyg" entityName="fakeRequestController.generateRegistrationToken(request)" predecessor_AbstractAction="_jCL3MMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCL3MsGeEe-iN6ojpugYyg">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestController_generateRegistrationToken(request)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestController_generateRegistrationToken(request)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_jCL3MsGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCL3McGeEe-iN6ojpugYyg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_jCL3N8GeEe-iN6ojpugYyg" entityName="stopWatch.start()" predecessor_AbstractAction="_jCL3NsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCNsY8GeEe-iN6ojpugYyg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_jCNsY8GeEe-iN6ojpugYyg" entityName="Switch Branch" predecessor_AbstractAction="_jCL3N8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCNsZMGeEe-iN6ojpugYyg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCMeS8GeEe-iN6ojpugYyg">
          <branchBehaviour_BranchTransition id="_jCMeTcGeEe-iN6ojpugYyg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_jCL3OMGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCL3OcGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_jCL3OcGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCL3OMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCL3OsGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_jCL3OsGeEe-iN6ojpugYyg" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_jCL3OcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCL3O8GeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_jCL3O8GeEe-iN6ojpugYyg" entityName="deferredResult.setResult(responseEntity)" predecessor_AbstractAction="_jCL3OsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCL3PMGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_jCL3PMGeEe-iN6ojpugYyg" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_jCL3O8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCL3PcGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_jCL3PcGeEe-iN6ojpugYyg" entityName="deferredResult" predecessor_AbstractAction="_jCL3PMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCMeR8GeEe-iN6ojpugYyg">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_jCMeR8GeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCL3PcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCMeSMGeEe-iN6ojpugYyg">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCMeRMGeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_jCMeRsGeEe-iN6ojpugYyg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_jCL3PsGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCL3P8GeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCL3P8GeEe-iN6ojpugYyg" entityName="teleTan.setRedeemed(true)" predecessor_AbstractAction="_jCL3PsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCL3QMGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCL3QMGeEe-iN6ojpugYyg" entityName="tanService.saveTan(teleTan)" predecessor_AbstractAction="_jCL3P8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCL3QcGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCL3QcGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCL3QMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCL3QsGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCL3QsGeEe-iN6ojpugYyg" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_jCL3QcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCMeQMGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCMeQMGeEe-iN6ojpugYyg" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(response),fakeDelayService.realDelayToken(),MILLISECONDS)" predecessor_AbstractAction="_jCL3QsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCMeQcGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCMeQcGeEe-iN6ojpugYyg" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_jCMeQMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCMeQsGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_jCMeQsGeEe-iN6ojpugYyg" entityName="deferredResult" predecessor_AbstractAction="_jCMeQcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCMeQ8GeEe-iN6ojpugYyg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_jCMeQ8GeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCMeQsGeEe-iN6ojpugYyg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(optional.isPresent())"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_jCMeSMGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCMeR8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCMeScGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_jCMeScGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCMeSMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCMeSsGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_jCMeSsGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCMeScGeEe-iN6ojpugYyg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(GUID)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCNFXsGeEe-iN6ojpugYyg">
          <branchBehaviour_BranchTransition id="_jCNFYMGeEe-iN6ojpugYyg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_jCMeTsGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCNFWsGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_jCNFWsGeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCMeTsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCNFW8GeEe-iN6ojpugYyg">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCNFV8GeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_jCNFWcGeEe-iN6ojpugYyg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_jCMeT8GeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCMeUMGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCMeUMGeEe-iN6ojpugYyg" entityName="teleTan.setRedeemed(true)" predecessor_AbstractAction="_jCMeT8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCNFUMGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCNFUMGeEe-iN6ojpugYyg" entityName="tanService.saveTan(teleTan)" predecessor_AbstractAction="_jCMeUMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCNFUcGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCNFUcGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCNFUMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCNFUsGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCNFUsGeEe-iN6ojpugYyg" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_jCNFUcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCNFU8GeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCNFU8GeEe-iN6ojpugYyg" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(response),fakeDelayService.realDelayToken(),MILLISECONDS)" predecessor_AbstractAction="_jCNFUsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCNFVMGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCNFVMGeEe-iN6ojpugYyg" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_jCNFU8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCNFVcGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_jCNFVcGeEe-iN6ojpugYyg" entityName="deferredResult" predecessor_AbstractAction="_jCNFVMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCNFVsGeEe-iN6ojpugYyg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_jCNFVsGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCNFVcGeEe-iN6ojpugYyg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(optional.isPresent())"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_jCNFW8GeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCNFWsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCNFXMGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_jCNFXMGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCNFW8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCNFXcGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_jCNFXcGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCNFXMGeEe-iN6ojpugYyg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCNsYMGeEe-iN6ojpugYyg">
          <branchBehaviour_BranchTransition id="_jCNsYsGeEe-iN6ojpugYyg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_jCNFYcGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCNFYsGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_jCNFYsGeEe-iN6ojpugYyg" entityName="stopWatch.stop()" predecessor_AbstractAction="_jCNFYcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCNFY8GeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_jCNFY8GeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCNFYsGeEe-iN6ojpugYyg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_jCNsZMGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCNsY8GeEe-iN6ojpugYyg"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_jDEA_8GeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_controller_InternalTanController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_jDEA_cGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST] Provider" providedInterface__OperationProvidedRole="_jC5o48GeEe-iN6ojpugYyg"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_jDEA_sGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST] Provider" providedInterface__OperationProvidedRole="_jC5o58GeEe-iN6ojpugYyg"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_jCQIpcGeEe-iN6ojpugYyg" describedService__SEFF="_i8XjFcGeEe-iN6ojpugYyg">
      <steps_Behaviour xsi:type="seff:StartAction" id="_jCO6iMGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCPhlsGeEe-iN6ojpugYyg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_jCPhlsGeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCO6iMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCQIo8GeEe-iN6ojpugYyg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCO6jMGeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_jCO6jsGeEe-iN6ojpugYyg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_jCO6icGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCO6isGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_jCO6isGeEe-iN6ojpugYyg" entityName="requiredRoles.add(AuthorizationRole.AUTH_C19_HOTLINE)" predecessor_AbstractAction="_jCO6icGeEe-iN6ojpugYyg" successor_AbstractAction="_jCO6i8GeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_jCO6i8GeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCO6isGeEe-iN6ojpugYyg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(teleTanType == null)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCPhk8GeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_jCPhlcGeEe-iN6ojpugYyg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_jCPhkMGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCPhkcGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_jCPhkcGeEe-iN6ojpugYyg" entityName="requiredRoles.add(AuthorizationRole.AUTH_C19_HOTLINE_EVENT)" predecessor_AbstractAction="_jCPhkMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCPhksGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_jCPhksGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCPhkcGeEe-iN6ojpugYyg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(teleTanType == TeleTanType.EVENT)"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_jCQIo8GeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCPhlsGeEe-iN6ojpugYyg" successor_AbstractAction="_jCQIpMGeEe-iN6ojpugYyg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCQIoMGeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_jCQIosGeEe-iN6ojpugYyg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_jCPhl8GeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCPhpMGeEe-iN6ojpugYyg"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_jCPhpMGeEe-iN6ojpugYyg" entityName="If Branch" predecessor_AbstractAction="_jCPhl8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCPhpcGeEe-iN6ojpugYyg">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCPhnMGeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_jCPhnsGeEe-iN6ojpugYyg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_jCPhmMGeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCPhmcGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_jCPhmcGeEe-iN6ojpugYyg" entityName="log.info(&quot;The teleTAN is generated.&quot;)" predecessor_AbstractAction="_jCPhmMGeEe-iN6ojpugYyg" successor_AbstractAction="_jCPhmsGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_jCPhmsGeEe-iN6ojpugYyg" entityName="ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))" predecessor_AbstractAction="_jCPhmcGeEe-iN6ojpugYyg" successor_AbstractAction="_jCPhm8GeEe-iN6ojpugYyg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.ResponseEntity_status(HttpStatus_CREATED)_body(new TeleTan(teleTan))"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="ResponseEntity_status(HttpStatus_CREATED)_body(new TeleTan(teleTan))"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_jCPhm8GeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCPhmsGeEe-iN6ojpugYyg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(tanService.isTeleTanRateLimitNotExceeded())"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_jCPhocGeEe-iN6ojpugYyg" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_jCPho8GeEe-iN6ojpugYyg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_jCPhn8GeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCPhoMGeEe-iN6ojpugYyg"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_jCPhoMGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCPhn8GeEe-iN6ojpugYyg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: else"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_jCPhpcGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCPhpMGeEe-iN6ojpugYyg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(jwtService.isAuthorized(authorization.getToken(),requiredRoles))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_jCQIpMGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCQIo8GeEe-iN6ojpugYyg"/>
    </serviceEffectSpecifications__BasicComponent>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_jCO6hsGeEe-iN6ojpugYyg" describedService__SEFF="_i8Vt4cGeEe-iN6ojpugYyg">
      <steps_Behaviour xsi:type="seff:StartAction" id="_jCO6g8GeEe-iN6ojpugYyg" entityName="Start Action" successor_AbstractAction="_jCO6hMGeEe-iN6ojpugYyg"/>
      <steps_Behaviour xsi:type="seff:SetVariableAction" id="_jCO6hMGeEe-iN6ojpugYyg" entityName="tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)" predecessor_AbstractAction="_jCO6g8GeEe-iN6ojpugYyg" successor_AbstractAction="_jCO6hcGeEe-iN6ojpugYyg">
        <localVariableUsages_SetVariableAction>
          <variableCharacterisation_VariableUsage type="VALUE">
            <specification_VariableCharacterisation specification="PrimitiveType.tanService_getEntityByTan(tan_getTan())_filter(t -> t_canBeRedeemed(LocalDateTime_now()))_map(t -> {&#xA;  tanService_deleteTan(t);&#xA;  log_info(&quot;The Tan is valid_&quot;);&#xA;  return t;&#xA;}&#xA;)_map(t -> {&#xA;  ResponseEntity_BodyBuilder responseBuilder=ResponseEntity_ok();&#xA;  if (t_getTeleTanType() != null) {&#xA;    responseBuilder_header(TELE_TAN_TYPE_HEADER,t_getTeleTanType()_toString());&#xA;  }&#xA;  return responseBuilder_build();&#xA;}&#xA;)_orElseGet(() -> {&#xA;  log_info(&quot;The Tan is invalid_&quot;);&#xA;  throw new VerificationServerException(HttpStatus_NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)"/>
          </variableCharacterisation_VariableUsage>
          <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
            <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="tanService_getEntityByTan(tan_getTan())_filter(t -> t_canBeRedeemed(LocalDateTime_now()))_map(t -> {&#xA;  tanService_deleteTan(t);&#xA;  log_info(&quot;The Tan is valid_&quot;);&#xA;  return t;&#xA;}&#xA;)_map(t -> {&#xA;  ResponseEntity_BodyBuilder responseBuilder=ResponseEntity_ok();&#xA;  if (t_getTeleTanType() != null) {&#xA;    responseBuilder_header(TELE_TAN_TYPE_HEADER,t_getTeleTanType()_toString());&#xA;  }&#xA;  return responseBuilder_build();&#xA;}&#xA;)_orElseGet(() -> {&#xA;  log_info(&quot;The Tan is invalid_&quot;);&#xA;  throw new VerificationServerException(HttpStatus_NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)"/>
          </namedReference__VariableUsage>
        </localVariableUsages_SetVariableAction>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_jCO6hcGeEe-iN6ojpugYyg" entityName="Stop Action" predecessor_AbstractAction="_jCO6hMGeEe-iN6ojpugYyg"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_jDKHkcGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_controller_ExternalTanController">
    <assemblyContexts__ComposedStructure id="_jDLVsMGeEe-iN6ojpugYyg" encapsulatedComponent__AssemblyContext="_jC5o6cGeEe-iN6ojpugYyg"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_jDL8wsGeEe-iN6ojpugYyg" innerProvidedRole_ProvidedDelegationConnector="_jC5o6MGeEe-iN6ojpugYyg" outerProvidedRole_ProvidedDelegationConnector="_jDKHkMGeEe-iN6ojpugYyg" assemblyContext_ProvidedDelegationConnector="_jDLVsMGeEe-iN6ojpugYyg"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_jDKHkMGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/tan[POST] Provider" providedInterface__OperationProvidedRole="_jC5o4sGeEe-iN6ojpugYyg"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_jDKHlMGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_controller_InternalTanController">
    <assemblyContexts__ComposedStructure id="_jDLVtsGeEe-iN6ojpugYyg" encapsulatedComponent__AssemblyContext="_jDEA_8GeEe-iN6ojpugYyg"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_jDL8wMGeEe-iN6ojpugYyg" innerProvidedRole_ProvidedDelegationConnector="_jDEA_cGeEe-iN6ojpugYyg" outerProvidedRole_ProvidedDelegationConnector="_jDKHk8GeEe-iN6ojpugYyg" assemblyContext_ProvidedDelegationConnector="_jDLVtsGeEe-iN6ojpugYyg"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_jDL8wcGeEe-iN6ojpugYyg" innerProvidedRole_ProvidedDelegationConnector="_jDEA_sGeEe-iN6ojpugYyg" outerProvidedRole_ProvidedDelegationConnector="_jDKHksGeEe-iN6ojpugYyg" assemblyContext_ProvidedDelegationConnector="_jDLVtsGeEe-iN6ojpugYyg"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_jDKHksGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST] Provider" providedInterface__OperationProvidedRole="_jC5o58GeEe-iN6ojpugYyg"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_jDKHk8GeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST] Provider" providedInterface__OperationProvidedRole="_jC5o48GeEe-iN6ojpugYyg"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_jDKHlsGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_controller_InternalTestStateController">
    <assemblyContexts__ComposedStructure id="_jDKuoMGeEe-iN6ojpugYyg" encapsulatedComponent__AssemblyContext="_jC9TQcGeEe-iN6ojpugYyg"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_jDL8w8GeEe-iN6ojpugYyg" innerProvidedRole_ProvidedDelegationConnector="_jC9TQMGeEe-iN6ojpugYyg" outerProvidedRole_ProvidedDelegationConnector="_jDKHlcGeEe-iN6ojpugYyg" assemblyContext_ProvidedDelegationConnector="_jDKuoMGeEe-iN6ojpugYyg"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_jDKHlcGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/testresult[POST] Provider" providedInterface__OperationProvidedRole="_jC5o5cGeEe-iN6ojpugYyg"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_jDKHmMGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_controller_ExternalTokenController">
    <assemblyContexts__ComposedStructure id="_jDLVssGeEe-iN6ojpugYyg" encapsulatedComponent__AssemblyContext="_jDCLwsGeEe-iN6ojpugYyg"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_jDL8xMGeEe-iN6ojpugYyg" innerProvidedRole_ProvidedDelegationConnector="_jDCLwcGeEe-iN6ojpugYyg" outerProvidedRole_ProvidedDelegationConnector="_jDKHl8GeEe-iN6ojpugYyg" assemblyContext_ProvidedDelegationConnector="_jDLVssGeEe-iN6ojpugYyg"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_jDKHl8GeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST] Provider" providedInterface__OperationProvidedRole="_jC5o5MGeEe-iN6ojpugYyg"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_jDKHmcGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_service_FakeRequestService">
    <assemblyContexts__ComposedStructure id="_jDLVtMGeEe-iN6ojpugYyg" encapsulatedComponent__AssemblyContext="_jDCLwMGeEe-iN6ojpugYyg"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_jDKHm8GeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_controller_ExternalTestStateController">
    <assemblyContexts__ComposedStructure id="_jDKuosGeEe-iN6ojpugYyg" encapsulatedComponent__AssemblyContext="_jC_vgcGeEe-iN6ojpugYyg"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_jDL8xcGeEe-iN6ojpugYyg" innerProvidedRole_ProvidedDelegationConnector="_jC_vgMGeEe-iN6ojpugYyg" outerProvidedRole_ProvidedDelegationConnector="_jDKHmsGeEe-iN6ojpugYyg" assemblyContext_ProvidedDelegationConnector="_jDKuosGeEe-iN6ojpugYyg"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_jDKHmsGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2 Provider" providedInterface__OperationProvidedRole="_jC5o5sGeEe-iN6ojpugYyg"/>
  </components__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_jC5o4sGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/tan[POST]">
    <signatures__OperationInterface id="_i8WU8cGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/tan[POST]" returnType__OperationSignature="_i8WU8MGeEe-iN6ojpugYyg">
      <parameters__OperationSignature dataType__Parameter="_i7gncMGeEe-iN6ojpugYyg" parameterName="registrationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="fake" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_jC5o48GeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST]">
    <signatures__OperationInterface id="_i8XjFcGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST]" returnType__OperationSignature="_i7h1kMGeEe-iN6ojpugYyg">
      <parameters__OperationSignature dataType__Parameter="_i8XjE8GeEe-iN6ojpugYyg" parameterName="authorization" modifier__Parameter="in"/>
      <parameters__OperationSignature dataType__Parameter="_i8XjFMGeEe-iN6ojpugYyg" parameterName="teleTanType" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_jC5o5MGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST]">
    <signatures__OperationInterface id="_i8W8AcGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST]" returnType__OperationSignature="_i8WU8MGeEe-iN6ojpugYyg">
      <parameters__OperationSignature dataType__Parameter="_i8W8AMGeEe-iN6ojpugYyg" parameterName="request" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="fake" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_jC5o5cGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/testresult[POST]">
    <signatures__OperationInterface id="_i7icoMGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/testresult[POST]" returnType__OperationSignature="_i7h1kMGeEe-iN6ojpugYyg">
      <parameters__OperationSignature dataType__Parameter="_i7gncMGeEe-iN6ojpugYyg" parameterName="registrationToken" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_jC5o5sGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2">
    <signatures__OperationInterface id="_i8XjEMGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2" returnType__OperationSignature="_i8WU8MGeEe-iN6ojpugYyg">
      <parameters__OperationSignature dataType__Parameter="_i7gncMGeEe-iN6ojpugYyg" parameterName="registrationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="fake" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_jC5o58GeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST]">
    <signatures__OperationInterface id="_i8Vt4cGeEe-iN6ojpugYyg" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST]" returnType__OperationSignature="_i7h1kMGeEe-iN6ojpugYyg">
      <parameters__OperationSignature dataType__Parameter="_i8Vt4MGeEe-iN6ojpugYyg" parameterName="tan" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_i7gncMGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_model_RegistrationToken"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_i7h1kMGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_controller_ResponseEntity"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_i8Vt4MGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_model_Tan"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_i8WU8MGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_controller_DeferredResult"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_i8W8AMGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_model_RegistrationTokenRequest"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_i8XjE8GeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_model_AuthorizationToken"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_i8XjFMGeEe-iN6ojpugYyg" entityName="app_coronawarn_verification_model_TeleTanType"/>
</repository:Repository>
