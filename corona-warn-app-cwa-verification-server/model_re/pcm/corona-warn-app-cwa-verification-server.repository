<?xml version="1.0" encoding="UTF-8"?>
<repository:Repository xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:composition="http://palladiosimulator.org/PalladioComponentModel/Core/Composition/5.2" xmlns:repository="http://palladiosimulator.org/PalladioComponentModel/Repository/5.2" xmlns:seff="http://palladiosimulator.org/PalladioComponentModel/SEFF/5.2" xmlns:stoex="http://sdq.ipd.uka.de/StochasticExpressions/2.2" id="_F7078uM6Ee682ro4Djd1ag">
  <components__Repository xsi:type="repository:BasicComponent" id="_F7hZ-OM6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_controller_InternalTanController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_F7hZ9uM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST] Provider" providedInterface__OperationProvidedRole="_F7hZ9eM6Ee682ro4Djd1ag"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_F7hZ9-M6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST] Provider" providedInterface__OperationProvidedRole="_F7hZ8-M6Ee682ro4Djd1ag"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_F62Eg-M6Ee682ro4Djd1ag" describedService__SEFF="_Fz-ngOM6Ee682ro4Djd1ag">
      <steps_Behaviour xsi:type="seff:StartAction" id="_F602b-M6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F61dd-M6Ee682ro4Djd1ag"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_F61dd-M6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F602b-M6Ee682ro4Djd1ag" successor_AbstractAction="_F62EgeM6Ee682ro4Djd1ag">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F602c-M6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_F61dcOM6Ee682ro4Djd1ag">
            <steps_Behaviour xsi:type="seff:StartAction" id="_F602cOM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F602ceM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_F602ceM6Ee682ro4Djd1ag" entityName="requiredRoles.add(AuthorizationRole.AUTH_C19_HOTLINE)" predecessor_AbstractAction="_F602cOM6Ee682ro4Djd1ag" successor_AbstractAction="_F602cuM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_F602cuM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F602ceM6Ee682ro4Djd1ag"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(teleTanType == null)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F61ddOM6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_F61dduM6Ee682ro4Djd1ag">
            <steps_Behaviour xsi:type="seff:StartAction" id="_F61dceM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F61dcuM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_F61dcuM6Ee682ro4Djd1ag" entityName="requiredRoles.add(AuthorizationRole.AUTH_C19_HOTLINE_EVENT)" predecessor_AbstractAction="_F61dceM6Ee682ro4Djd1ag" successor_AbstractAction="_F61dc-M6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_F61dc-M6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F61dcuM6Ee682ro4Djd1ag"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(teleTanType == TeleTanType.EVENT)"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_F62EgeM6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F61dd-M6Ee682ro4Djd1ag" successor_AbstractAction="_F62EguM6Ee682ro4Djd1ag">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F61dh-M6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_F62EgOM6Ee682ro4Djd1ag">
            <steps_Behaviour xsi:type="seff:StartAction" id="_F61deOM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F61dheM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_F61dheM6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F61deOM6Ee682ro4Djd1ag" successor_AbstractAction="_F61dhuM6Ee682ro4Djd1ag">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F61dfeM6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_F61df-M6Ee682ro4Djd1ag">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_F61deeM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F61deuM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F61deuM6Ee682ro4Djd1ag" entityName="log.info(&quot;The teleTAN is generated.&quot;)" predecessor_AbstractAction="_F61deeM6Ee682ro4Djd1ag" successor_AbstractAction="_F61de-M6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_F61de-M6Ee682ro4Djd1ag" entityName="ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))" predecessor_AbstractAction="_F61deuM6Ee682ro4Djd1ag" successor_AbstractAction="_F61dfOM6Ee682ro4Djd1ag">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_F61dfOM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F61de-M6Ee682ro4Djd1ag"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(tanService.isTeleTanRateLimitNotExceeded())"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F61dguM6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_F61dhOM6Ee682ro4Djd1ag">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_F61dgOM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F61dgeM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_F61dgeM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F61dgOM6Ee682ro4Djd1ag"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: else"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_F61dhuM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F61dheM6Ee682ro4Djd1ag"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(jwtService.isAuthorized(authorization.getToken(),requiredRoles))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_F62EguM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F62EgeM6Ee682ro4Djd1ag"/>
    </serviceEffectSpecifications__BasicComponent>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_F62EiOM6Ee682ro4Djd1ag" describedService__SEFF="_F02KMOM6Ee682ro4Djd1ag">
      <steps_Behaviour xsi:type="seff:StartAction" id="_F62EheM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F62EhuM6Ee682ro4Djd1ag"/>
      <steps_Behaviour xsi:type="seff:SetVariableAction" id="_F62EhuM6Ee682ro4Djd1ag" entityName="tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)" predecessor_AbstractAction="_F62EheM6Ee682ro4Djd1ag" successor_AbstractAction="_F62Eh-M6Ee682ro4Djd1ag">
        <localVariableUsages_SetVariableAction>
          <variableCharacterisation_VariableUsage type="VALUE">
            <specification_VariableCharacterisation specification="PrimitiveType.tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)"/>
          </variableCharacterisation_VariableUsage>
          <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
            <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)"/>
          </namedReference__VariableUsage>
        </localVariableUsages_SetVariableAction>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_F62Eh-M6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F62EhuM6Ee682ro4Djd1ag"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_F7ngluM6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_controller_ExternalTanController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_F7ngleM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/tan[POST] Provider" providedInterface__OperationProvidedRole="_F7hZ8uM6Ee682ro4Djd1ag"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_F602beM6Ee682ro4Djd1ag" describedService__SEFF="_F008EuM6Ee682ro4Djd1ag">
      <steps_Behaviour xsi:type="seff:StartAction" id="_F6zBQOM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F6zoReM6Ee682ro4Djd1ag"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_F6zoReM6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F6zBQOM6Ee682ro4Djd1ag" successor_AbstractAction="_F6zoRuM6Ee682ro4Djd1ag">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F6zoQuM6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_F6zoROM6Ee682ro4Djd1ag">
            <steps_Behaviour xsi:type="seff:StartAction" id="_F6zBQeM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F6zoQOM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_F6zoQOM6Ee682ro4Djd1ag" entityName="fakeRequestService.generateTan(registrationToken)" predecessor_AbstractAction="_F6zBQeM6Ee682ro4Djd1ag" successor_AbstractAction="_F6zoQeM6Ee682ro4Djd1ag">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestService.generateTan(registrationToken)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestService.generateTan(registrationToken)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_F6zoQeM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F6zoQOM6Ee682ro4Djd1ag"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_F6zoRuM6Ee682ro4Djd1ag" entityName="stopWatch.start()" predecessor_AbstractAction="_F6zoReM6Ee682ro4Djd1ag" successor_AbstractAction="_F602a-M6Ee682ro4Djd1ag"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_F602a-M6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F6zoRuM6Ee682ro4Djd1ag" successor_AbstractAction="_F602bOM6Ee682ro4Djd1ag">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F602aOM6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_F602auM6Ee682ro4Djd1ag">
            <steps_Behaviour xsi:type="seff:StartAction" id="_F6zoR-M6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F602ZuM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_F602ZuM6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F6zoR-M6Ee682ro4Djd1ag" successor_AbstractAction="_F602Z-M6Ee682ro4Djd1ag">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F602Y-M6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_F602ZeM6Ee682ro4Djd1ag">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_F6zoSOM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F60PWuM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_F60PWuM6Ee682ro4Djd1ag" entityName="Switch Branch" predecessor_AbstractAction="_F6zoSOM6Ee682ro4Djd1ag" successor_AbstractAction="_F60PW-M6Ee682ro4Djd1ag">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F6zoU-M6Ee682ro4Djd1ag">
                      <branchBehaviour_BranchTransition id="_F6zoVeM6Ee682ro4Djd1ag">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_F6zoSeM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F6zoUOM6Ee682ro4Djd1ag"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_F6zoUOM6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F6zoSeM6Ee682ro4Djd1ag" successor_AbstractAction="_F6zoUeM6Ee682ro4Djd1ag">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F6zoTeM6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_F6zoT-M6Ee682ro4Djd1ag">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_F6zoSuM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F6zoS-M6Ee682ro4Djd1ag"/>
                              <steps_Behaviour xsi:type="seff:InternalAction" id="_F6zoS-M6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F6zoSuM6Ee682ro4Djd1ag" successor_AbstractAction="_F6zoTOM6Ee682ro4Djd1ag"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_F6zoTOM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F6zoS-M6Ee682ro4Djd1ag"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(covidTestResult.getTestResult() != LabTestResult.POSITIVE.getTestResult() &amp;&amp; covidTestResult.getTestResult() != LabTestResult.QUICK_POSITIVE.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_F6zoUeM6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F6zoUOM6Ee682ro4Djd1ag" successor_AbstractAction="_F6zoUuM6Ee682ro4Djd1ag"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_F6zoUuM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F6zoUeM6Ee682ro4Djd1ag"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
                    </branches_Branch>
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F60PUeM6Ee682ro4Djd1ag">
                      <branchBehaviour_BranchTransition id="_F60PU-M6Ee682ro4Djd1ag">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_F6zoVuM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F6zoV-M6Ee682ro4Djd1ag"/>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_F6zoV-M6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F6zoVuM6Ee682ro4Djd1ag" successor_AbstractAction="_F60PUOM6Ee682ro4Djd1ag"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_F60PUOM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F6zoV-M6Ee682ro4Djd1ag"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
                    </branches_Branch>
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F60PV-M6Ee682ro4Djd1ag">
                      <branchBehaviour_BranchTransition id="_F60PWeM6Ee682ro4Djd1ag">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_F60PVOM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F60PVeM6Ee682ro4Djd1ag"/>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_F60PVeM6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F60PVOM6Ee682ro4Djd1ag" successor_AbstractAction="_F60PVuM6Ee682ro4Djd1ag"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_F60PVuM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F60PVeM6Ee682ro4Djd1ag"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F60PW-M6Ee682ro4Djd1ag" entityName="appSession.incrementTanCounter()" predecessor_AbstractAction="_F60PWuM6Ee682ro4Djd1ag" successor_AbstractAction="_F60PXOM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F60PXOM6Ee682ro4Djd1ag" entityName="appSession.setUpdatedAt(LocalDateTime.now())" predecessor_AbstractAction="_F60PW-M6Ee682ro4Djd1ag" successor_AbstractAction="_F60PXeM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F60PXeM6Ee682ro4Djd1ag" entityName="appSessionService.saveAppSession(appSession)" predecessor_AbstractAction="_F60PXOM6Ee682ro4Djd1ag" successor_AbstractAction="_F60PXuM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F60PXuM6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F60PXeM6Ee682ro4Djd1ag" successor_AbstractAction="_F60PX-M6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F60PX-M6Ee682ro4Djd1ag" entityName="fakeDelayService.updateFakeTanRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_F60PXuM6Ee682ro4Djd1ag" successor_AbstractAction="_F60PYOM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F60PYOM6Ee682ro4Djd1ag" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.status(HttpStatus.CREATED).body(returnTan)),fakeDelayService.realDelayTan(),MILLISECONDS)" predecessor_AbstractAction="_F60PX-M6Ee682ro4Djd1ag" successor_AbstractAction="_F602YOM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F602YOM6Ee682ro4Djd1ag" entityName="log.info(&quot;Returning the successfully generated tan.&quot;)" predecessor_AbstractAction="_F60PYOM6Ee682ro4Djd1ag" successor_AbstractAction="_F602YeM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_F602YeM6Ee682ro4Djd1ag" entityName="deferredResult" predecessor_AbstractAction="_F602YOM6Ee682ro4Djd1ag" successor_AbstractAction="_F602YuM6Ee682ro4Djd1ag">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_F602YuM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F602YeM6Ee682ro4Djd1ag"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.getTanCounter() &lt; tancountermax)"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_F602Z-M6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F602ZuM6Ee682ro4Djd1ag"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(actual.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_F602bOM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F602a-M6Ee682ro4Djd1ag"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_F7p83OM6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_controller_ExternalTestStateController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_F7p82-M6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/testresult[POST] Provider" providedInterface__OperationProvidedRole="_F7hZ8eM6Ee682ro4Djd1ag"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_F6zBPuM6Ee682ro4Djd1ag" describedService__SEFF="_F00VBeM6Ee682ro4Djd1ag">
      <steps_Behaviour xsi:type="seff:StartAction" id="_F1QZ4eM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F6v94OM6Ee682ro4Djd1ag"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_F6v94OM6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F1QZ4eM6Ee682ro4Djd1ag" successor_AbstractAction="_F6wk8OM6Ee682ro4Djd1ag">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F6uvwOM6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_F6vW0OM6Ee682ro4Djd1ag">
            <steps_Behaviour xsi:type="seff:StartAction" id="_F1S2IOM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F6uIsOM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_F6uIsOM6Ee682ro4Djd1ag" entityName="fakeRequestService.getTestState(registrationToken)" predecessor_AbstractAction="_F1S2IOM6Ee682ro4Djd1ag" successor_AbstractAction="_F6uIseM6Ee682ro4Djd1ag">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestService.getTestState(registrationToken)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestService.getTestState(registrationToken)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_F6uIseM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F6uIsOM6Ee682ro4Djd1ag"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_F6wk8OM6Ee682ro4Djd1ag" entityName="stopWatch.start()" predecessor_AbstractAction="_F6v94OM6Ee682ro4Djd1ag" successor_AbstractAction="_F6zBO-M6Ee682ro4Djd1ag"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_F6zBO-M6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F6wk8OM6Ee682ro4Djd1ag" successor_AbstractAction="_F6zBPOM6Ee682ro4Djd1ag">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F6zBOOM6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_F6zBOuM6Ee682ro4Djd1ag">
            <steps_Behaviour xsi:type="seff:StartAction" id="_F6wk8eM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F6zBNuM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_F6zBNuM6Ee682ro4Djd1ag" entityName="Switch Branch" predecessor_AbstractAction="_F6wk8eM6Ee682ro4Djd1ag" successor_AbstractAction="_F6zBN-M6Ee682ro4Djd1ag">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F6xzG-M6Ee682ro4Djd1ag">
                <branchBehaviour_BranchTransition id="_F6yaIOM6Ee682ro4Djd1ag">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_F6xMAOM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F6xMAeM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6xMAeM6Ee682ro4Djd1ag" entityName="testResult.setResponsePadding(RandomStringUtils.randomAlphanumeric(RESPONSE_PADDING_LENGTH))" predecessor_AbstractAction="_F6xMAOM6Ee682ro4Djd1ag" successor_AbstractAction="_F6xMDeM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_F6xMDeM6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F6xMAeM6Ee682ro4Djd1ag" successor_AbstractAction="_F6xMDuM6Ee682ro4Djd1ag">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F6xMCuM6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
                      <branchBehaviour_BranchTransition id="_F6xMDOM6Ee682ro4Djd1ag">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_F6xMAuM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F6xMCOM6Ee682ro4Djd1ag"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_F6xMCOM6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F6xMAuM6Ee682ro4Djd1ag" successor_AbstractAction="_F6xMCeM6Ee682ro4Djd1ag">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F6xMBeM6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_F6xMB-M6Ee682ro4Djd1ag">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_F6xMA-M6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F6xMBOM6Ee682ro4Djd1ag"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_F6xMBOM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F6xMA-M6Ee682ro4Djd1ag"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(testResultDob.getTestResult() != testResult.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_F6xMCeM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F6xMCOM6Ee682ro4Djd1ag"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(!config.isDisableDobHashCheckForExternalTestResult() &amp;&amp; appSession.get().getHashedGuidDob() != null)"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6xMDuM6Ee682ro4Djd1ag" entityName="log.debug(&quot;Result {}&quot;,testResult)" predecessor_AbstractAction="_F6xMDeM6Ee682ro4Djd1ag" successor_AbstractAction="_F6xMD-M6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6xMD-M6Ee682ro4Djd1ag" entityName="log.info(&quot;The result for registration token based on hashed Guid will be returned.&quot;)" predecessor_AbstractAction="_F6xMDuM6Ee682ro4Djd1ag" successor_AbstractAction="_F6xzEOM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6xzEOM6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F6xMD-M6Ee682ro4Djd1ag" successor_AbstractAction="_F6xzEeM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6xzEeM6Ee682ro4Djd1ag" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_F6xzEOM6Ee682ro4Djd1ag" successor_AbstractAction="_F6xzEuM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6xzEuM6Ee682ro4Djd1ag" entityName="deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId())))" predecessor_AbstractAction="_F6xzEeM6Ee682ro4Djd1ag" successor_AbstractAction="_F6xzE-M6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_F6xzE-M6Ee682ro4Djd1ag" entityName="deferredResult" predecessor_AbstractAction="_F6xzEuM6Ee682ro4Djd1ag" successor_AbstractAction="_F6xzFOM6Ee682ro4Djd1ag">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6xzFOM6Ee682ro4Djd1ag" entityName="log.info(&quot;The result for registration token based on teleTAN will be returned.&quot;)" predecessor_AbstractAction="_F6xzE-M6Ee682ro4Djd1ag" successor_AbstractAction="_F6xzFeM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6xzFeM6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F6xzFOM6Ee682ro4Djd1ag" successor_AbstractAction="_F6xzFuM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6xzFuM6Ee682ro4Djd1ag" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_F6xzFeM6Ee682ro4Djd1ag" successor_AbstractAction="_F6xzF-M6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6xzF-M6Ee682ro4Djd1ag" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(LabTestResult.POSITIVE.getTestResult(),appSession.get().getCreatedAt().toEpochSecond(ZoneOffset.UTC),null))),fakeDelayService.realDelayTest(),MILLISECONDS)" predecessor_AbstractAction="_F6xzFuM6Ee682ro4Djd1ag" successor_AbstractAction="_F6xzGOM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_F6xzGOM6Ee682ro4Djd1ag" entityName="deferredResult" predecessor_AbstractAction="_F6xzF-M6Ee682ro4Djd1ag" successor_AbstractAction="_F6xzGeM6Ee682ro4Djd1ag">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6xzGeM6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F6xzGOM6Ee682ro4Djd1ag" successor_AbstractAction="_F6xzGuM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_F6xzGuM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F6xzGeM6Ee682ro4Djd1ag"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F6yaKeM6Ee682ro4Djd1ag">
                <branchBehaviour_BranchTransition id="_F6yaK-M6Ee682ro4Djd1ag">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_F6yaIeM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F6yaIuM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6yaIuM6Ee682ro4Djd1ag" entityName="log.info(&quot;The result for registration token based on teleTAN will be returned.&quot;)" predecessor_AbstractAction="_F6yaIeM6Ee682ro4Djd1ag" successor_AbstractAction="_F6yaI-M6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6yaI-M6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F6yaIuM6Ee682ro4Djd1ag" successor_AbstractAction="_F6yaJOM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6yaJOM6Ee682ro4Djd1ag" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_F6yaI-M6Ee682ro4Djd1ag" successor_AbstractAction="_F6yaJeM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6yaJeM6Ee682ro4Djd1ag" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(LabTestResult.POSITIVE.getTestResult(),appSession.get().getCreatedAt().toEpochSecond(ZoneOffset.UTC),null))),fakeDelayService.realDelayTest(),MILLISECONDS)" predecessor_AbstractAction="_F6yaJOM6Ee682ro4Djd1ag" successor_AbstractAction="_F6yaJuM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_F6yaJuM6Ee682ro4Djd1ag" entityName="deferredResult" predecessor_AbstractAction="_F6yaJeM6Ee682ro4Djd1ag" successor_AbstractAction="_F6yaJ-M6Ee682ro4Djd1ag">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6yaJ-M6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F6yaJuM6Ee682ro4Djd1ag" successor_AbstractAction="_F6yaKOM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_F6yaKOM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F6yaJ-M6Ee682ro4Djd1ag"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F6zBM-M6Ee682ro4Djd1ag">
                <branchBehaviour_BranchTransition id="_F6zBNeM6Ee682ro4Djd1ag">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_F6zBMOM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F6zBMeM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F6zBMeM6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F6zBMOM6Ee682ro4Djd1ag" successor_AbstractAction="_F6zBMuM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_F6zBMuM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F6zBMeM6Ee682ro4Djd1ag"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_F6zBN-M6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F6zBNuM6Ee682ro4Djd1ag"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_F6zBPOM6Ee682ro4Djd1ag" entityName="log.info(&quot;The registration token doesn't exist.&quot;)" predecessor_AbstractAction="_F6zBO-M6Ee682ro4Djd1ag" successor_AbstractAction="_F6zBPeM6Ee682ro4Djd1ag"/>
      <steps_Behaviour xsi:type="seff:StopAction" id="_F6zBPeM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F6zBPOM6Ee682ro4Djd1ag"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_F7sZGuM6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_service_FakeRequestService"/>
  <components__Repository xsi:type="repository:BasicComponent" id="_F7sZHOM6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_controller_InternalTestStateController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_F7sZG-M6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2 Provider" providedInterface__OperationProvidedRole="_F7hZ8OM6Ee682ro4Djd1ag"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_F65u6OM6Ee682ro4Djd1ag" describedService__SEFF="_F01jIOM6Ee682ro4Djd1ag">
      <steps_Behaviour xsi:type="seff:StartAction" id="_F64gyOM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F65u5eM6Ee682ro4Djd1ag"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_F65u5eM6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F64gyOM6Ee682ro4Djd1ag" successor_AbstractAction="_F65u5uM6Ee682ro4Djd1ag">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F65u4uM6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_F65u5OM6Ee682ro4Djd1ag">
            <steps_Behaviour xsi:type="seff:StartAction" id="_F64gyeM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F65u4OM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_F65u4OM6Ee682ro4Djd1ag" entityName="Switch Branch" predecessor_AbstractAction="_F64gyeM6Ee682ro4Djd1ag" successor_AbstractAction="_F65u4eM6Ee682ro4Djd1ag">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F65H0-M6Ee682ro4Djd1ag">
                <branchBehaviour_BranchTransition id="_F65H1eM6Ee682ro4Djd1ag">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_F64gyuM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F64g1uM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_F64g1uM6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F64gyuM6Ee682ro4Djd1ag" successor_AbstractAction="_F64g1-M6Ee682ro4Djd1ag">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F64g0-M6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
                      <branchBehaviour_BranchTransition id="_F64g1eM6Ee682ro4Djd1ag">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_F64gy-M6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F64g0eM6Ee682ro4Djd1ag"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_F64g0eM6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F64gy-M6Ee682ro4Djd1ag" successor_AbstractAction="_F64g0uM6Ee682ro4Djd1ag">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F64gzuM6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_F64g0OM6Ee682ro4Djd1ag">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_F64gzOM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F64gzeM6Ee682ro4Djd1ag"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_F64gzeM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F64gzOM6Ee682ro4Djd1ag"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(testResultDob.getTestResult() != testResult.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_F64g0uM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F64g0eM6Ee682ro4Djd1ag"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.get().getHashedGuidDob() != null)"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F64g1-M6Ee682ro4Djd1ag" entityName="log.debug(&quot;Result {}&quot;,testResult)" predecessor_AbstractAction="_F64g1uM6Ee682ro4Djd1ag" successor_AbstractAction="_F64g2OM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F64g2OM6Ee682ro4Djd1ag" entityName="log.info(&quot;The result for registration token based on hashed Guid will be returned.&quot;)" predecessor_AbstractAction="_F64g1-M6Ee682ro4Djd1ag" successor_AbstractAction="_F65H0OM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_F65H0OM6Ee682ro4Djd1ag" entityName="ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))" predecessor_AbstractAction="_F64g2OM6Ee682ro4Djd1ag" successor_AbstractAction="_F65H0eM6Ee682ro4Djd1ag">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F65H0eM6Ee682ro4Djd1ag" entityName="log.info(&quot;Internal TestState is not allowed for TeleTan Token.&quot;)" predecessor_AbstractAction="_F65H0OM6Ee682ro4Djd1ag" successor_AbstractAction="_F65H0uM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_F65H0uM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F65H0eM6Ee682ro4Djd1ag"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F65H2eM6Ee682ro4Djd1ag">
                <branchBehaviour_BranchTransition id="_F65H2-M6Ee682ro4Djd1ag">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_F65H1uM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F65H1-M6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F65H1-M6Ee682ro4Djd1ag" entityName="log.info(&quot;Internal TestState is not allowed for TeleTan Token.&quot;)" predecessor_AbstractAction="_F65H1uM6Ee682ro4Djd1ag" successor_AbstractAction="_F65H2OM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_F65H2OM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F65H1-M6Ee682ro4Djd1ag"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F65H3uM6Ee682ro4Djd1ag">
                <branchBehaviour_BranchTransition id="_F65H4OM6Ee682ro4Djd1ag">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_F65H3OM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F65H3eM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_F65H3eM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F65H3OM6Ee682ro4Djd1ag"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_F65u4eM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F65u4OM6Ee682ro4Djd1ag"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_F65u5uM6Ee682ro4Djd1ag" entityName="log.info(&quot;The registration token doesn't exist.&quot;)" predecessor_AbstractAction="_F65u5eM6Ee682ro4Djd1ag" successor_AbstractAction="_F65u5-M6Ee682ro4Djd1ag"/>
      <steps_Behaviour xsi:type="seff:StopAction" id="_F65u5-M6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F65u5uM6Ee682ro4Djd1ag"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_F7u1XOM6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_controller_ExternalTokenController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_F7u1W-M6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST] Provider" providedInterface__OperationProvidedRole="_F7hZ9OM6Ee682ro4Djd1ag"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_F64gxuM6Ee682ro4Djd1ag" describedService__SEFF="_F00VAeM6Ee682ro4Djd1ag">
      <steps_Behaviour xsi:type="seff:StartAction" id="_F62EiuM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F62rkuM6Ee682ro4Djd1ag"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_F62rkuM6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F62EiuM6Ee682ro4Djd1ag" successor_AbstractAction="_F62rk-M6Ee682ro4Djd1ag">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F62EjuM6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_F62rkeM6Ee682ro4Djd1ag">
            <steps_Behaviour xsi:type="seff:StartAction" id="_F62Ei-M6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F62EjOM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_F62EjOM6Ee682ro4Djd1ag" entityName="fakeRequestController.generateRegistrationToken(request)" predecessor_AbstractAction="_F62Ei-M6Ee682ro4Djd1ag" successor_AbstractAction="_F62EjeM6Ee682ro4Djd1ag">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestController.generateRegistrationToken(request)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestController.generateRegistrationToken(request)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_F62EjeM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F62EjOM6Ee682ro4Djd1ag"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_F62rk-M6Ee682ro4Djd1ag" entityName="stopWatch.start()" predecessor_AbstractAction="_F62rkuM6Ee682ro4Djd1ag" successor_AbstractAction="_F64gxOM6Ee682ro4Djd1ag"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_F64gxOM6Ee682ro4Djd1ag" entityName="Switch Branch" predecessor_AbstractAction="_F62rk-M6Ee682ro4Djd1ag" successor_AbstractAction="_F64gxeM6Ee682ro4Djd1ag">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F63SqeM6Ee682ro4Djd1ag">
          <branchBehaviour_BranchTransition id="_F63Sq-M6Ee682ro4Djd1ag">
            <steps_Behaviour xsi:type="seff:StartAction" id="_F62rlOM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F62rleM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_F62rleM6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F62rlOM6Ee682ro4Djd1ag" successor_AbstractAction="_F62rluM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_F62rluM6Ee682ro4Djd1ag" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_F62rleM6Ee682ro4Djd1ag" successor_AbstractAction="_F62rl-M6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_F62rl-M6Ee682ro4Djd1ag" entityName="deferredResult.setResult(responseEntity)" predecessor_AbstractAction="_F62rluM6Ee682ro4Djd1ag" successor_AbstractAction="_F62rmOM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_F62rmOM6Ee682ro4Djd1ag" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_F62rl-M6Ee682ro4Djd1ag" successor_AbstractAction="_F62rmeM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_F62rmeM6Ee682ro4Djd1ag" entityName="deferredResult" predecessor_AbstractAction="_F62rmOM6Ee682ro4Djd1ag" successor_AbstractAction="_F63SpeM6Ee682ro4Djd1ag">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_F63SpeM6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F62rmeM6Ee682ro4Djd1ag" successor_AbstractAction="_F63SpuM6Ee682ro4Djd1ag">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F63SouM6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_F63SpOM6Ee682ro4Djd1ag">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_F62rmuM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F62rm-M6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F62rm-M6Ee682ro4Djd1ag" entityName="teleTan.setRedeemed(true)" predecessor_AbstractAction="_F62rmuM6Ee682ro4Djd1ag" successor_AbstractAction="_F62rnOM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F62rnOM6Ee682ro4Djd1ag" entityName="tanService.saveTan(teleTan)" predecessor_AbstractAction="_F62rm-M6Ee682ro4Djd1ag" successor_AbstractAction="_F62rneM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F62rneM6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F62rnOM6Ee682ro4Djd1ag" successor_AbstractAction="_F62rnuM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F62rnuM6Ee682ro4Djd1ag" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_F62rneM6Ee682ro4Djd1ag" successor_AbstractAction="_F62rn-M6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F62rn-M6Ee682ro4Djd1ag" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(response),fakeDelayService.realDelayToken(),MILLISECONDS)" predecessor_AbstractAction="_F62rnuM6Ee682ro4Djd1ag" successor_AbstractAction="_F62roOM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F62roOM6Ee682ro4Djd1ag" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_F62rn-M6Ee682ro4Djd1ag" successor_AbstractAction="_F63SoOM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_F63SoOM6Ee682ro4Djd1ag" entityName="deferredResult" predecessor_AbstractAction="_F62roOM6Ee682ro4Djd1ag" successor_AbstractAction="_F63SoeM6Ee682ro4Djd1ag">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_F63SoeM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F63SoOM6Ee682ro4Djd1ag"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(optional.isPresent())"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_F63SpuM6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F63SpeM6Ee682ro4Djd1ag" successor_AbstractAction="_F63Sp-M6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_F63Sp-M6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F63SpuM6Ee682ro4Djd1ag" successor_AbstractAction="_F63SqOM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_F63SqOM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F63Sp-M6Ee682ro4Djd1ag"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(GUID)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F635vuM6Ee682ro4Djd1ag">
          <branchBehaviour_BranchTransition id="_F635wOM6Ee682ro4Djd1ag">
            <steps_Behaviour xsi:type="seff:StartAction" id="_F63SrOM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F635uuM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_F635uuM6Ee682ro4Djd1ag" entityName="If Branch" predecessor_AbstractAction="_F63SrOM6Ee682ro4Djd1ag" successor_AbstractAction="_F635u-M6Ee682ro4Djd1ag">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F635t-M6Ee682ro4Djd1ag" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_F635ueM6Ee682ro4Djd1ag">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_F63SreM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F63SruM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F63SruM6Ee682ro4Djd1ag" entityName="teleTan.setRedeemed(true)" predecessor_AbstractAction="_F63SreM6Ee682ro4Djd1ag" successor_AbstractAction="_F635sOM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F635sOM6Ee682ro4Djd1ag" entityName="tanService.saveTan(teleTan)" predecessor_AbstractAction="_F63SruM6Ee682ro4Djd1ag" successor_AbstractAction="_F635seM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F635seM6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F635sOM6Ee682ro4Djd1ag" successor_AbstractAction="_F635suM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F635suM6Ee682ro4Djd1ag" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_F635seM6Ee682ro4Djd1ag" successor_AbstractAction="_F635s-M6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F635s-M6Ee682ro4Djd1ag" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(response),fakeDelayService.realDelayToken(),MILLISECONDS)" predecessor_AbstractAction="_F635suM6Ee682ro4Djd1ag" successor_AbstractAction="_F635tOM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_F635tOM6Ee682ro4Djd1ag" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_F635s-M6Ee682ro4Djd1ag" successor_AbstractAction="_F635teM6Ee682ro4Djd1ag"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_F635teM6Ee682ro4Djd1ag" entityName="deferredResult" predecessor_AbstractAction="_F635tOM6Ee682ro4Djd1ag" successor_AbstractAction="_F635tuM6Ee682ro4Djd1ag">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_F635tuM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F635teM6Ee682ro4Djd1ag"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(optional.isPresent())"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_F635u-M6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F635uuM6Ee682ro4Djd1ag" successor_AbstractAction="_F635vOM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_F635vOM6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F635u-M6Ee682ro4Djd1ag" successor_AbstractAction="_F635veM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_F635veM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F635vOM6Ee682ro4Djd1ag"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_F64gweM6Ee682ro4Djd1ag">
          <branchBehaviour_BranchTransition id="_F64gw-M6Ee682ro4Djd1ag">
            <steps_Behaviour xsi:type="seff:StartAction" id="_F635weM6Ee682ro4Djd1ag" entityName="Start Action" successor_AbstractAction="_F635wuM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_F635wuM6Ee682ro4Djd1ag" entityName="stopWatch.stop()" predecessor_AbstractAction="_F635weM6Ee682ro4Djd1ag" successor_AbstractAction="_F64gwOM6Ee682ro4Djd1ag"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_F64gwOM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F635wuM6Ee682ro4Djd1ag"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_F64gxeM6Ee682ro4Djd1ag" entityName="Stop Action" predecessor_AbstractAction="_F64gxOM6Ee682ro4Djd1ag"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_F7zt0OM6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_service_FakeRequestService">
    <assemblyContexts__ComposedStructure id="_F70U5OM6Ee682ro4Djd1ag" encapsulatedComponent__AssemblyContext="_F7sZGuM6Ee682ro4Djd1ag"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_F7zt0-M6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_controller_InternalTanController">
    <assemblyContexts__ComposedStructure id="_F70U4uM6Ee682ro4Djd1ag" encapsulatedComponent__AssemblyContext="_F7hZ-OM6Ee682ro4Djd1ag"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_F71jAeM6Ee682ro4Djd1ag" innerProvidedRole_ProvidedDelegationConnector="_F7hZ9uM6Ee682ro4Djd1ag" outerProvidedRole_ProvidedDelegationConnector="_F7zt0uM6Ee682ro4Djd1ag" assemblyContext_ProvidedDelegationConnector="_F70U4uM6Ee682ro4Djd1ag"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_F71jBOM6Ee682ro4Djd1ag" innerProvidedRole_ProvidedDelegationConnector="_F7hZ9-M6Ee682ro4Djd1ag" outerProvidedRole_ProvidedDelegationConnector="_F7zt0eM6Ee682ro4Djd1ag" assemblyContext_ProvidedDelegationConnector="_F70U4uM6Ee682ro4Djd1ag"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_F7zt0eM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST] Provider" providedInterface__OperationProvidedRole="_F7hZ8-M6Ee682ro4Djd1ag"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_F7zt0uM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST] Provider" providedInterface__OperationProvidedRole="_F7hZ9eM6Ee682ro4Djd1ag"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_F7zt1eM6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_controller_ExternalTokenController">
    <assemblyContexts__ComposedStructure id="_F7078OM6Ee682ro4Djd1ag" encapsulatedComponent__AssemblyContext="_F7u1XOM6Ee682ro4Djd1ag"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_F71jAOM6Ee682ro4Djd1ag" innerProvidedRole_ProvidedDelegationConnector="_F7u1W-M6Ee682ro4Djd1ag" outerProvidedRole_ProvidedDelegationConnector="_F7zt1OM6Ee682ro4Djd1ag" assemblyContext_ProvidedDelegationConnector="_F7078OM6Ee682ro4Djd1ag"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_F7zt1OM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST] Provider" providedInterface__OperationProvidedRole="_F7hZ9OM6Ee682ro4Djd1ag"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_F7zt1-M6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_controller_ExternalTanController">
    <assemblyContexts__ComposedStructure id="_F70U6OM6Ee682ro4Djd1ag" encapsulatedComponent__AssemblyContext="_F7ngluM6Ee682ro4Djd1ag"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_F71jA-M6Ee682ro4Djd1ag" innerProvidedRole_ProvidedDelegationConnector="_F7ngleM6Ee682ro4Djd1ag" outerProvidedRole_ProvidedDelegationConnector="_F7zt1uM6Ee682ro4Djd1ag" assemblyContext_ProvidedDelegationConnector="_F70U6OM6Ee682ro4Djd1ag"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_F7zt1uM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/tan[POST] Provider" providedInterface__OperationProvidedRole="_F7hZ8uM6Ee682ro4Djd1ag"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_F7zt2eM6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_controller_ExternalTestStateController">
    <assemblyContexts__ComposedStructure id="_F70U5uM6Ee682ro4Djd1ag" encapsulatedComponent__AssemblyContext="_F7p83OM6Ee682ro4Djd1ag"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_F71jBeM6Ee682ro4Djd1ag" innerProvidedRole_ProvidedDelegationConnector="_F7p82-M6Ee682ro4Djd1ag" outerProvidedRole_ProvidedDelegationConnector="_F7zt2OM6Ee682ro4Djd1ag" assemblyContext_ProvidedDelegationConnector="_F70U5uM6Ee682ro4Djd1ag"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_F7zt2OM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/testresult[POST] Provider" providedInterface__OperationProvidedRole="_F7hZ8eM6Ee682ro4Djd1ag"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_F7zt2-M6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_controller_InternalTestStateController">
    <assemblyContexts__ComposedStructure id="_F70U4OM6Ee682ro4Djd1ag" encapsulatedComponent__AssemblyContext="_F7sZHOM6Ee682ro4Djd1ag"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_F71jAuM6Ee682ro4Djd1ag" innerProvidedRole_ProvidedDelegationConnector="_F7sZG-M6Ee682ro4Djd1ag" outerProvidedRole_ProvidedDelegationConnector="_F7zt2uM6Ee682ro4Djd1ag" assemblyContext_ProvidedDelegationConnector="_F70U4OM6Ee682ro4Djd1ag"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_F7zt2uM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2 Provider" providedInterface__OperationProvidedRole="_F7hZ8OM6Ee682ro4Djd1ag"/>
  </components__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_F7hZ8OM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2">
    <signatures__OperationInterface id="_F01jIOM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2" returnType__OperationSignature="_Fz-AceM6Ee682ro4Djd1ag">
      <parameters__OperationSignature dataType__Parameter="_F00VBOM6Ee682ro4Djd1ag" parameterName="RegistrationToken" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_F7hZ8eM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/testresult[POST]">
    <signatures__OperationInterface id="_F00VBeM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/testresult[POST]" returnType__OperationSignature="_F00VAOM6Ee682ro4Djd1ag">
      <parameters__OperationSignature dataType__Parameter="_F00VBOM6Ee682ro4Djd1ag" parameterName="RegistrationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="String" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_F7hZ8uM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/tan[POST]">
    <signatures__OperationInterface id="_F008EuM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/tan[POST]" returnType__OperationSignature="_F00VAOM6Ee682ro4Djd1ag">
      <parameters__OperationSignature dataType__Parameter="_F00VBOM6Ee682ro4Djd1ag" parameterName="RegistrationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="String" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_F7hZ8-M6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST]">
    <signatures__OperationInterface id="_F02KMOM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST]" returnType__OperationSignature="_Fz-AceM6Ee682ro4Djd1ag">
      <parameters__OperationSignature dataType__Parameter="_F01jI-M6Ee682ro4Djd1ag" parameterName="Tan" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_F7hZ9OM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST]">
    <signatures__OperationInterface id="_F00VAeM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST]" returnType__OperationSignature="_F00VAOM6Ee682ro4Djd1ag">
      <parameters__OperationSignature dataType__Parameter="_F0zt8OM6Ee682ro4Djd1ag" parameterName="RegistrationTokenRequest" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="String" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_F7hZ9eM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST]">
    <signatures__OperationInterface id="_Fz-ngOM6Ee682ro4Djd1ag" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST]" returnType__OperationSignature="_Fz-AceM6Ee682ro4Djd1ag">
      <parameters__OperationSignature dataType__Parameter="_Fz8yUOM6Ee682ro4Djd1ag" parameterName="AuthorizationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature dataType__Parameter="_Fz-AcOM6Ee682ro4Djd1ag" parameterName="TeleTanType" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_Fz8yUOM6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_model_AuthorizationToken"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_Fz-AcOM6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_model_TeleTanType"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_Fz-AceM6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_controller_ResponseEntity"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_F0zt8OM6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_model_RegistrationTokenRequest"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_F00VAOM6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_controller_DeferredResult"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_F00VBOM6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_model_RegistrationToken"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_F01jI-M6Ee682ro4Djd1ag" entityName="app_coronawarn_verification_model_Tan"/>
</repository:Repository>
