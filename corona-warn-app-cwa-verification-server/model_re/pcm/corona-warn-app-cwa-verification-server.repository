<?xml version="1.0" encoding="UTF-8"?>
<repository:Repository xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:composition="http://palladiosimulator.org/PalladioComponentModel/Core/Composition/5.2" xmlns:repository="http://palladiosimulator.org/PalladioComponentModel/Repository/5.2" xmlns:seff="http://palladiosimulator.org/PalladioComponentModel/SEFF/5.2" xmlns:stoex="http://sdq.ipd.uka.de/StochasticExpressions/2.2" id="_qoxwCAdgEe-T7LKP4928Rw">
  <components__Repository xsi:type="repository:BasicComponent" id="_qogDNgdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_controller_ExternalTokenController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_qogDNQdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST] Provider" providedInterface__OperationProvidedRole="_qogDMgdgEe-T7LKP4928Rw"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_qnkPHgdgEe-T7LKP4928Rw" describedService__SEFF="_qhPkoAdgEe-T7LKP4928Rw">
      <steps_Behaviour xsi:type="seff:StartAction" id="_qib3cQdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnhLwAdgEe-T7LKP4928Rw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_qnhLwAdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qib3cQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnhy0AdgEe-T7LKP4928Rw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnf9oAdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_qngksAdgEe-T7LKP4928Rw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_qidsoAdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnfWkAdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_qnfWkAdgEe-T7LKP4928Rw" entityName="fakeRequestController.generateRegistrationToken(request)" predecessor_AbstractAction="_qidsoAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnfWkQdgEe-T7LKP4928Rw">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestController.generateRegistrationToken(request)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestController.generateRegistrationToken(request)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_qnfWkQdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnfWkAdgEe-T7LKP4928Rw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_qnhy0AdgEe-T7LKP4928Rw" entityName="stopWatch.start()" predecessor_AbstractAction="_qnhLwAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnkPHAdgEe-T7LKP4928Rw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_qnkPHAdgEe-T7LKP4928Rw" entityName="Switch Branch" predecessor_AbstractAction="_qnhy0AdgEe-T7LKP4928Rw" successor_AbstractAction="_qnkPHQdgEe-T7LKP4928Rw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnjA-wdgEe-T7LKP4928Rw">
          <branchBehaviour_BranchTransition id="_qnjA_QdgEe-T7LKP4928Rw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_qniZ4AdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qniZ4QdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_qniZ4QdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qniZ4AdgEe-T7LKP4928Rw" successor_AbstractAction="_qniZ4gdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_qniZ4gdgEe-T7LKP4928Rw" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_qniZ4QdgEe-T7LKP4928Rw" successor_AbstractAction="_qniZ4wdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_qniZ4wdgEe-T7LKP4928Rw" entityName="deferredResult.setResult(responseEntity)" predecessor_AbstractAction="_qniZ4gdgEe-T7LKP4928Rw" successor_AbstractAction="_qniZ5AdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_qniZ5AdgEe-T7LKP4928Rw" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_qniZ4wdgEe-T7LKP4928Rw" successor_AbstractAction="_qniZ5QdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_qniZ5QdgEe-T7LKP4928Rw" entityName="deferredResult" predecessor_AbstractAction="_qniZ5AdgEe-T7LKP4928Rw" successor_AbstractAction="_qnjA9wdgEe-T7LKP4928Rw">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_qnjA9wdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qniZ5QdgEe-T7LKP4928Rw" successor_AbstractAction="_qnjA-AdgEe-T7LKP4928Rw">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnjA9AdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_qnjA9gdgEe-T7LKP4928Rw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_qniZ5gdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qniZ5wdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qniZ5wdgEe-T7LKP4928Rw" entityName="teleTan.setRedeemed(true)" predecessor_AbstractAction="_qniZ5gdgEe-T7LKP4928Rw" successor_AbstractAction="_qniZ6AdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qniZ6AdgEe-T7LKP4928Rw" entityName="tanService.saveTan(teleTan)" predecessor_AbstractAction="_qniZ5wdgEe-T7LKP4928Rw" successor_AbstractAction="_qniZ6QdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qniZ6QdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qniZ6AdgEe-T7LKP4928Rw" successor_AbstractAction="_qniZ6gdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qniZ6gdgEe-T7LKP4928Rw" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_qniZ6QdgEe-T7LKP4928Rw" successor_AbstractAction="_qnjA8AdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnjA8AdgEe-T7LKP4928Rw" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(response),fakeDelayService.realDelayToken(),MILLISECONDS)" predecessor_AbstractAction="_qniZ6gdgEe-T7LKP4928Rw" successor_AbstractAction="_qnjA8QdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnjA8QdgEe-T7LKP4928Rw" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_qnjA8AdgEe-T7LKP4928Rw" successor_AbstractAction="_qnjA8gdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_qnjA8gdgEe-T7LKP4928Rw" entityName="deferredResult" predecessor_AbstractAction="_qnjA8QdgEe-T7LKP4928Rw" successor_AbstractAction="_qnjA8wdgEe-T7LKP4928Rw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_qnjA8wdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnjA8gdgEe-T7LKP4928Rw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(optional.isPresent())"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_qnjA-AdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnjA9wdgEe-T7LKP4928Rw" successor_AbstractAction="_qnjA-QdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_qnjA-QdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnjA-AdgEe-T7LKP4928Rw" successor_AbstractAction="_qnjA-gdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_qnjA-gdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnjA-QdgEe-T7LKP4928Rw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(GUID)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnkPEwdgEe-T7LKP4928Rw">
          <branchBehaviour_BranchTransition id="_qnkPFQdgEe-T7LKP4928Rw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_qnjoAAdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnjoDQdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_qnjoDQdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qnjoAAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnkPEAdgEe-T7LKP4928Rw">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnjoCgdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_qnjoDAdgEe-T7LKP4928Rw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_qnjoAQdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnjoAgdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnjoAgdgEe-T7LKP4928Rw" entityName="teleTan.setRedeemed(true)" predecessor_AbstractAction="_qnjoAQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnjoAwdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnjoAwdgEe-T7LKP4928Rw" entityName="tanService.saveTan(teleTan)" predecessor_AbstractAction="_qnjoAgdgEe-T7LKP4928Rw" successor_AbstractAction="_qnjoBAdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnjoBAdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnjoAwdgEe-T7LKP4928Rw" successor_AbstractAction="_qnjoBQdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnjoBQdgEe-T7LKP4928Rw" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_qnjoBAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnjoBgdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnjoBgdgEe-T7LKP4928Rw" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(response),fakeDelayService.realDelayToken(),MILLISECONDS)" predecessor_AbstractAction="_qnjoBQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnjoBwdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnjoBwdgEe-T7LKP4928Rw" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_qnjoBgdgEe-T7LKP4928Rw" successor_AbstractAction="_qnjoCAdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_qnjoCAdgEe-T7LKP4928Rw" entityName="deferredResult" predecessor_AbstractAction="_qnjoBwdgEe-T7LKP4928Rw" successor_AbstractAction="_qnjoCQdgEe-T7LKP4928Rw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_qnjoCQdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnjoCAdgEe-T7LKP4928Rw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(optional.isPresent())"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_qnkPEAdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnjoDQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnkPEQdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_qnkPEQdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnkPEAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnkPEgdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_qnkPEgdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnkPEQdgEe-T7LKP4928Rw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnkPGQdgEe-T7LKP4928Rw">
          <branchBehaviour_BranchTransition id="_qnkPGwdgEe-T7LKP4928Rw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_qnkPFgdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnkPFwdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_qnkPFwdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnkPFgdgEe-T7LKP4928Rw" successor_AbstractAction="_qnkPGAdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_qnkPGAdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnkPFwdgEe-T7LKP4928Rw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_qnkPHQdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnkPHAdgEe-T7LKP4928Rw"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_qojtkQdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_controller_ExternalTanController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_qojtkAdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/tan[POST] Provider" providedInterface__OperationProvidedRole="_qofcKgdgEe-T7LKP4928Rw"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_qnsK5wdgEe-T7LKP4928Rw" describedService__SEFF="_qiCO0AdgEe-T7LKP4928Rw">
      <steps_Behaviour xsi:type="seff:StartAction" id="_qnmrYAdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnnSYQdgEe-T7LKP4928Rw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_qnnSYQdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qnmrYAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnqVsAdgEe-T7LKP4928Rw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnmrZAdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_qnnSYAdgEe-T7LKP4928Rw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_qnmrYQdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnmrYgdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_qnmrYgdgEe-T7LKP4928Rw" entityName="fakeRequestService.generateTan(registrationToken)" predecessor_AbstractAction="_qnmrYQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnmrYwdgEe-T7LKP4928Rw">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestService.generateTan(registrationToken)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestService.generateTan(registrationToken)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_qnmrYwdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnmrYgdgEe-T7LKP4928Rw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_qnqVsAdgEe-T7LKP4928Rw" entityName="stopWatch.start()" predecessor_AbstractAction="_qnnSYQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnsK5QdgEe-T7LKP4928Rw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_qnsK5QdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qnqVsAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnsK5gdgEe-T7LKP4928Rw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnsK4gdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_qnsK5AdgEe-T7LKP4928Rw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_qnqVsQdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnsK4AdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_qnsK4AdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qnqVsQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnsK4QdgEe-T7LKP4928Rw">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnrj3wdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_qnrj4QdgEe-T7LKP4928Rw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_qnqVsgdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnrj1QdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_qnrj1QdgEe-T7LKP4928Rw" entityName="Switch Branch" predecessor_AbstractAction="_qnqVsgdgEe-T7LKP4928Rw" successor_AbstractAction="_qnrj1gdgEe-T7LKP4928Rw">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnq8yQdgEe-T7LKP4928Rw">
                      <branchBehaviour_BranchTransition id="_qnq8ywdgEe-T7LKP4928Rw">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_qnqVswdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnq8xgdgEe-T7LKP4928Rw"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_qnq8xgdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qnqVswdgEe-T7LKP4928Rw" successor_AbstractAction="_qnq8xwdgEe-T7LKP4928Rw">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnq8wwdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_qnq8xQdgEe-T7LKP4928Rw">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_qnq8wAdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnq8wQdgEe-T7LKP4928Rw"/>
                              <steps_Behaviour xsi:type="seff:InternalAction" id="_qnq8wQdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnq8wAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnq8wgdgEe-T7LKP4928Rw"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_qnq8wgdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnq8wQdgEe-T7LKP4928Rw"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(covidTestResult.getTestResult() != LabTestResult.POSITIVE.getTestResult() &amp;&amp; covidTestResult.getTestResult() != LabTestResult.QUICK_POSITIVE.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_qnq8xwdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnq8xgdgEe-T7LKP4928Rw" successor_AbstractAction="_qnq8yAdgEe-T7LKP4928Rw"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_qnq8yAdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnq8xwdgEe-T7LKP4928Rw"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
                    </branches_Branch>
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnq8zwdgEe-T7LKP4928Rw">
                      <branchBehaviour_BranchTransition id="_qnq80QdgEe-T7LKP4928Rw">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_qnq8zAdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnq8zQdgEe-T7LKP4928Rw"/>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_qnq8zQdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnq8zAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnq8zgdgEe-T7LKP4928Rw"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_qnq8zgdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnq8zQdgEe-T7LKP4928Rw"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
                    </branches_Branch>
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnrj0gdgEe-T7LKP4928Rw">
                      <branchBehaviour_BranchTransition id="_qnrj1AdgEe-T7LKP4928Rw">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_qnq80gdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnrj0AdgEe-T7LKP4928Rw"/>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_qnrj0AdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnq80gdgEe-T7LKP4928Rw" successor_AbstractAction="_qnrj0QdgEe-T7LKP4928Rw"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_qnrj0QdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnrj0AdgEe-T7LKP4928Rw"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnrj1gdgEe-T7LKP4928Rw" entityName="appSession.incrementTanCounter()" predecessor_AbstractAction="_qnrj1QdgEe-T7LKP4928Rw" successor_AbstractAction="_qnrj1wdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnrj1wdgEe-T7LKP4928Rw" entityName="appSession.setUpdatedAt(LocalDateTime.now())" predecessor_AbstractAction="_qnrj1gdgEe-T7LKP4928Rw" successor_AbstractAction="_qnrj2AdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnrj2AdgEe-T7LKP4928Rw" entityName="appSessionService.saveAppSession(appSession)" predecessor_AbstractAction="_qnrj1wdgEe-T7LKP4928Rw" successor_AbstractAction="_qnrj2QdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnrj2QdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnrj2AdgEe-T7LKP4928Rw" successor_AbstractAction="_qnrj2gdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnrj2gdgEe-T7LKP4928Rw" entityName="fakeDelayService.updateFakeTanRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_qnrj2QdgEe-T7LKP4928Rw" successor_AbstractAction="_qnrj2wdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnrj2wdgEe-T7LKP4928Rw" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.status(HttpStatus.CREATED).body(returnTan)),fakeDelayService.realDelayTan(),MILLISECONDS)" predecessor_AbstractAction="_qnrj2gdgEe-T7LKP4928Rw" successor_AbstractAction="_qnrj3AdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnrj3AdgEe-T7LKP4928Rw" entityName="log.info(&quot;Returning the successfully generated tan.&quot;)" predecessor_AbstractAction="_qnrj2wdgEe-T7LKP4928Rw" successor_AbstractAction="_qnrj3QdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_qnrj3QdgEe-T7LKP4928Rw" entityName="deferredResult" predecessor_AbstractAction="_qnrj3AdgEe-T7LKP4928Rw" successor_AbstractAction="_qnrj3gdgEe-T7LKP4928Rw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_qnrj3gdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnrj3QdgEe-T7LKP4928Rw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.getTanCounter() &lt; tancountermax)"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_qnsK4QdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnsK4AdgEe-T7LKP4928Rw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(actual.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_qnsK5gdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnsK5QdgEe-T7LKP4928Rw"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_qomJ1wdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_controller_InternalTestStateController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_qomJ1gdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/testresult[POST] Provider" providedInterface__OperationProvidedRole="_qogDNAdgEe-T7LKP4928Rw"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_qnunOAdgEe-T7LKP4928Rw" describedService__SEFF="_qiBAswdgEe-T7LKP4928Rw">
      <steps_Behaviour xsi:type="seff:StartAction" id="_qnuAEQdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnunNQdgEe-T7LKP4928Rw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_qnunNQdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qnuAEQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnunNgdgEe-T7LKP4928Rw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnunMgdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_qnunNAdgEe-T7LKP4928Rw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_qnuAEgdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnunMAdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_qnunMAdgEe-T7LKP4928Rw" entityName="Switch Branch" predecessor_AbstractAction="_qnuAEgdgEe-T7LKP4928Rw" successor_AbstractAction="_qnunMQdgEe-T7LKP4928Rw">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnunIgdgEe-T7LKP4928Rw">
                <branchBehaviour_BranchTransition id="_qnunJAdgEe-T7LKP4928Rw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_qnuAEwdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnuAHwdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_qnuAHwdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qnuAEwdgEe-T7LKP4928Rw" successor_AbstractAction="_qnuAIAdgEe-T7LKP4928Rw">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnuAHAdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
                      <branchBehaviour_BranchTransition id="_qnuAHgdgEe-T7LKP4928Rw">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_qnuAFAdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnuAGgdgEe-T7LKP4928Rw"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_qnuAGgdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qnuAFAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnuAGwdgEe-T7LKP4928Rw">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnuAFwdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_qnuAGQdgEe-T7LKP4928Rw">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_qnuAFQdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnuAFgdgEe-T7LKP4928Rw"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_qnuAFgdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnuAFQdgEe-T7LKP4928Rw"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(testResultDob.getTestResult() != testResult.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_qnuAGwdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnuAGgdgEe-T7LKP4928Rw"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.get().getHashedGuidDob() != null)"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnuAIAdgEe-T7LKP4928Rw" entityName="log.debug(&quot;Result {}&quot;,testResult)" predecessor_AbstractAction="_qnuAHwdgEe-T7LKP4928Rw" successor_AbstractAction="_qnuAIQdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnuAIQdgEe-T7LKP4928Rw" entityName="log.info(&quot;The result for registration token based on hashed Guid will be returned.&quot;)" predecessor_AbstractAction="_qnuAIAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnuAIgdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_qnuAIgdgEe-T7LKP4928Rw" entityName="ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))" predecessor_AbstractAction="_qnuAIQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnunIAdgEe-T7LKP4928Rw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnunIAdgEe-T7LKP4928Rw" entityName="log.info(&quot;Internal TestState is not allowed for TeleTan Token.&quot;)" predecessor_AbstractAction="_qnuAIgdgEe-T7LKP4928Rw" successor_AbstractAction="_qnunIQdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_qnunIQdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnunIAdgEe-T7LKP4928Rw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnunKAdgEe-T7LKP4928Rw">
                <branchBehaviour_BranchTransition id="_qnunKgdgEe-T7LKP4928Rw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_qnunJQdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnunJgdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnunJgdgEe-T7LKP4928Rw" entityName="log.info(&quot;Internal TestState is not allowed for TeleTan Token.&quot;)" predecessor_AbstractAction="_qnunJQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnunJwdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_qnunJwdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnunJgdgEe-T7LKP4928Rw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnunLQdgEe-T7LKP4928Rw">
                <branchBehaviour_BranchTransition id="_qnunLwdgEe-T7LKP4928Rw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_qnunKwdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnunLAdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_qnunLAdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnunKwdgEe-T7LKP4928Rw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_qnunMQdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnunMAdgEe-T7LKP4928Rw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_qnunNgdgEe-T7LKP4928Rw" entityName="log.info(&quot;The registration token doesn't exist.&quot;)" predecessor_AbstractAction="_qnunNQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnunNwdgEe-T7LKP4928Rw"/>
      <steps_Behaviour xsi:type="seff:StopAction" id="_qnunNwdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnunNgdgEe-T7LKP4928Rw"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_qoomFgdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_controller_InternalTanController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_qoomFAdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST] Provider" providedInterface__OperationProvidedRole="_qogDMQdgEe-T7LKP4928Rw"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_qoomFQdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST] Provider" providedInterface__OperationProvidedRole="_qogDMwdgEe-T7LKP4928Rw"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_qnsx8gdgEe-T7LKP4928Rw" describedService__SEFF="_qiBnwQdgEe-T7LKP4928Rw">
      <steps_Behaviour xsi:type="seff:StartAction" id="_qnsK6QdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnsx8AdgEe-T7LKP4928Rw"/>
      <steps_Behaviour xsi:type="seff:SetVariableAction" id="_qnsx8AdgEe-T7LKP4928Rw" entityName="tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)" predecessor_AbstractAction="_qnsK6QdgEe-T7LKP4928Rw" successor_AbstractAction="_qnsx8QdgEe-T7LKP4928Rw">
        <localVariableUsages_SetVariableAction>
          <variableCharacterisation_VariableUsage type="VALUE">
            <specification_VariableCharacterisation specification="PrimitiveType.tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)"/>
          </variableCharacterisation_VariableUsage>
          <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
            <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)"/>
          </namedReference__VariableUsage>
        </localVariableUsages_SetVariableAction>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_qnsx8QdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnsx8AdgEe-T7LKP4928Rw"/>
    </serviceEffectSpecifications__BasicComponent>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_qntZFAdgEe-T7LKP4928Rw" describedService__SEFF="_qiAZowdgEe-T7LKP4928Rw">
      <steps_Behaviour xsi:type="seff:StartAction" id="_qnsx9AdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnsyAQdgEe-T7LKP4928Rw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_qnsyAQdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qnsx9AdgEe-T7LKP4928Rw" successor_AbstractAction="_qntZEgdgEe-T7LKP4928Rw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnsx-AdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_qnsx-gdgEe-T7LKP4928Rw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_qnsx9QdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnsx9gdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_qnsx9gdgEe-T7LKP4928Rw" entityName="requiredRoles.add(AuthorizationRole.AUTH_C19_HOTLINE)" predecessor_AbstractAction="_qnsx9QdgEe-T7LKP4928Rw" successor_AbstractAction="_qnsx9wdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_qnsx9wdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnsx9gdgEe-T7LKP4928Rw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(teleTanType == null)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnsx_gdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_qnsyAAdgEe-T7LKP4928Rw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_qnsx-wdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnsx_AdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_qnsx_AdgEe-T7LKP4928Rw" entityName="requiredRoles.add(AuthorizationRole.AUTH_C19_HOTLINE_EVENT)" predecessor_AbstractAction="_qnsx-wdgEe-T7LKP4928Rw" successor_AbstractAction="_qnsx_QdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_qnsx_QdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnsx_AdgEe-T7LKP4928Rw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(teleTanType == TeleTanType.EVENT)"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_qntZEgdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qnsyAQdgEe-T7LKP4928Rw" successor_AbstractAction="_qntZEwdgEe-T7LKP4928Rw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qntZDwdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_qntZEQdgEe-T7LKP4928Rw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_qntZAAdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qntZDQdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_qntZDQdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qntZAAdgEe-T7LKP4928Rw" successor_AbstractAction="_qntZDgdgEe-T7LKP4928Rw">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qntZBQdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_qntZBwdgEe-T7LKP4928Rw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_qntZAQdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qntZAgdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qntZAgdgEe-T7LKP4928Rw" entityName="log.info(&quot;The teleTAN is generated.&quot;)" predecessor_AbstractAction="_qntZAQdgEe-T7LKP4928Rw" successor_AbstractAction="_qntZAwdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_qntZAwdgEe-T7LKP4928Rw" entityName="ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))" predecessor_AbstractAction="_qntZAgdgEe-T7LKP4928Rw" successor_AbstractAction="_qntZBAdgEe-T7LKP4928Rw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_qntZBAdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qntZAwdgEe-T7LKP4928Rw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(tanService.isTeleTanRateLimitNotExceeded())"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qntZCgdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_qntZDAdgEe-T7LKP4928Rw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_qntZCAdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qntZCQdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_qntZCQdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qntZCAdgEe-T7LKP4928Rw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: else"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_qntZDgdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qntZDQdgEe-T7LKP4928Rw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(jwtService.isAuthorized(authorization.getToken(),requiredRoles))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_qntZEwdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qntZEgdgEe-T7LKP4928Rw"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_qos3iQdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_controller_ExternalTestStateController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_qos3iAdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2 Provider" providedInterface__OperationProvidedRole="_qogDMAdgEe-T7LKP4928Rw"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_qnmrXgdgEe-T7LKP4928Rw" describedService__SEFF="_qiCO0wdgEe-T7LKP4928Rw">
      <steps_Behaviour xsi:type="seff:StartAction" id="_qnkPIAdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnk2JgdgEe-T7LKP4928Rw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_qnk2JgdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qnkPIAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnk2JwdgEe-T7LKP4928Rw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnk2IwdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_qnk2JQdgEe-T7LKP4928Rw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_qnk2IAdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnk2IQdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_qnk2IQdgEe-T7LKP4928Rw" entityName="fakeRequestService.getTestState(registrationToken)" predecessor_AbstractAction="_qnk2IAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnk2IgdgEe-T7LKP4928Rw">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestService.getTestState(registrationToken)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestService.getTestState(registrationToken)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_qnk2IgdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnk2IQdgEe-T7LKP4928Rw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_qnk2JwdgEe-T7LKP4928Rw" entityName="stopWatch.start()" predecessor_AbstractAction="_qnk2JgdgEe-T7LKP4928Rw" successor_AbstractAction="_qnmrWwdgEe-T7LKP4928Rw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_qnmrWwdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qnk2JwdgEe-T7LKP4928Rw" successor_AbstractAction="_qnmrXAdgEe-T7LKP4928Rw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnmrWAdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_qnmrWgdgEe-T7LKP4928Rw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_qnk2KAdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnmrVgdgEe-T7LKP4928Rw"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_qnmrVgdgEe-T7LKP4928Rw" entityName="Switch Branch" predecessor_AbstractAction="_qnk2KAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnmrVwdgEe-T7LKP4928Rw">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnldPgdgEe-T7LKP4928Rw">
                <branchBehaviour_BranchTransition id="_qnmEQAdgEe-T7LKP4928Rw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_qnk2KQdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnk2KgdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnk2KgdgEe-T7LKP4928Rw" entityName="testResult.setResponsePadding(RandomStringUtils.randomAlphanumeric(RESPONSE_PADDING_LENGTH))" predecessor_AbstractAction="_qnk2KQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnldMAdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_qnldMAdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qnk2KgdgEe-T7LKP4928Rw" successor_AbstractAction="_qnldMQdgEe-T7LKP4928Rw">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnk2MwdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
                      <branchBehaviour_BranchTransition id="_qnk2NQdgEe-T7LKP4928Rw">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_qnk2KwdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnk2MQdgEe-T7LKP4928Rw"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_qnk2MQdgEe-T7LKP4928Rw" entityName="If Branch" predecessor_AbstractAction="_qnk2KwdgEe-T7LKP4928Rw" successor_AbstractAction="_qnk2MgdgEe-T7LKP4928Rw">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnk2LgdgEe-T7LKP4928Rw" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_qnk2MAdgEe-T7LKP4928Rw">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_qnk2LAdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnk2LQdgEe-T7LKP4928Rw"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_qnk2LQdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnk2LAdgEe-T7LKP4928Rw"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(testResultDob.getTestResult() != testResult.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_qnk2MgdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnk2MQdgEe-T7LKP4928Rw"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(!config.isDisableDobHashCheckForExternalTestResult() &amp;&amp; appSession.get().getHashedGuidDob() != null)"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnldMQdgEe-T7LKP4928Rw" entityName="log.debug(&quot;Result {}&quot;,testResult)" predecessor_AbstractAction="_qnldMAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnldMgdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnldMgdgEe-T7LKP4928Rw" entityName="log.info(&quot;The result for registration token based on hashed Guid will be returned.&quot;)" predecessor_AbstractAction="_qnldMQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnldMwdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnldMwdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnldMgdgEe-T7LKP4928Rw" successor_AbstractAction="_qnldNAdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnldNAdgEe-T7LKP4928Rw" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_qnldMwdgEe-T7LKP4928Rw" successor_AbstractAction="_qnldNQdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnldNQdgEe-T7LKP4928Rw" entityName="deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId())))" predecessor_AbstractAction="_qnldNAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnldNgdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_qnldNgdgEe-T7LKP4928Rw" entityName="deferredResult" predecessor_AbstractAction="_qnldNQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnldNwdgEe-T7LKP4928Rw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnldNwdgEe-T7LKP4928Rw" entityName="log.info(&quot;The result for registration token based on teleTAN will be returned.&quot;)" predecessor_AbstractAction="_qnldNgdgEe-T7LKP4928Rw" successor_AbstractAction="_qnldOAdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnldOAdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnldNwdgEe-T7LKP4928Rw" successor_AbstractAction="_qnldOQdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnldOQdgEe-T7LKP4928Rw" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_qnldOAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnldOgdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnldOgdgEe-T7LKP4928Rw" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(LabTestResult.POSITIVE.getTestResult(),appSession.get().getCreatedAt().toEpochSecond(ZoneOffset.UTC),null))),fakeDelayService.realDelayTest(),MILLISECONDS)" predecessor_AbstractAction="_qnldOQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnldOwdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_qnldOwdgEe-T7LKP4928Rw" entityName="deferredResult" predecessor_AbstractAction="_qnldOgdgEe-T7LKP4928Rw" successor_AbstractAction="_qnldPAdgEe-T7LKP4928Rw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnldPAdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnldOwdgEe-T7LKP4928Rw" successor_AbstractAction="_qnldPQdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_qnldPQdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnldPAdgEe-T7LKP4928Rw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnmESQdgEe-T7LKP4928Rw">
                <branchBehaviour_BranchTransition id="_qnmESwdgEe-T7LKP4928Rw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_qnmEQQdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnmEQgdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnmEQgdgEe-T7LKP4928Rw" entityName="log.info(&quot;The result for registration token based on teleTAN will be returned.&quot;)" predecessor_AbstractAction="_qnmEQQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnmEQwdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnmEQwdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnmEQgdgEe-T7LKP4928Rw" successor_AbstractAction="_qnmERAdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnmERAdgEe-T7LKP4928Rw" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_qnmEQwdgEe-T7LKP4928Rw" successor_AbstractAction="_qnmERQdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnmERQdgEe-T7LKP4928Rw" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(LabTestResult.POSITIVE.getTestResult(),appSession.get().getCreatedAt().toEpochSecond(ZoneOffset.UTC),null))),fakeDelayService.realDelayTest(),MILLISECONDS)" predecessor_AbstractAction="_qnmERAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnmERgdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_qnmERgdgEe-T7LKP4928Rw" entityName="deferredResult" predecessor_AbstractAction="_qnmERQdgEe-T7LKP4928Rw" successor_AbstractAction="_qnmERwdgEe-T7LKP4928Rw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnmERwdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnmERgdgEe-T7LKP4928Rw" successor_AbstractAction="_qnmESAdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_qnmESAdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnmERwdgEe-T7LKP4928Rw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_qnmrUwdgEe-T7LKP4928Rw">
                <branchBehaviour_BranchTransition id="_qnmrVQdgEe-T7LKP4928Rw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_qnmrUAdgEe-T7LKP4928Rw" entityName="Start Action" successor_AbstractAction="_qnmrUQdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_qnmrUQdgEe-T7LKP4928Rw" entityName="stopWatch.stop()" predecessor_AbstractAction="_qnmrUAdgEe-T7LKP4928Rw" successor_AbstractAction="_qnmrUgdgEe-T7LKP4928Rw"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_qnmrUgdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnmrUQdgEe-T7LKP4928Rw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_qnmrVwdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnmrVgdgEe-T7LKP4928Rw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_qnmrXAdgEe-T7LKP4928Rw" entityName="log.info(&quot;The registration token doesn't exist.&quot;)" predecessor_AbstractAction="_qnmrWwdgEe-T7LKP4928Rw" successor_AbstractAction="_qnmrXQdgEe-T7LKP4928Rw"/>
      <steps_Behaviour xsi:type="seff:StopAction" id="_qnmrXQdgEe-T7LKP4928Rw" entityName="Stop Action" predecessor_AbstractAction="_qnmrXAdgEe-T7LKP4928Rw"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_qousvQdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_service_FakeRequestService"/>
  <components__Repository xsi:type="repository:CompositeComponent" id="_qowh4gdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_controller_InternalTanController">
    <assemblyContexts__ComposedStructure id="_qoxwBAdgEe-T7LKP4928Rw" encapsulatedComponent__AssemblyContext="_qoomFgdgEe-T7LKP4928Rw"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_qoyXEAdgEe-T7LKP4928Rw" innerProvidedRole_ProvidedDelegationConnector="_qoomFQdgEe-T7LKP4928Rw" outerProvidedRole_ProvidedDelegationConnector="_qowh4QdgEe-T7LKP4928Rw" assemblyContext_ProvidedDelegationConnector="_qoxwBAdgEe-T7LKP4928Rw"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_qoyXEgdgEe-T7LKP4928Rw" innerProvidedRole_ProvidedDelegationConnector="_qoomFAdgEe-T7LKP4928Rw" outerProvidedRole_ProvidedDelegationConnector="_qowh4AdgEe-T7LKP4928Rw" assemblyContext_ProvidedDelegationConnector="_qoxwBAdgEe-T7LKP4928Rw"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_qowh4AdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST] Provider" providedInterface__OperationProvidedRole="_qogDMQdgEe-T7LKP4928Rw"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_qowh4QdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST] Provider" providedInterface__OperationProvidedRole="_qogDMwdgEe-T7LKP4928Rw"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_qowh5AdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_controller_InternalTestStateController">
    <assemblyContexts__ComposedStructure id="_qoxI8gdgEe-T7LKP4928Rw" encapsulatedComponent__AssemblyContext="_qomJ1wdgEe-T7LKP4928Rw"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_qoyXFAdgEe-T7LKP4928Rw" innerProvidedRole_ProvidedDelegationConnector="_qomJ1gdgEe-T7LKP4928Rw" outerProvidedRole_ProvidedDelegationConnector="_qowh4wdgEe-T7LKP4928Rw" assemblyContext_ProvidedDelegationConnector="_qoxI8gdgEe-T7LKP4928Rw"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_qowh4wdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/testresult[POST] Provider" providedInterface__OperationProvidedRole="_qogDNAdgEe-T7LKP4928Rw"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_qowh5gdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_controller_ExternalTokenController">
    <assemblyContexts__ComposedStructure id="_qoxwAAdgEe-T7LKP4928Rw" encapsulatedComponent__AssemblyContext="_qogDNgdgEe-T7LKP4928Rw"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_qoyXEQdgEe-T7LKP4928Rw" innerProvidedRole_ProvidedDelegationConnector="_qogDNQdgEe-T7LKP4928Rw" outerProvidedRole_ProvidedDelegationConnector="_qowh5QdgEe-T7LKP4928Rw" assemblyContext_ProvidedDelegationConnector="_qoxwAAdgEe-T7LKP4928Rw"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_qowh5QdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST] Provider" providedInterface__OperationProvidedRole="_qogDMgdgEe-T7LKP4928Rw"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_qowh6AdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_controller_ExternalTestStateController">
    <assemblyContexts__ComposedStructure id="_qoxI9AdgEe-T7LKP4928Rw" encapsulatedComponent__AssemblyContext="_qos3iQdgEe-T7LKP4928Rw"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_qoyXFQdgEe-T7LKP4928Rw" innerProvidedRole_ProvidedDelegationConnector="_qos3iAdgEe-T7LKP4928Rw" outerProvidedRole_ProvidedDelegationConnector="_qowh5wdgEe-T7LKP4928Rw" assemblyContext_ProvidedDelegationConnector="_qoxI9AdgEe-T7LKP4928Rw"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_qowh5wdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2 Provider" providedInterface__OperationProvidedRole="_qogDMAdgEe-T7LKP4928Rw"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_qowh6QdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_service_FakeRequestService">
    <assemblyContexts__ComposedStructure id="_qoxwBgdgEe-T7LKP4928Rw" encapsulatedComponent__AssemblyContext="_qousvQdgEe-T7LKP4928Rw"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_qoxI8QdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_controller_ExternalTanController">
    <assemblyContexts__ComposedStructure id="_qoxwAgdgEe-T7LKP4928Rw" encapsulatedComponent__AssemblyContext="_qojtkQdgEe-T7LKP4928Rw"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_qoyXEwdgEe-T7LKP4928Rw" innerProvidedRole_ProvidedDelegationConnector="_qojtkAdgEe-T7LKP4928Rw" outerProvidedRole_ProvidedDelegationConnector="_qoxI8AdgEe-T7LKP4928Rw" assemblyContext_ProvidedDelegationConnector="_qoxwAgdgEe-T7LKP4928Rw"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_qoxI8AdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/tan[POST] Provider" providedInterface__OperationProvidedRole="_qofcKgdgEe-T7LKP4928Rw"/>
  </components__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_qofcKgdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/tan[POST]">
    <signatures__OperationInterface id="_qiCO0AdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/tan[POST]" returnType__OperationSignature="_qhO9kAdgEe-T7LKP4928Rw">
      <parameters__OperationSignature dataType__Parameter="_qiBAsgdgEe-T7LKP4928Rw" parameterName="RegistrationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="String" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_qogDMAdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2">
    <signatures__OperationInterface id="_qiCO0wdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2" returnType__OperationSignature="_qhO9kAdgEe-T7LKP4928Rw">
      <parameters__OperationSignature dataType__Parameter="_qiBAsgdgEe-T7LKP4928Rw" parameterName="RegistrationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="String" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_qogDMQdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST]">
    <signatures__OperationInterface id="_qiBnwQdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST]" returnType__OperationSignature="_qiAZogdgEe-T7LKP4928Rw">
      <parameters__OperationSignature dataType__Parameter="_qiBnwAdgEe-T7LKP4928Rw" parameterName="Tan" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_qogDMgdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST]">
    <signatures__OperationInterface id="_qhPkoAdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST]" returnType__OperationSignature="_qhO9kAdgEe-T7LKP4928Rw">
      <parameters__OperationSignature dataType__Parameter="_qhNvcAdgEe-T7LKP4928Rw" parameterName="RegistrationTokenRequest" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="String" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_qogDMwdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST]">
    <signatures__OperationInterface id="_qiAZowdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST]" returnType__OperationSignature="_qiAZogdgEe-T7LKP4928Rw">
      <parameters__OperationSignature dataType__Parameter="_qiAZoAdgEe-T7LKP4928Rw" parameterName="AuthorizationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature dataType__Parameter="_qiAZoQdgEe-T7LKP4928Rw" parameterName="TeleTanType" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_qogDNAdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/testresult[POST]">
    <signatures__OperationInterface id="_qiBAswdgEe-T7LKP4928Rw" entityName="SPRING-APPLICATION/version/v1/testresult[POST]" returnType__OperationSignature="_qiAZogdgEe-T7LKP4928Rw">
      <parameters__OperationSignature dataType__Parameter="_qiBAsgdgEe-T7LKP4928Rw" parameterName="RegistrationToken" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_qhNvcAdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_model_RegistrationTokenRequest"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_qhO9kAdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_controller_DeferredResult"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_qiAZoAdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_model_AuthorizationToken"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_qiAZoQdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_model_TeleTanType"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_qiAZogdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_controller_ResponseEntity"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_qiBAsgdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_model_RegistrationToken"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_qiBnwAdgEe-T7LKP4928Rw" entityName="app_coronawarn_verification_model_Tan"/>
</repository:Repository>
