<?xml version="1.0" encoding="UTF-8"?>
<repository:Repository xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:composition="http://palladiosimulator.org/PalladioComponentModel/Core/Composition/5.2" xmlns:repository="http://palladiosimulator.org/PalladioComponentModel/Repository/5.2" xmlns:seff="http://palladiosimulator.org/PalladioComponentModel/SEFF/5.2" xmlns:stoex="http://sdq.ipd.uka.de/StochasticExpressions/2.2" id="_BDsV_BMqEe-jEoVb90RRJw">
  <components__Repository xsi:type="repository:BasicComponent" id="_BDaCFhMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_controller_ExternalTestStateController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_BDaCFRMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/testresult[POST] Provider" providedInterface__OperationProvidedRole="_BDaCERMqEe-jEoVb90RRJw"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_BCs3ghMqEe-jEoVb90RRJw" describedService__SEFF="_A8kaQBMqEe-jEoVb90RRJw">
      <steps_Behaviour xsi:type="seff:StartAction" id="_BCrCQBMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCrCRxMqEe-jEoVb90RRJw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_BCrCRxMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BCrCQBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCrCSBMqEe-jEoVb90RRJw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCrCRBMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_BCrCRhMqEe-jEoVb90RRJw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_BCrCQRMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCrCQhMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_BCrCQhMqEe-jEoVb90RRJw" entityName="fakeRequestService.getTestState(registrationToken)" predecessor_AbstractAction="_BCrCQRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCrCQxMqEe-jEoVb90RRJw">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestService.getTestState(registrationToken)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestService.getTestState(registrationToken)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_BCrCQxMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCrCQhMqEe-jEoVb90RRJw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_BCrCSBMqEe-jEoVb90RRJw" entityName="stopWatch.start()" predecessor_AbstractAction="_BCrCRxMqEe-jEoVb90RRJw" successor_AbstractAction="_BCs3fxMqEe-jEoVb90RRJw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_BCs3fxMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BCrCSBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCs3gBMqEe-jEoVb90RRJw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCs3fBMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_BCs3fhMqEe-jEoVb90RRJw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_BCrCSRMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCs3ehMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_BCs3ehMqEe-jEoVb90RRJw" entityName="Switch Branch" predecessor_AbstractAction="_BCrCSRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCs3exMqEe-jEoVb90RRJw">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCsQYxMqEe-jEoVb90RRJw">
                <branchBehaviour_BranchTransition id="_BCsQZRMqEe-jEoVb90RRJw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_BCrCShMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCrCSxMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCrCSxMqEe-jEoVb90RRJw" entityName="testResult.setResponsePadding(RandomStringUtils.randomAlphanumeric(RESPONSE_PADDING_LENGTH))" predecessor_AbstractAction="_BCrCShMqEe-jEoVb90RRJw" successor_AbstractAction="_BCrpVBMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_BCrpVBMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BCrCSxMqEe-jEoVb90RRJw" successor_AbstractAction="_BCrpVRMqEe-jEoVb90RRJw">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCrpURMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
                      <branchBehaviour_BranchTransition id="_BCrpUxMqEe-jEoVb90RRJw">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_BCrCTBMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCrCUhMqEe-jEoVb90RRJw"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_BCrCUhMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BCrCTBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCrpUBMqEe-jEoVb90RRJw">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCrCTxMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_BCrCURMqEe-jEoVb90RRJw">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_BCrCTRMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCrCThMqEe-jEoVb90RRJw"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_BCrCThMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCrCTRMqEe-jEoVb90RRJw"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(testResultDob.getTestResult() != testResult.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_BCrpUBMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCrCUhMqEe-jEoVb90RRJw"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(!config.isDisableDobHashCheckForExternalTestResult() &amp;&amp; appSession.get().getHashedGuidDob() != null)"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCrpVRMqEe-jEoVb90RRJw" entityName="log.debug(&quot;Result {}&quot;,testResult)" predecessor_AbstractAction="_BCrpVBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCrpVhMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCrpVhMqEe-jEoVb90RRJw" entityName="log.info(&quot;The result for registration token based on hashed Guid will be returned.&quot;)" predecessor_AbstractAction="_BCrpVRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCrpVxMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCrpVxMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCrpVhMqEe-jEoVb90RRJw" successor_AbstractAction="_BCrpWBMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCrpWBMqEe-jEoVb90RRJw" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_BCrpVxMqEe-jEoVb90RRJw" successor_AbstractAction="_BCrpWRMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCrpWRMqEe-jEoVb90RRJw" entityName="deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId())))" predecessor_AbstractAction="_BCrpWBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCrpWhMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_BCrpWhMqEe-jEoVb90RRJw" entityName="deferredResult" predecessor_AbstractAction="_BCrpWRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCrpWxMqEe-jEoVb90RRJw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCrpWxMqEe-jEoVb90RRJw" entityName="log.info(&quot;The result for registration token based on teleTAN will be returned.&quot;)" predecessor_AbstractAction="_BCrpWhMqEe-jEoVb90RRJw" successor_AbstractAction="_BCrpXBMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCrpXBMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCrpWxMqEe-jEoVb90RRJw" successor_AbstractAction="_BCrpXRMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCrpXRMqEe-jEoVb90RRJw" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_BCrpXBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCrpXhMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCrpXhMqEe-jEoVb90RRJw" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(LabTestResult.POSITIVE.getTestResult(),appSession.get().getCreatedAt().toEpochSecond(ZoneOffset.UTC),null))),fakeDelayService.realDelayTest(),MILLISECONDS)" predecessor_AbstractAction="_BCrpXRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCsQYBMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_BCsQYBMqEe-jEoVb90RRJw" entityName="deferredResult" predecessor_AbstractAction="_BCrpXhMqEe-jEoVb90RRJw" successor_AbstractAction="_BCsQYRMqEe-jEoVb90RRJw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCsQYRMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCsQYBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCsQYhMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_BCsQYhMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCsQYRMqEe-jEoVb90RRJw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCs3cRMqEe-jEoVb90RRJw">
                <branchBehaviour_BranchTransition id="_BCs3cxMqEe-jEoVb90RRJw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_BCsQZhMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCsQZxMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCsQZxMqEe-jEoVb90RRJw" entityName="log.info(&quot;The result for registration token based on teleTAN will be returned.&quot;)" predecessor_AbstractAction="_BCsQZhMqEe-jEoVb90RRJw" successor_AbstractAction="_BCsQaBMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCsQaBMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCsQZxMqEe-jEoVb90RRJw" successor_AbstractAction="_BCsQaRMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCsQaRMqEe-jEoVb90RRJw" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_BCsQaBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCsQahMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCsQahMqEe-jEoVb90RRJw" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(LabTestResult.POSITIVE.getTestResult(),appSession.get().getCreatedAt().toEpochSecond(ZoneOffset.UTC),null))),fakeDelayService.realDelayTest(),MILLISECONDS)" predecessor_AbstractAction="_BCsQaRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCsQaxMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_BCsQaxMqEe-jEoVb90RRJw" entityName="deferredResult" predecessor_AbstractAction="_BCsQahMqEe-jEoVb90RRJw" successor_AbstractAction="_BCsQbBMqEe-jEoVb90RRJw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCsQbBMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCsQaxMqEe-jEoVb90RRJw" successor_AbstractAction="_BCs3cBMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_BCs3cBMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCsQbBMqEe-jEoVb90RRJw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCs3dxMqEe-jEoVb90RRJw">
                <branchBehaviour_BranchTransition id="_BCs3eRMqEe-jEoVb90RRJw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_BCs3dBMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCs3dRMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCs3dRMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCs3dBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCs3dhMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_BCs3dhMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCs3dRMqEe-jEoVb90RRJw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_BCs3exMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCs3ehMqEe-jEoVb90RRJw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_BCs3gBMqEe-jEoVb90RRJw" entityName="log.info(&quot;The registration token doesn't exist.&quot;)" predecessor_AbstractAction="_BCs3fxMqEe-jEoVb90RRJw" successor_AbstractAction="_BCs3gRMqEe-jEoVb90RRJw"/>
      <steps_Behaviour xsi:type="seff:StopAction" id="_BCs3gRMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCs3gBMqEe-jEoVb90RRJw"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_BDdFZhMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_service_FakeRequestService"/>
  <components__Repository xsi:type="repository:BasicComponent" id="_BDdscBMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_controller_InternalTestStateController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_BDdFZxMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2 Provider" providedInterface__OperationProvidedRole="_BDaCEBMqEe-jEoVb90RRJw"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_BCuFoxMqEe-jEoVb90RRJw" describedService__SEFF="_A9PIoxMqEe-jEoVb90RRJw">
      <steps_Behaviour xsi:type="seff:StartAction" id="_BCs3hBMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCuFoBMqEe-jEoVb90RRJw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_BCuFoBMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BCs3hBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCuFoRMqEe-jEoVb90RRJw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCuFnRMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_BCuFnxMqEe-jEoVb90RRJw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_BCs3hRMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCuFmxMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_BCuFmxMqEe-jEoVb90RRJw" entityName="Switch Branch" predecessor_AbstractAction="_BCs3hRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCuFnBMqEe-jEoVb90RRJw">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCtekhMqEe-jEoVb90RRJw">
                <branchBehaviour_BranchTransition id="_BCtelBMqEe-jEoVb90RRJw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_BCtegBMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCtejBMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_BCtejBMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BCtegBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCtejRMqEe-jEoVb90RRJw">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCteiRMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
                      <branchBehaviour_BranchTransition id="_BCteixMqEe-jEoVb90RRJw">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_BCtegRMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCtehxMqEe-jEoVb90RRJw"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_BCtehxMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BCtegRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCteiBMqEe-jEoVb90RRJw">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCtehBMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_BCtehhMqEe-jEoVb90RRJw">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_BCteghMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCtegxMqEe-jEoVb90RRJw"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_BCtegxMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCteghMqEe-jEoVb90RRJw"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(testResultDob.getTestResult() != testResult.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_BCteiBMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCtehxMqEe-jEoVb90RRJw"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.get().getHashedGuidDob() != null)"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCtejRMqEe-jEoVb90RRJw" entityName="log.debug(&quot;Result {}&quot;,testResult)" predecessor_AbstractAction="_BCtejBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCtejhMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCtejhMqEe-jEoVb90RRJw" entityName="log.info(&quot;The result for registration token based on hashed Guid will be returned.&quot;)" predecessor_AbstractAction="_BCtejRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCtejxMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_BCtejxMqEe-jEoVb90RRJw" entityName="ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))" predecessor_AbstractAction="_BCtejhMqEe-jEoVb90RRJw" successor_AbstractAction="_BCtekBMqEe-jEoVb90RRJw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCtekBMqEe-jEoVb90RRJw" entityName="log.info(&quot;Internal TestState is not allowed for TeleTan Token.&quot;)" predecessor_AbstractAction="_BCtejxMqEe-jEoVb90RRJw" successor_AbstractAction="_BCtekRMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_BCtekRMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCtekBMqEe-jEoVb90RRJw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCuFkxMqEe-jEoVb90RRJw">
                <branchBehaviour_BranchTransition id="_BCuFlRMqEe-jEoVb90RRJw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_BCuFkBMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCuFkRMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCuFkRMqEe-jEoVb90RRJw" entityName="log.info(&quot;Internal TestState is not allowed for TeleTan Token.&quot;)" predecessor_AbstractAction="_BCuFkBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCuFkhMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_BCuFkhMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCuFkRMqEe-jEoVb90RRJw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCuFmBMqEe-jEoVb90RRJw">
                <branchBehaviour_BranchTransition id="_BCuFmhMqEe-jEoVb90RRJw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_BCuFlhMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCuFlxMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_BCuFlxMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCuFlhMqEe-jEoVb90RRJw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_BCuFnBMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCuFmxMqEe-jEoVb90RRJw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_BCuFoRMqEe-jEoVb90RRJw" entityName="log.info(&quot;The registration token doesn't exist.&quot;)" predecessor_AbstractAction="_BCuFoBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCuFohMqEe-jEoVb90RRJw"/>
      <steps_Behaviour xsi:type="seff:StopAction" id="_BCuFohMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCuFoRMqEe-jEoVb90RRJw"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_BDgIsRMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_controller_ExternalTokenController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_BDgIsBMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST] Provider" providedInterface__OperationProvidedRole="_BDaCExMqEe-jEoVb90RRJw"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_BCxwAxMqEe-jEoVb90RRJw" describedService__SEFF="_A9PvsxMqEe-jEoVb90RRJw">
      <steps_Behaviour xsi:type="seff:StartAction" id="_BCv6whMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCv6yRMqEe-jEoVb90RRJw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_BCv6yRMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BCv6whMqEe-jEoVb90RRJw" successor_AbstractAction="_BCv6yhMqEe-jEoVb90RRJw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCv6xhMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_BCv6yBMqEe-jEoVb90RRJw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_BCv6wxMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCv6xBMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_BCv6xBMqEe-jEoVb90RRJw" entityName="fakeRequestController.generateRegistrationToken(request)" predecessor_AbstractAction="_BCv6wxMqEe-jEoVb90RRJw" successor_AbstractAction="_BCv6xRMqEe-jEoVb90RRJw">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestController.generateRegistrationToken(request)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestController.generateRegistrationToken(request)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_BCv6xRMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCv6xBMqEe-jEoVb90RRJw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_BCv6yhMqEe-jEoVb90RRJw" entityName="stopWatch.start()" predecessor_AbstractAction="_BCv6yRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCxwARMqEe-jEoVb90RRJw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_BCxwARMqEe-jEoVb90RRJw" entityName="Switch Branch" predecessor_AbstractAction="_BCv6yhMqEe-jEoVb90RRJw" successor_AbstractAction="_BCxwAhMqEe-jEoVb90RRJw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCwh3xMqEe-jEoVb90RRJw">
          <branchBehaviour_BranchTransition id="_BCwh4RMqEe-jEoVb90RRJw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_BCv6yxMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCv6zBMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_BCv6zBMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCv6yxMqEe-jEoVb90RRJw" successor_AbstractAction="_BCv6zRMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_BCv6zRMqEe-jEoVb90RRJw" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_BCv6zBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCv6zhMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_BCv6zhMqEe-jEoVb90RRJw" entityName="deferredResult.setResult(responseEntity)" predecessor_AbstractAction="_BCv6zRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCv6zxMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_BCv6zxMqEe-jEoVb90RRJw" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_BCv6zhMqEe-jEoVb90RRJw" successor_AbstractAction="_BCv60BMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_BCv60BMqEe-jEoVb90RRJw" entityName="deferredResult" predecessor_AbstractAction="_BCv6zxMqEe-jEoVb90RRJw" successor_AbstractAction="_BCwh2xMqEe-jEoVb90RRJw">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_BCwh2xMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BCv60BMqEe-jEoVb90RRJw" successor_AbstractAction="_BCwh3BMqEe-jEoVb90RRJw">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCwh2BMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_BCwh2hMqEe-jEoVb90RRJw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_BCv60RMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCwh0BMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCwh0BMqEe-jEoVb90RRJw" entityName="teleTan.setRedeemed(true)" predecessor_AbstractAction="_BCv60RMqEe-jEoVb90RRJw" successor_AbstractAction="_BCwh0RMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCwh0RMqEe-jEoVb90RRJw" entityName="tanService.saveTan(teleTan)" predecessor_AbstractAction="_BCwh0BMqEe-jEoVb90RRJw" successor_AbstractAction="_BCwh0hMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCwh0hMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCwh0RMqEe-jEoVb90RRJw" successor_AbstractAction="_BCwh0xMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCwh0xMqEe-jEoVb90RRJw" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_BCwh0hMqEe-jEoVb90RRJw" successor_AbstractAction="_BCwh1BMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCwh1BMqEe-jEoVb90RRJw" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(response),fakeDelayService.realDelayToken(),MILLISECONDS)" predecessor_AbstractAction="_BCwh0xMqEe-jEoVb90RRJw" successor_AbstractAction="_BCwh1RMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCwh1RMqEe-jEoVb90RRJw" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_BCwh1BMqEe-jEoVb90RRJw" successor_AbstractAction="_BCwh1hMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_BCwh1hMqEe-jEoVb90RRJw" entityName="deferredResult" predecessor_AbstractAction="_BCwh1RMqEe-jEoVb90RRJw" successor_AbstractAction="_BCwh1xMqEe-jEoVb90RRJw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_BCwh1xMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCwh1hMqEe-jEoVb90RRJw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(optional.isPresent())"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_BCwh3BMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCwh2xMqEe-jEoVb90RRJw" successor_AbstractAction="_BCwh3RMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_BCwh3RMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCwh3BMqEe-jEoVb90RRJw" successor_AbstractAction="_BCwh3hMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_BCwh3hMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCwh3RMqEe-jEoVb90RRJw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(GUID)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCxv-BMqEe-jEoVb90RRJw">
          <branchBehaviour_BranchTransition id="_BCxv-hMqEe-jEoVb90RRJw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_BCxI4BMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCxv9BMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_BCxv9BMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BCxI4BMqEe-jEoVb90RRJw" successor_AbstractAction="_BCxv9RMqEe-jEoVb90RRJw">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCxv8RMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_BCxv8xMqEe-jEoVb90RRJw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_BCxI4RMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCxI4hMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCxI4hMqEe-jEoVb90RRJw" entityName="teleTan.setRedeemed(true)" predecessor_AbstractAction="_BCxI4RMqEe-jEoVb90RRJw" successor_AbstractAction="_BCxI4xMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCxI4xMqEe-jEoVb90RRJw" entityName="tanService.saveTan(teleTan)" predecessor_AbstractAction="_BCxI4hMqEe-jEoVb90RRJw" successor_AbstractAction="_BCxI5BMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCxI5BMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCxI4xMqEe-jEoVb90RRJw" successor_AbstractAction="_BCxI5RMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCxI5RMqEe-jEoVb90RRJw" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_BCxI5BMqEe-jEoVb90RRJw" successor_AbstractAction="_BCxI5hMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCxI5hMqEe-jEoVb90RRJw" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(response),fakeDelayService.realDelayToken(),MILLISECONDS)" predecessor_AbstractAction="_BCxI5RMqEe-jEoVb90RRJw" successor_AbstractAction="_BCxI5xMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCxI5xMqEe-jEoVb90RRJw" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_BCxI5hMqEe-jEoVb90RRJw" successor_AbstractAction="_BCxI6BMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_BCxI6BMqEe-jEoVb90RRJw" entityName="deferredResult" predecessor_AbstractAction="_BCxI5xMqEe-jEoVb90RRJw" successor_AbstractAction="_BCxv8BMqEe-jEoVb90RRJw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_BCxv8BMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCxI6BMqEe-jEoVb90RRJw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(optional.isPresent())"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_BCxv9RMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCxv9BMqEe-jEoVb90RRJw" successor_AbstractAction="_BCxv9hMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_BCxv9hMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCxv9RMqEe-jEoVb90RRJw" successor_AbstractAction="_BCxv9xMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_BCxv9xMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCxv9hMqEe-jEoVb90RRJw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCxv_hMqEe-jEoVb90RRJw">
          <branchBehaviour_BranchTransition id="_BCxwABMqEe-jEoVb90RRJw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_BCxv-xMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCxv_BMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_BCxv_BMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCxv-xMqEe-jEoVb90RRJw" successor_AbstractAction="_BCxv_RMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_BCxv_RMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCxv_BMqEe-jEoVb90RRJw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_BCxwAhMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCxwARMqEe-jEoVb90RRJw"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_BDik9BMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_controller_ExternalTanController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_BDik8xMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/tan[POST] Provider" providedInterface__OperationProvidedRole="_BDaCFBMqEe-jEoVb90RRJw"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_BCqbPBMqEe-jEoVb90RRJw" describedService__SEFF="_A9OhkRMqEe-jEoVb90RRJw">
      <steps_Behaviour xsi:type="seff:StartAction" id="_A9oxQRMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCn-8BMqEe-jEoVb90RRJw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_BCn-8BMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_A9oxQRMqEe-jEoVb90RRJw" successor_AbstractAction="_BComABMqEe-jEoVb90RRJw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCmw0RMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_BCnX4BMqEe-jEoVb90RRJw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_A9p_YBMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCmJwBMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_BCmJwBMqEe-jEoVb90RRJw" entityName="fakeRequestService.generateTan(registrationToken)" predecessor_AbstractAction="_A9p_YBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCmw0BMqEe-jEoVb90RRJw">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestService.generateTan(registrationToken)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestService.generateTan(registrationToken)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_BCmw0BMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCmJwBMqEe-jEoVb90RRJw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_BComABMqEe-jEoVb90RRJw" entityName="stopWatch.start()" predecessor_AbstractAction="_BCn-8BMqEe-jEoVb90RRJw" successor_AbstractAction="_BCqbOhMqEe-jEoVb90RRJw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_BCqbOhMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BComABMqEe-jEoVb90RRJw" successor_AbstractAction="_BCqbOxMqEe-jEoVb90RRJw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCqbNxMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_BCqbORMqEe-jEoVb90RRJw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_BComARMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCqbNRMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_BCqbNRMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BComARMqEe-jEoVb90RRJw" successor_AbstractAction="_BCqbNhMqEe-jEoVb90RRJw">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCqbMhMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_BCqbNBMqEe-jEoVb90RRJw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_BComAhMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCp0JRMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_BCp0JRMqEe-jEoVb90RRJw" entityName="Switch Branch" predecessor_AbstractAction="_BComAhMqEe-jEoVb90RRJw" successor_AbstractAction="_BCp0JhMqEe-jEoVb90RRJw">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCpNGRMqEe-jEoVb90RRJw">
                      <branchBehaviour_BranchTransition id="_BCpNGxMqEe-jEoVb90RRJw">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_BComAxMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCpNFhMqEe-jEoVb90RRJw"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_BCpNFhMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BComAxMqEe-jEoVb90RRJw" successor_AbstractAction="_BCpNFxMqEe-jEoVb90RRJw">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCpNExMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_BCpNFRMqEe-jEoVb90RRJw">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_BCpNEBMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCpNERMqEe-jEoVb90RRJw"/>
                              <steps_Behaviour xsi:type="seff:InternalAction" id="_BCpNERMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCpNEBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCpNEhMqEe-jEoVb90RRJw"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_BCpNEhMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCpNERMqEe-jEoVb90RRJw"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(covidTestResult.getTestResult() != LabTestResult.POSITIVE.getTestResult() &amp;&amp; covidTestResult.getTestResult() != LabTestResult.QUICK_POSITIVE.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_BCpNFxMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCpNFhMqEe-jEoVb90RRJw" successor_AbstractAction="_BCpNGBMqEe-jEoVb90RRJw"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_BCpNGBMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCpNFxMqEe-jEoVb90RRJw"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
                    </branches_Branch>
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCpNHxMqEe-jEoVb90RRJw">
                      <branchBehaviour_BranchTransition id="_BCpNIRMqEe-jEoVb90RRJw">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_BCpNHBMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCpNHRMqEe-jEoVb90RRJw"/>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_BCpNHRMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCpNHBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCpNHhMqEe-jEoVb90RRJw"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_BCpNHhMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCpNHRMqEe-jEoVb90RRJw"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
                    </branches_Branch>
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCp0IhMqEe-jEoVb90RRJw">
                      <branchBehaviour_BranchTransition id="_BCp0JBMqEe-jEoVb90RRJw">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_BCpNIhMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCp0IBMqEe-jEoVb90RRJw"/>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_BCp0IBMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCpNIhMqEe-jEoVb90RRJw" successor_AbstractAction="_BCp0IRMqEe-jEoVb90RRJw"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_BCp0IRMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCp0IBMqEe-jEoVb90RRJw"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCp0JhMqEe-jEoVb90RRJw" entityName="appSession.incrementTanCounter()" predecessor_AbstractAction="_BCp0JRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCp0JxMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCp0JxMqEe-jEoVb90RRJw" entityName="appSession.setUpdatedAt(LocalDateTime.now())" predecessor_AbstractAction="_BCp0JhMqEe-jEoVb90RRJw" successor_AbstractAction="_BCp0KBMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCp0KBMqEe-jEoVb90RRJw" entityName="appSessionService.saveAppSession(appSession)" predecessor_AbstractAction="_BCp0JxMqEe-jEoVb90RRJw" successor_AbstractAction="_BCp0KRMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCp0KRMqEe-jEoVb90RRJw" entityName="stopWatch.stop()" predecessor_AbstractAction="_BCp0KBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCp0KhMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCp0KhMqEe-jEoVb90RRJw" entityName="fakeDelayService.updateFakeTanRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_BCp0KRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCp0KxMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCp0KxMqEe-jEoVb90RRJw" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.status(HttpStatus.CREATED).body(returnTan)),fakeDelayService.realDelayTan(),MILLISECONDS)" predecessor_AbstractAction="_BCp0KhMqEe-jEoVb90RRJw" successor_AbstractAction="_BCp0LBMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCp0LBMqEe-jEoVb90RRJw" entityName="log.info(&quot;Returning the successfully generated tan.&quot;)" predecessor_AbstractAction="_BCp0KxMqEe-jEoVb90RRJw" successor_AbstractAction="_BCqbMBMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_BCqbMBMqEe-jEoVb90RRJw" entityName="deferredResult" predecessor_AbstractAction="_BCp0LBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCqbMRMqEe-jEoVb90RRJw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_BCqbMRMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCqbMBMqEe-jEoVb90RRJw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.getTanCounter() &lt; tancountermax)"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_BCqbNhMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCqbNRMqEe-jEoVb90RRJw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(actual.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_BCqbOxMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCqbOhMqEe-jEoVb90RRJw"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_BDlBNRMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_controller_InternalTanController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_BDlBMxMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST] Provider" providedInterface__OperationProvidedRole="_BDZbChMqEe-jEoVb90RRJw"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_BDlBNBMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST] Provider" providedInterface__OperationProvidedRole="_BDaCEhMqEe-jEoVb90RRJw"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_BCv6wBMqEe-jEoVb90RRJw" describedService__SEFF="_A9PIoBMqEe-jEoVb90RRJw">
      <steps_Behaviour xsi:type="seff:StartAction" id="_BCvTuhMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCvTuxMqEe-jEoVb90RRJw"/>
      <steps_Behaviour xsi:type="seff:SetVariableAction" id="_BCvTuxMqEe-jEoVb90RRJw" entityName="tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)" predecessor_AbstractAction="_BCvTuhMqEe-jEoVb90RRJw" successor_AbstractAction="_BCvTvBMqEe-jEoVb90RRJw">
        <localVariableUsages_SetVariableAction>
          <variableCharacterisation_VariableUsage type="VALUE">
            <specification_VariableCharacterisation specification="PrimitiveType.tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)"/>
          </variableCharacterisation_VariableUsage>
          <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
            <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)"/>
          </namedReference__VariableUsage>
        </localVariableUsages_SetVariableAction>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_BCvTvBMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCvTuxMqEe-jEoVb90RRJw"/>
    </serviceEffectSpecifications__BasicComponent>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_BCvTuBMqEe-jEoVb90RRJw" describedService__SEFF="_A9N6gxMqEe-jEoVb90RRJw">
      <steps_Behaviour xsi:type="seff:StartAction" id="_BCuFpRMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCusqxMqEe-jEoVb90RRJw"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_BCusqxMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BCuFpRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCvTthMqEe-jEoVb90RRJw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCusohMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_BCuspBMqEe-jEoVb90RRJw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_BCuFphMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCusoBMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_BCusoBMqEe-jEoVb90RRJw" entityName="requiredRoles.add(AuthorizationRole.AUTH_C19_HOTLINE)" predecessor_AbstractAction="_BCuFphMqEe-jEoVb90RRJw" successor_AbstractAction="_BCusoRMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_BCusoRMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCusoBMqEe-jEoVb90RRJw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(teleTanType == null)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCusqBMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_BCusqhMqEe-jEoVb90RRJw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_BCuspRMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCusphMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_BCusphMqEe-jEoVb90RRJw" entityName="requiredRoles.add(AuthorizationRole.AUTH_C19_HOTLINE_EVENT)" predecessor_AbstractAction="_BCuspRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCuspxMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_BCuspxMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCusphMqEe-jEoVb90RRJw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(teleTanType == TeleTanType.EVENT)"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_BCvTthMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BCusqxMqEe-jEoVb90RRJw" successor_AbstractAction="_BCvTtxMqEe-jEoVb90RRJw">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCvTsxMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_BCvTtRMqEe-jEoVb90RRJw">
            <steps_Behaviour xsi:type="seff:StartAction" id="_BCusrBMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCvTsRMqEe-jEoVb90RRJw"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_BCvTsRMqEe-jEoVb90RRJw" entityName="If Branch" predecessor_AbstractAction="_BCusrBMqEe-jEoVb90RRJw" successor_AbstractAction="_BCvTshMqEe-jEoVb90RRJw">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCussRMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_BCussxMqEe-jEoVb90RRJw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_BCusrRMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCusrhMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_BCusrhMqEe-jEoVb90RRJw" entityName="log.info(&quot;The teleTAN is generated.&quot;)" predecessor_AbstractAction="_BCusrRMqEe-jEoVb90RRJw" successor_AbstractAction="_BCusrxMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_BCusrxMqEe-jEoVb90RRJw" entityName="ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))" predecessor_AbstractAction="_BCusrhMqEe-jEoVb90RRJw" successor_AbstractAction="_BCussBMqEe-jEoVb90RRJw">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_BCussBMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCusrxMqEe-jEoVb90RRJw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(tanService.isTeleTanRateLimitNotExceeded())"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_BCusthMqEe-jEoVb90RRJw" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_BCvTsBMqEe-jEoVb90RRJw">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_BCustBMqEe-jEoVb90RRJw" entityName="Start Action" successor_AbstractAction="_BCustRMqEe-jEoVb90RRJw"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_BCustRMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCustBMqEe-jEoVb90RRJw"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: else"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_BCvTshMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCvTsRMqEe-jEoVb90RRJw"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(jwtService.isAuthorized(authorization.getToken(),requiredRoles))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_BCvTtxMqEe-jEoVb90RRJw" entityName="Stop Action" predecessor_AbstractAction="_BCvTthMqEe-jEoVb90RRJw"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_BDru4RMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_controller_ExternalTanController">
    <assemblyContexts__ComposedStructure id="_BDsV-BMqEe-jEoVb90RRJw" encapsulatedComponent__AssemblyContext="_BDik9BMqEe-jEoVb90RRJw"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_BDtkExMqEe-jEoVb90RRJw" innerProvidedRole_ProvidedDelegationConnector="_BDik8xMqEe-jEoVb90RRJw" outerProvidedRole_ProvidedDelegationConnector="_BDru4BMqEe-jEoVb90RRJw" assemblyContext_ProvidedDelegationConnector="_BDsV-BMqEe-jEoVb90RRJw"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_BDru4BMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/tan[POST] Provider" providedInterface__OperationProvidedRole="_BDaCFBMqEe-jEoVb90RRJw"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_BDru4xMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_controller_InternalTestStateController">
    <assemblyContexts__ComposedStructure id="_BDsV9hMqEe-jEoVb90RRJw" encapsulatedComponent__AssemblyContext="_BDdscBMqEe-jEoVb90RRJw"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_BDtkFBMqEe-jEoVb90RRJw" innerProvidedRole_ProvidedDelegationConnector="_BDdFZxMqEe-jEoVb90RRJw" outerProvidedRole_ProvidedDelegationConnector="_BDru4hMqEe-jEoVb90RRJw" assemblyContext_ProvidedDelegationConnector="_BDsV9hMqEe-jEoVb90RRJw"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_BDru4hMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2 Provider" providedInterface__OperationProvidedRole="_BDaCEBMqEe-jEoVb90RRJw"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_BDru5hMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_controller_InternalTanController">
    <assemblyContexts__ComposedStructure id="_BDsV9BMqEe-jEoVb90RRJw" encapsulatedComponent__AssemblyContext="_BDlBNRMqEe-jEoVb90RRJw"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_BDtkEhMqEe-jEoVb90RRJw" innerProvidedRole_ProvidedDelegationConnector="_BDlBMxMqEe-jEoVb90RRJw" outerProvidedRole_ProvidedDelegationConnector="_BDru5BMqEe-jEoVb90RRJw" assemblyContext_ProvidedDelegationConnector="_BDsV9BMqEe-jEoVb90RRJw"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_BDtkFRMqEe-jEoVb90RRJw" innerProvidedRole_ProvidedDelegationConnector="_BDlBNBMqEe-jEoVb90RRJw" outerProvidedRole_ProvidedDelegationConnector="_BDru5RMqEe-jEoVb90RRJw" assemblyContext_ProvidedDelegationConnector="_BDsV9BMqEe-jEoVb90RRJw"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_BDru5BMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST] Provider" providedInterface__OperationProvidedRole="_BDZbChMqEe-jEoVb90RRJw"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_BDru5RMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST] Provider" providedInterface__OperationProvidedRole="_BDaCEhMqEe-jEoVb90RRJw"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_BDru5xMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_service_FakeRequestService">
    <assemblyContexts__ComposedStructure id="_BDsV8BMqEe-jEoVb90RRJw" encapsulatedComponent__AssemblyContext="_BDdFZhMqEe-jEoVb90RRJw"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_BDru6RMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_controller_ExternalTestStateController">
    <assemblyContexts__ComposedStructure id="_BDsV-hMqEe-jEoVb90RRJw" encapsulatedComponent__AssemblyContext="_BDaCFhMqEe-jEoVb90RRJw"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_BDtkEBMqEe-jEoVb90RRJw" innerProvidedRole_ProvidedDelegationConnector="_BDaCFRMqEe-jEoVb90RRJw" outerProvidedRole_ProvidedDelegationConnector="_BDru6BMqEe-jEoVb90RRJw" assemblyContext_ProvidedDelegationConnector="_BDsV-hMqEe-jEoVb90RRJw"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_BDru6BMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/testresult[POST] Provider" providedInterface__OperationProvidedRole="_BDaCERMqEe-jEoVb90RRJw"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_BDru6xMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_controller_ExternalTokenController">
    <assemblyContexts__ComposedStructure id="_BDsV8hMqEe-jEoVb90RRJw" encapsulatedComponent__AssemblyContext="_BDgIsRMqEe-jEoVb90RRJw"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_BDtkERMqEe-jEoVb90RRJw" innerProvidedRole_ProvidedDelegationConnector="_BDgIsBMqEe-jEoVb90RRJw" outerProvidedRole_ProvidedDelegationConnector="_BDru6hMqEe-jEoVb90RRJw" assemblyContext_ProvidedDelegationConnector="_BDsV8hMqEe-jEoVb90RRJw"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_BDru6hMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST] Provider" providedInterface__OperationProvidedRole="_BDaCExMqEe-jEoVb90RRJw"/>
  </components__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_BDZbChMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST]">
    <signatures__OperationInterface id="_A9PIoBMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST]" returnType__OperationSignature="_A9N6ghMqEe-jEoVb90RRJw">
      <parameters__OperationSignature dataType__Parameter="_A9OhlBMqEe-jEoVb90RRJw" parameterName="Tan" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_BDaCEBMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2">
    <signatures__OperationInterface id="_A9PIoxMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2" returnType__OperationSignature="_A9N6ghMqEe-jEoVb90RRJw">
      <parameters__OperationSignature dataType__Parameter="_A8ilEBMqEe-jEoVb90RRJw" parameterName="RegistrationToken" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_BDaCERMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/testresult[POST]">
    <signatures__OperationInterface id="_A8kaQBMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/testresult[POST]" returnType__OperationSignature="_A8jzMBMqEe-jEoVb90RRJw">
      <parameters__OperationSignature dataType__Parameter="_A8ilEBMqEe-jEoVb90RRJw" parameterName="RegistrationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="String" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_BDaCEhMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST]">
    <signatures__OperationInterface id="_A9N6gxMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST]" returnType__OperationSignature="_A9N6ghMqEe-jEoVb90RRJw">
      <parameters__OperationSignature dataType__Parameter="_A9N6gBMqEe-jEoVb90RRJw" parameterName="AuthorizationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature dataType__Parameter="_A9N6gRMqEe-jEoVb90RRJw" parameterName="TeleTanType" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_BDaCExMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST]">
    <signatures__OperationInterface id="_A9PvsxMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST]" returnType__OperationSignature="_A8jzMBMqEe-jEoVb90RRJw">
      <parameters__OperationSignature dataType__Parameter="_A9PvshMqEe-jEoVb90RRJw" parameterName="RegistrationTokenRequest" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="String" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_BDaCFBMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/tan[POST]">
    <signatures__OperationInterface id="_A9OhkRMqEe-jEoVb90RRJw" entityName="SPRING-APPLICATION/version/v1/tan[POST]" returnType__OperationSignature="_A8jzMBMqEe-jEoVb90RRJw">
      <parameters__OperationSignature dataType__Parameter="_A8ilEBMqEe-jEoVb90RRJw" parameterName="RegistrationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="String" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_A8ilEBMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_model_RegistrationToken"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_A8jzMBMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_controller_DeferredResult"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_A9N6gBMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_model_AuthorizationToken"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_A9N6gRMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_model_TeleTanType"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_A9N6ghMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_controller_ResponseEntity"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_A9OhlBMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_model_Tan"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_A9PvshMqEe-jEoVb90RRJw" entityName="app_coronawarn_verification_model_RegistrationTokenRequest"/>
</repository:Repository>
