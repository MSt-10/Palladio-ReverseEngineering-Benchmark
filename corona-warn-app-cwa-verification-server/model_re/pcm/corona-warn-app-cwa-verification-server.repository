<?xml version="1.0" encoding="UTF-8"?>
<repository:Repository xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:composition="http://palladiosimulator.org/PalladioComponentModel/Core/Composition/5.2" xmlns:repository="http://palladiosimulator.org/PalladioComponentModel/Repository/5.2" xmlns:seff="http://palladiosimulator.org/PalladioComponentModel/SEFF/5.2" xmlns:stoex="http://sdq.ipd.uka.de/StochasticExpressions/2.2" id="_neb7BNg5Ee6IgJIrR-ubtg">
  <components__Repository xsi:type="repository:BasicComponent" id="_neJnIdg5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_controller_ExternalTestStateController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_neJnINg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/testresult[POST] Provider" providedInterface__OperationProvidedRole="_neJAGNg5Ee6IgJIrR-ubtg"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_ndhVA9g5Ee6IgJIrR-ubtg" describedService__SEFF="_nWccoNg5Ee6IgJIrR-ubtg">
      <steps_Behaviour xsi:type="seff:StartAction" id="_nde4wdg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_nde4yNg5Ee6IgJIrR-ubtg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_nde4yNg5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_nde4wdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_nde4ydg5Ee6IgJIrR-ubtg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_nde4xdg5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_nde4x9g5Ee6IgJIrR-ubtg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_nde4wtg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_nde4w9g5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_nde4w9g5Ee6IgJIrR-ubtg" entityName="fakeRequestService.getTestState(registrationToken)" predecessor_AbstractAction="_nde4wtg5Ee6IgJIrR-ubtg" successor_AbstractAction="_nde4xNg5Ee6IgJIrR-ubtg">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestService.getTestState(registrationToken)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestService.getTestState(registrationToken)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_nde4xNg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_nde4w9g5Ee6IgJIrR-ubtg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_nde4ydg5Ee6IgJIrR-ubtg" entityName="stopWatch.start()" predecessor_AbstractAction="_nde4yNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndhVANg5Ee6IgJIrR-ubtg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_ndhVANg5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_nde4ydg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndhVAdg5Ee6IgJIrR-ubtg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndgt_tg5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_ndguANg5Ee6IgJIrR-ubtg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_nde4ytg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndgt_Ng5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_ndgt_Ng5Ee6IgJIrR-ubtg" entityName="Switch Branch" predecessor_AbstractAction="_nde4ytg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndgt_dg5Ee6IgJIrR-ubtg">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndgG49g5Ee6IgJIrR-ubtg">
                <branchBehaviour_BranchTransition id="_ndgG5dg5Ee6IgJIrR-ubtg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_nde4y9g5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_nde4zNg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_nde4zNg5Ee6IgJIrR-ubtg" entityName="testResult.setResponsePadding(RandomStringUtils.randomAlphanumeric(RESPONSE_PADDING_LENGTH))" predecessor_AbstractAction="_nde4y9g5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndff1Ng5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_ndff1Ng5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_nde4zNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndff1dg5Ee6IgJIrR-ubtg">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndff0dg5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
                      <branchBehaviour_BranchTransition id="_ndff09g5Ee6IgJIrR-ubtg">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_nde4zdg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_nde409g5Ee6IgJIrR-ubtg"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_nde409g5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_nde4zdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndff0Ng5Ee6IgJIrR-ubtg">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_nde40Ng5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_nde40tg5Ee6IgJIrR-ubtg">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_nde4ztg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_nde4z9g5Ee6IgJIrR-ubtg"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_nde4z9g5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_nde4ztg5Ee6IgJIrR-ubtg"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(testResultDob.getTestResult() != testResult.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_ndff0Ng5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_nde409g5Ee6IgJIrR-ubtg"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(!config.isDisableDobHashCheckForExternalTestResult() &amp;&amp; appSession.get().getHashedGuidDob() != null)"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndff1dg5Ee6IgJIrR-ubtg" entityName="log.debug(&quot;Result {}&quot;,testResult)" predecessor_AbstractAction="_ndff1Ng5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndff1tg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndff1tg5Ee6IgJIrR-ubtg" entityName="log.info(&quot;The result for registration token based on hashed Guid will be returned.&quot;)" predecessor_AbstractAction="_ndff1dg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndff19g5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndff19g5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_ndff1tg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndff2Ng5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndff2Ng5Ee6IgJIrR-ubtg" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_ndff19g5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndff2dg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndff2dg5Ee6IgJIrR-ubtg" entityName="deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId())))" predecessor_AbstractAction="_ndff2Ng5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndff2tg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_ndff2tg5Ee6IgJIrR-ubtg" entityName="deferredResult" predecessor_AbstractAction="_ndff2dg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndff29g5Ee6IgJIrR-ubtg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndff29g5Ee6IgJIrR-ubtg" entityName="log.info(&quot;The result for registration token based on teleTAN will be returned.&quot;)" predecessor_AbstractAction="_ndff2tg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndff3Ng5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndff3Ng5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_ndff29g5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndff3dg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndff3dg5Ee6IgJIrR-ubtg" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_ndff3Ng5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndff3tg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndff3tg5Ee6IgJIrR-ubtg" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(LabTestResult.POSITIVE.getTestResult(),appSession.get().getCreatedAt().toEpochSecond(ZoneOffset.UTC),null))),fakeDelayService.realDelayTest(),MILLISECONDS)" predecessor_AbstractAction="_ndff3dg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndgG4Ng5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_ndgG4Ng5Ee6IgJIrR-ubtg" entityName="deferredResult" predecessor_AbstractAction="_ndff3tg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndgG4dg5Ee6IgJIrR-ubtg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndgG4dg5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_ndgG4Ng5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndgG4tg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_ndgG4tg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndgG4dg5Ee6IgJIrR-ubtg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndgt89g5Ee6IgJIrR-ubtg">
                <branchBehaviour_BranchTransition id="_ndgt9dg5Ee6IgJIrR-ubtg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_ndgG5tg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndgG59g5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndgG59g5Ee6IgJIrR-ubtg" entityName="log.info(&quot;The result for registration token based on teleTAN will be returned.&quot;)" predecessor_AbstractAction="_ndgG5tg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndgG6Ng5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndgG6Ng5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_ndgG59g5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndgG6dg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndgG6dg5Ee6IgJIrR-ubtg" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_ndgG6Ng5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndgG6tg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndgG6tg5Ee6IgJIrR-ubtg" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(LabTestResult.POSITIVE.getTestResult(),appSession.get().getCreatedAt().toEpochSecond(ZoneOffset.UTC),null))),fakeDelayService.realDelayTest(),MILLISECONDS)" predecessor_AbstractAction="_ndgG6dg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndgt8Ng5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_ndgt8Ng5Ee6IgJIrR-ubtg" entityName="deferredResult" predecessor_AbstractAction="_ndgG6tg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndgt8dg5Ee6IgJIrR-ubtg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndgt8dg5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_ndgt8Ng5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndgt8tg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_ndgt8tg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndgt8dg5Ee6IgJIrR-ubtg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndgt-dg5Ee6IgJIrR-ubtg">
                <branchBehaviour_BranchTransition id="_ndgt-9g5Ee6IgJIrR-ubtg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_ndgt9tg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndgt99g5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndgt99g5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_ndgt9tg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndgt-Ng5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_ndgt-Ng5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndgt99g5Ee6IgJIrR-ubtg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_ndgt_dg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndgt_Ng5Ee6IgJIrR-ubtg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_ndhVAdg5Ee6IgJIrR-ubtg" entityName="log.info(&quot;The registration token doesn't exist.&quot;)" predecessor_AbstractAction="_ndhVANg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndhVAtg5Ee6IgJIrR-ubtg"/>
      <steps_Behaviour xsi:type="seff:StopAction" id="_ndhVAtg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndhVAdg5Ee6IgJIrR-ubtg"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_neMqddg5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_controller_InternalTestStateController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_neMqdNg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2 Provider" providedInterface__OperationProvidedRole="_neJAGdg5Ee6IgJIrR-ubtg"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_ndccjdg5Ee6IgJIrR-ubtg" describedService__SEFF="_nXSKI9g5Ee6IgJIrR-ubtg">
      <steps_Behaviour xsi:type="seff:StartAction" id="_ndbOb9g5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndccitg5Ee6IgJIrR-ubtg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_ndccitg5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_ndbOb9g5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndcci9g5Ee6IgJIrR-ubtg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndcch9g5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_ndccidg5Ee6IgJIrR-ubtg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_ndbOcNg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndcchdg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_ndcchdg5Ee6IgJIrR-ubtg" entityName="Switch Branch" predecessor_AbstractAction="_ndbOcNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndcchtg5Ee6IgJIrR-ubtg">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndb1etg5Ee6IgJIrR-ubtg">
                <branchBehaviour_BranchTransition id="_ndb1fNg5Ee6IgJIrR-ubtg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_ndbOcdg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndb1dNg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_ndb1dNg5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_ndbOcdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndb1ddg5Ee6IgJIrR-ubtg">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndb1cdg5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
                      <branchBehaviour_BranchTransition id="_ndb1c9g5Ee6IgJIrR-ubtg">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_ndbOctg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndbOeNg5Ee6IgJIrR-ubtg"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_ndbOeNg5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_ndbOctg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndb1cNg5Ee6IgJIrR-ubtg">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndbOddg5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_ndbOd9g5Ee6IgJIrR-ubtg">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_ndbOc9g5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndbOdNg5Ee6IgJIrR-ubtg"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_ndbOdNg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndbOc9g5Ee6IgJIrR-ubtg"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(testResultDob.getTestResult() != testResult.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_ndb1cNg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndbOeNg5Ee6IgJIrR-ubtg"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.get().getHashedGuidDob() != null)"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndb1ddg5Ee6IgJIrR-ubtg" entityName="log.debug(&quot;Result {}&quot;,testResult)" predecessor_AbstractAction="_ndb1dNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndb1dtg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndb1dtg5Ee6IgJIrR-ubtg" entityName="log.info(&quot;The result for registration token based on hashed Guid will be returned.&quot;)" predecessor_AbstractAction="_ndb1ddg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndb1d9g5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_ndb1d9g5Ee6IgJIrR-ubtg" entityName="ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))" predecessor_AbstractAction="_ndb1dtg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndb1eNg5Ee6IgJIrR-ubtg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndb1eNg5Ee6IgJIrR-ubtg" entityName="log.info(&quot;Internal TestState is not allowed for TeleTan Token.&quot;)" predecessor_AbstractAction="_ndb1d9g5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndb1edg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_ndb1edg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndb1eNg5Ee6IgJIrR-ubtg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndb1gNg5Ee6IgJIrR-ubtg">
                <branchBehaviour_BranchTransition id="_ndb1gtg5Ee6IgJIrR-ubtg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_ndb1fdg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndb1ftg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndb1ftg5Ee6IgJIrR-ubtg" entityName="log.info(&quot;Internal TestState is not allowed for TeleTan Token.&quot;)" predecessor_AbstractAction="_ndb1fdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndb1f9g5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_ndb1f9g5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndb1ftg5Ee6IgJIrR-ubtg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndccgtg5Ee6IgJIrR-ubtg">
                <branchBehaviour_BranchTransition id="_ndcchNg5Ee6IgJIrR-ubtg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_ndccgNg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndccgdg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_ndccgdg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndccgNg5Ee6IgJIrR-ubtg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_ndcchtg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndcchdg5Ee6IgJIrR-ubtg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_ndcci9g5Ee6IgJIrR-ubtg" entityName="log.info(&quot;The registration token doesn't exist.&quot;)" predecessor_AbstractAction="_ndccitg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndccjNg5Ee6IgJIrR-ubtg"/>
      <steps_Behaviour xsi:type="seff:StopAction" id="_ndccjNg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndcci9g5Ee6IgJIrR-ubtg"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_nePGvtg5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_controller_ExternalTokenController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_nePGvdg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST] Provider" providedInterface__OperationProvidedRole="_neJAGtg5Ee6IgJIrR-ubtg"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_ndaAQdg5Ee6IgJIrR-ubtg" describedService__SEFF="_nXSxMdg5Ee6IgJIrR-ubtg">
      <steps_Behaviour xsi:type="seff:StartAction" id="_nXrLsdg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndWV4Ng5Ee6IgJIrR-ubtg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_ndWV4Ng5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_nXrLsdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndW88Ng5Ee6IgJIrR-ubtg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndVu0Ng5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_ndVu0tg5Ee6IgJIrR-ubtg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_nXtA4Ng5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndVHwNg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_ndVHwNg5Ee6IgJIrR-ubtg" entityName="fakeRequestController.generateRegistrationToken(request)" predecessor_AbstractAction="_nXtA4Ng5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndVHwdg5Ee6IgJIrR-ubtg">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestController.generateRegistrationToken(request)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestController.generateRegistrationToken(request)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_ndVHwdg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndVHwNg5Ee6IgJIrR-ubtg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_ndW88Ng5Ee6IgJIrR-ubtg" entityName="stopWatch.start()" predecessor_AbstractAction="_ndWV4Ng5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndZZPtg5Ee6IgJIrR-ubtg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_ndZZPtg5Ee6IgJIrR-ubtg" entityName="Switch Branch" predecessor_AbstractAction="_ndW88Ng5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndaAQNg5Ee6IgJIrR-ubtg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndYLHdg5Ee6IgJIrR-ubtg">
          <branchBehaviour_BranchTransition id="_ndYyINg5Ee6IgJIrR-ubtg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_ndXkANg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndXkAdg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_ndXkAdg5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_ndXkANg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndXkAtg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_ndXkAtg5Ee6IgJIrR-ubtg" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_ndXkAdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndXkA9g5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_ndXkA9g5Ee6IgJIrR-ubtg" entityName="deferredResult.setResult(responseEntity)" predecessor_AbstractAction="_ndXkAtg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndXkBNg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_ndXkBNg5Ee6IgJIrR-ubtg" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_ndXkA9g5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndXkBdg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_ndXkBdg5Ee6IgJIrR-ubtg" entityName="deferredResult" predecessor_AbstractAction="_ndXkBNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYLGdg5Ee6IgJIrR-ubtg">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_ndYLGdg5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_ndXkBdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYLGtg5Ee6IgJIrR-ubtg">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndYLFtg5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_ndYLGNg5Ee6IgJIrR-ubtg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_ndXkBtg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndXkB9g5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndXkB9g5Ee6IgJIrR-ubtg" entityName="teleTan.setRedeemed(true)" predecessor_AbstractAction="_ndXkBtg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndXkCNg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndXkCNg5Ee6IgJIrR-ubtg" entityName="tanService.saveTan(teleTan)" predecessor_AbstractAction="_ndXkB9g5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYLENg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndYLENg5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_ndXkCNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYLEdg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndYLEdg5Ee6IgJIrR-ubtg" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_ndYLENg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYLEtg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndYLEtg5Ee6IgJIrR-ubtg" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(response),fakeDelayService.realDelayToken(),MILLISECONDS)" predecessor_AbstractAction="_ndYLEdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYLE9g5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndYLE9g5Ee6IgJIrR-ubtg" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_ndYLEtg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYLFNg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_ndYLFNg5Ee6IgJIrR-ubtg" entityName="deferredResult" predecessor_AbstractAction="_ndYLE9g5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYLFdg5Ee6IgJIrR-ubtg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_ndYLFdg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndYLFNg5Ee6IgJIrR-ubtg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(optional.isPresent())"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_ndYLGtg5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_ndYLGdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYLG9g5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_ndYLG9g5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_ndYLGtg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYLHNg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_ndYLHNg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndYLG9g5Ee6IgJIrR-ubtg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(GUID)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndZZNdg5Ee6IgJIrR-ubtg">
          <branchBehaviour_BranchTransition id="_ndZZN9g5Ee6IgJIrR-ubtg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_ndYyIdg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndZZMdg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_ndZZMdg5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_ndYyIdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndZZMtg5Ee6IgJIrR-ubtg">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndYyK9g5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_ndZZMNg5Ee6IgJIrR-ubtg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_ndYyItg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndYyI9g5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndYyI9g5Ee6IgJIrR-ubtg" entityName="teleTan.setRedeemed(true)" predecessor_AbstractAction="_ndYyItg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYyJNg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndYyJNg5Ee6IgJIrR-ubtg" entityName="tanService.saveTan(teleTan)" predecessor_AbstractAction="_ndYyI9g5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYyJdg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndYyJdg5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_ndYyJNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYyJtg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndYyJtg5Ee6IgJIrR-ubtg" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_ndYyJdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYyJ9g5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndYyJ9g5Ee6IgJIrR-ubtg" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(response),fakeDelayService.realDelayToken(),MILLISECONDS)" predecessor_AbstractAction="_ndYyJtg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYyKNg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndYyKNg5Ee6IgJIrR-ubtg" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_ndYyJ9g5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYyKdg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_ndYyKdg5Ee6IgJIrR-ubtg" entityName="deferredResult" predecessor_AbstractAction="_ndYyKNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndYyKtg5Ee6IgJIrR-ubtg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_ndYyKtg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndYyKdg5Ee6IgJIrR-ubtg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(optional.isPresent())"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_ndZZMtg5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_ndZZMdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndZZM9g5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_ndZZM9g5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_ndZZMtg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndZZNNg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_ndZZNNg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndZZM9g5Ee6IgJIrR-ubtg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndZZO9g5Ee6IgJIrR-ubtg">
          <branchBehaviour_BranchTransition id="_ndZZPdg5Ee6IgJIrR-ubtg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_ndZZONg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndZZOdg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_ndZZOdg5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_ndZZONg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndZZOtg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_ndZZOtg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndZZOdg5Ee6IgJIrR-ubtg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_ndaAQNg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndZZPtg5Ee6IgJIrR-ubtg"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_neRi_Ng5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_service_FakeRequestService"/>
  <components__Repository xsi:type="repository:BasicComponent" id="_neRi_9g5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_controller_InternalTanController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_neRi_dg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST] Provider" providedInterface__OperationProvidedRole="_neJAFtg5Ee6IgJIrR-ubtg"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_neRi_tg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST] Provider" providedInterface__OperationProvidedRole="_neJAF9g5Ee6IgJIrR-ubtg"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_ndaARtg5Ee6IgJIrR-ubtg" describedService__SEFF="_nXRjE9g5Ee6IgJIrR-ubtg">
      <steps_Behaviour xsi:type="seff:StartAction" id="_ndaAQ9g5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndaARNg5Ee6IgJIrR-ubtg"/>
      <steps_Behaviour xsi:type="seff:SetVariableAction" id="_ndaARNg5Ee6IgJIrR-ubtg" entityName="tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)" predecessor_AbstractAction="_ndaAQ9g5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndaARdg5Ee6IgJIrR-ubtg">
        <localVariableUsages_SetVariableAction>
          <variableCharacterisation_VariableUsage type="VALUE">
            <specification_VariableCharacterisation specification="PrimitiveType.tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)"/>
          </variableCharacterisation_VariableUsage>
          <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
            <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)"/>
          </namedReference__VariableUsage>
        </localVariableUsages_SetVariableAction>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_ndaARdg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndaARNg5Ee6IgJIrR-ubtg"/>
    </serviceEffectSpecifications__BasicComponent>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_ndbObdg5Ee6IgJIrR-ubtg" describedService__SEFF="_nXSKINg5Ee6IgJIrR-ubtg">
      <steps_Behaviour xsi:type="seff:StartAction" id="_ndaASNg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndanXNg5Ee6IgJIrR-ubtg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_ndanXNg5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_ndaASNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndbOa9g5Ee6IgJIrR-ubtg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndanU9g5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_ndanVdg5Ee6IgJIrR-ubtg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_ndanUNg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndanUdg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_ndanUdg5Ee6IgJIrR-ubtg" entityName="requiredRoles.add(AuthorizationRole.AUTH_C19_HOTLINE)" predecessor_AbstractAction="_ndanUNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndanUtg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_ndanUtg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndanUdg5Ee6IgJIrR-ubtg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(teleTanType == null)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndanWdg5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_ndanW9g5Ee6IgJIrR-ubtg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_ndanVtg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndanV9g5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_ndanV9g5Ee6IgJIrR-ubtg" entityName="requiredRoles.add(AuthorizationRole.AUTH_C19_HOTLINE_EVENT)" predecessor_AbstractAction="_ndanVtg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndanWNg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_ndanWNg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndanV9g5Ee6IgJIrR-ubtg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(teleTanType == TeleTanType.EVENT)"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_ndbOa9g5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_ndanXNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndbObNg5Ee6IgJIrR-ubtg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndbOaNg5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_ndbOatg5Ee6IgJIrR-ubtg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_ndanXdg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndbOZtg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_ndbOZtg5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_ndanXdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndbOZ9g5Ee6IgJIrR-ubtg">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndanYtg5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_ndbOYNg5Ee6IgJIrR-ubtg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_ndanXtg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndanX9g5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_ndanX9g5Ee6IgJIrR-ubtg" entityName="log.info(&quot;The teleTAN is generated.&quot;)" predecessor_AbstractAction="_ndanXtg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndanYNg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_ndanYNg5Ee6IgJIrR-ubtg" entityName="ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))" predecessor_AbstractAction="_ndanX9g5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndanYdg5Ee6IgJIrR-ubtg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_ndanYdg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndanYNg5Ee6IgJIrR-ubtg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(tanService.isTeleTanRateLimitNotExceeded())"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndbOY9g5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_ndbOZdg5Ee6IgJIrR-ubtg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_ndbOYdg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndbOYtg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_ndbOYtg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndbOYdg5Ee6IgJIrR-ubtg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: else"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_ndbOZ9g5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndbOZtg5Ee6IgJIrR-ubtg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(jwtService.isAuthorized(authorization.getToken(),requiredRoles))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_ndbObNg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndbOa9g5Ee6IgJIrR-ubtg"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_neWbe9g5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_controller_ExternalTanController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_neWbetg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/tan[POST] Provider" providedInterface__OperationProvidedRole="_neJAFdg5Ee6IgJIrR-ubtg"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_ndeRt9g5Ee6IgJIrR-ubtg" describedService__SEFF="_nXQ8ANg5Ee6IgJIrR-ubtg">
      <steps_Behaviour xsi:type="seff:StartAction" id="_ndccj9g5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_nddDkNg5Ee6IgJIrR-ubtg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_nddDkNg5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_ndccj9g5Ee6IgJIrR-ubtg" successor_AbstractAction="_nddDkdg5Ee6IgJIrR-ubtg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndcck9g5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_ndccldg5Ee6IgJIrR-ubtg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_ndcckNg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndcckdg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_ndcckdg5Ee6IgJIrR-ubtg" entityName="fakeRequestService.generateTan(registrationToken)" predecessor_AbstractAction="_ndcckNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndccktg5Ee6IgJIrR-ubtg">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestService.generateTan(registrationToken)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestService.generateTan(registrationToken)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_ndccktg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndcckdg5Ee6IgJIrR-ubtg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_nddDkdg5Ee6IgJIrR-ubtg" entityName="stopWatch.start()" predecessor_AbstractAction="_nddDkNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndeRtdg5Ee6IgJIrR-ubtg"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_ndeRtdg5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_nddDkdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndeRttg5Ee6IgJIrR-ubtg">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_ndeRstg5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_ndeRtNg5Ee6IgJIrR-ubtg">
            <steps_Behaviour xsi:type="seff:StartAction" id="_nddDktg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_ndeRsNg5Ee6IgJIrR-ubtg"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_ndeRsNg5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_nddDktg5Ee6IgJIrR-ubtg" successor_AbstractAction="_ndeRsdg5Ee6IgJIrR-ubtg">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_nddqsNg5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_nddqstg5Ee6IgJIrR-ubtg">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_nddDk9g5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_nddqptg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_nddqptg5Ee6IgJIrR-ubtg" entityName="Switch Branch" predecessor_AbstractAction="_nddDk9g5Ee6IgJIrR-ubtg" successor_AbstractAction="_nddqp9g5Ee6IgJIrR-ubtg">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_nddDntg5Ee6IgJIrR-ubtg">
                      <branchBehaviour_BranchTransition id="_nddDoNg5Ee6IgJIrR-ubtg">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_nddDlNg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_nddDm9g5Ee6IgJIrR-ubtg"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_nddDm9g5Ee6IgJIrR-ubtg" entityName="If Branch" predecessor_AbstractAction="_nddDlNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_nddDnNg5Ee6IgJIrR-ubtg">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_nddDmNg5Ee6IgJIrR-ubtg" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_nddDmtg5Ee6IgJIrR-ubtg">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_nddDldg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_nddDltg5Ee6IgJIrR-ubtg"/>
                              <steps_Behaviour xsi:type="seff:InternalAction" id="_nddDltg5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_nddDldg5Ee6IgJIrR-ubtg" successor_AbstractAction="_nddDl9g5Ee6IgJIrR-ubtg"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_nddDl9g5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_nddDltg5Ee6IgJIrR-ubtg"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(covidTestResult.getTestResult() != LabTestResult.POSITIVE.getTestResult() &amp;&amp; covidTestResult.getTestResult() != LabTestResult.QUICK_POSITIVE.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_nddDnNg5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_nddDm9g5Ee6IgJIrR-ubtg" successor_AbstractAction="_nddDndg5Ee6IgJIrR-ubtg"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_nddDndg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_nddDnNg5Ee6IgJIrR-ubtg"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
                    </branches_Branch>
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_nddDpNg5Ee6IgJIrR-ubtg">
                      <branchBehaviour_BranchTransition id="_nddDptg5Ee6IgJIrR-ubtg">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_nddDodg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_nddDotg5Ee6IgJIrR-ubtg"/>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_nddDotg5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_nddDodg5Ee6IgJIrR-ubtg" successor_AbstractAction="_nddDo9g5Ee6IgJIrR-ubtg"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_nddDo9g5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_nddDotg5Ee6IgJIrR-ubtg"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
                    </branches_Branch>
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_nddqo9g5Ee6IgJIrR-ubtg">
                      <branchBehaviour_BranchTransition id="_nddqpdg5Ee6IgJIrR-ubtg">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_nddqoNg5Ee6IgJIrR-ubtg" entityName="Start Action" successor_AbstractAction="_nddqodg5Ee6IgJIrR-ubtg"/>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_nddqodg5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_nddqoNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_nddqotg5Ee6IgJIrR-ubtg"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_nddqotg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_nddqodg5Ee6IgJIrR-ubtg"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_nddqp9g5Ee6IgJIrR-ubtg" entityName="appSession.incrementTanCounter()" predecessor_AbstractAction="_nddqptg5Ee6IgJIrR-ubtg" successor_AbstractAction="_nddqqNg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_nddqqNg5Ee6IgJIrR-ubtg" entityName="appSession.setUpdatedAt(LocalDateTime.now())" predecessor_AbstractAction="_nddqp9g5Ee6IgJIrR-ubtg" successor_AbstractAction="_nddqqdg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_nddqqdg5Ee6IgJIrR-ubtg" entityName="appSessionService.saveAppSession(appSession)" predecessor_AbstractAction="_nddqqNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_nddqqtg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_nddqqtg5Ee6IgJIrR-ubtg" entityName="stopWatch.stop()" predecessor_AbstractAction="_nddqqdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_nddqq9g5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_nddqq9g5Ee6IgJIrR-ubtg" entityName="fakeDelayService.updateFakeTanRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_nddqqtg5Ee6IgJIrR-ubtg" successor_AbstractAction="_nddqrNg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_nddqrNg5Ee6IgJIrR-ubtg" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.status(HttpStatus.CREATED).body(returnTan)),fakeDelayService.realDelayTan(),MILLISECONDS)" predecessor_AbstractAction="_nddqq9g5Ee6IgJIrR-ubtg" successor_AbstractAction="_nddqrdg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_nddqrdg5Ee6IgJIrR-ubtg" entityName="log.info(&quot;Returning the successfully generated tan.&quot;)" predecessor_AbstractAction="_nddqrNg5Ee6IgJIrR-ubtg" successor_AbstractAction="_nddqrtg5Ee6IgJIrR-ubtg"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_nddqrtg5Ee6IgJIrR-ubtg" entityName="deferredResult" predecessor_AbstractAction="_nddqrdg5Ee6IgJIrR-ubtg" successor_AbstractAction="_nddqr9g5Ee6IgJIrR-ubtg">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_nddqr9g5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_nddqrtg5Ee6IgJIrR-ubtg"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.getTanCounter() &lt; tancountermax)"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_ndeRsdg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndeRsNg5Ee6IgJIrR-ubtg"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(actual.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_ndeRttg5Ee6IgJIrR-ubtg" entityName="Stop Action" predecessor_AbstractAction="_ndeRtdg5Ee6IgJIrR-ubtg"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_neas4dg5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_controller_ExternalTanController">
    <assemblyContexts__ComposedStructure id="_nebT99g5Ee6IgJIrR-ubtg" encapsulatedComponent__AssemblyContext="_neWbe9g5Ee6IgJIrR-ubtg"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_neciEdg5Ee6IgJIrR-ubtg" innerProvidedRole_ProvidedDelegationConnector="_neWbetg5Ee6IgJIrR-ubtg" outerProvidedRole_ProvidedDelegationConnector="_neas4Ng5Ee6IgJIrR-ubtg" assemblyContext_ProvidedDelegationConnector="_nebT99g5Ee6IgJIrR-ubtg"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_neas4Ng5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/tan[POST] Provider" providedInterface__OperationProvidedRole="_neJAFdg5Ee6IgJIrR-ubtg"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_neas5Ng5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_controller_InternalTanController">
    <assemblyContexts__ComposedStructure id="_nebT9dg5Ee6IgJIrR-ubtg" encapsulatedComponent__AssemblyContext="_neRi_9g5Ee6IgJIrR-ubtg"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_neciEtg5Ee6IgJIrR-ubtg" innerProvidedRole_ProvidedDelegationConnector="_neRi_dg5Ee6IgJIrR-ubtg" outerProvidedRole_ProvidedDelegationConnector="_neas49g5Ee6IgJIrR-ubtg" assemblyContext_ProvidedDelegationConnector="_nebT9dg5Ee6IgJIrR-ubtg"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_neciFdg5Ee6IgJIrR-ubtg" innerProvidedRole_ProvidedDelegationConnector="_neRi_tg5Ee6IgJIrR-ubtg" outerProvidedRole_ProvidedDelegationConnector="_neas4tg5Ee6IgJIrR-ubtg" assemblyContext_ProvidedDelegationConnector="_nebT9dg5Ee6IgJIrR-ubtg"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_neas4tg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST] Provider" providedInterface__OperationProvidedRole="_neJAF9g5Ee6IgJIrR-ubtg"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_neas49g5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST] Provider" providedInterface__OperationProvidedRole="_neJAFtg5Ee6IgJIrR-ubtg"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_neas5tg5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_controller_ExternalTestStateController">
    <assemblyContexts__ComposedStructure id="_nebT89g5Ee6IgJIrR-ubtg" encapsulatedComponent__AssemblyContext="_neJnIdg5Ee6IgJIrR-ubtg"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_neciENg5Ee6IgJIrR-ubtg" innerProvidedRole_ProvidedDelegationConnector="_neJnINg5Ee6IgJIrR-ubtg" outerProvidedRole_ProvidedDelegationConnector="_neas5dg5Ee6IgJIrR-ubtg" assemblyContext_ProvidedDelegationConnector="_nebT89g5Ee6IgJIrR-ubtg"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_neas5dg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/testresult[POST] Provider" providedInterface__OperationProvidedRole="_neJAGNg5Ee6IgJIrR-ubtg"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_neas6Ng5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_controller_InternalTestStateController">
    <assemblyContexts__ComposedStructure id="_neb7ANg5Ee6IgJIrR-ubtg" encapsulatedComponent__AssemblyContext="_neMqddg5Ee6IgJIrR-ubtg"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_neciFNg5Ee6IgJIrR-ubtg" innerProvidedRole_ProvidedDelegationConnector="_neMqdNg5Ee6IgJIrR-ubtg" outerProvidedRole_ProvidedDelegationConnector="_neas59g5Ee6IgJIrR-ubtg" assemblyContext_ProvidedDelegationConnector="_neb7ANg5Ee6IgJIrR-ubtg"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_neas59g5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2 Provider" providedInterface__OperationProvidedRole="_neJAGdg5Ee6IgJIrR-ubtg"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_nebT8dg5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_controller_ExternalTokenController">
    <assemblyContexts__ComposedStructure id="_nebT-dg5Ee6IgJIrR-ubtg" encapsulatedComponent__AssemblyContext="_nePGvtg5Ee6IgJIrR-ubtg"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_neciE9g5Ee6IgJIrR-ubtg" innerProvidedRole_ProvidedDelegationConnector="_nePGvdg5Ee6IgJIrR-ubtg" outerProvidedRole_ProvidedDelegationConnector="_nebT8Ng5Ee6IgJIrR-ubtg" assemblyContext_ProvidedDelegationConnector="_nebT-dg5Ee6IgJIrR-ubtg"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_nebT8Ng5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST] Provider" providedInterface__OperationProvidedRole="_neJAGtg5Ee6IgJIrR-ubtg"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_nebT8tg5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_service_FakeRequestService">
    <assemblyContexts__ComposedStructure id="_neb7Atg5Ee6IgJIrR-ubtg" encapsulatedComponent__AssemblyContext="_neRi_Ng5Ee6IgJIrR-ubtg"/>
  </components__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_neJAFdg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/tan[POST]">
    <signatures__OperationInterface id="_nXQ8ANg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/tan[POST]" returnType__OperationSignature="_nWb1kNg5Ee6IgJIrR-ubtg">
      <parameters__OperationSignature dataType__Parameter="_nWancNg5Ee6IgJIrR-ubtg" parameterName="RegistrationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="String" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_neJAFtg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST]">
    <signatures__OperationInterface id="_nXRjE9g5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST]" returnType__OperationSignature="_nXRjEtg5Ee6IgJIrR-ubtg">
      <parameters__OperationSignature dataType__Parameter="_nXRjEdg5Ee6IgJIrR-ubtg" parameterName="Tan" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_neJAF9g5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST]">
    <signatures__OperationInterface id="_nXSKINg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST]" returnType__OperationSignature="_nXRjEtg5Ee6IgJIrR-ubtg">
      <parameters__OperationSignature dataType__Parameter="_nXRjFtg5Ee6IgJIrR-ubtg" parameterName="AuthorizationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature dataType__Parameter="_nXRjF9g5Ee6IgJIrR-ubtg" parameterName="TeleTanType" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_neJAGNg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/testresult[POST]">
    <signatures__OperationInterface id="_nWccoNg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/testresult[POST]" returnType__OperationSignature="_nWb1kNg5Ee6IgJIrR-ubtg">
      <parameters__OperationSignature dataType__Parameter="_nWancNg5Ee6IgJIrR-ubtg" parameterName="RegistrationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="String" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_neJAGdg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2">
    <signatures__OperationInterface id="_nXSKI9g5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2" returnType__OperationSignature="_nXRjEtg5Ee6IgJIrR-ubtg">
      <parameters__OperationSignature dataType__Parameter="_nWancNg5Ee6IgJIrR-ubtg" parameterName="RegistrationToken" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_neJAGtg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST]">
    <signatures__OperationInterface id="_nXSxMdg5Ee6IgJIrR-ubtg" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST]" returnType__OperationSignature="_nWb1kNg5Ee6IgJIrR-ubtg">
      <parameters__OperationSignature dataType__Parameter="_nXSxMNg5Ee6IgJIrR-ubtg" parameterName="RegistrationTokenRequest" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="String" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_nWancNg5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_model_RegistrationToken"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_nWb1kNg5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_controller_DeferredResult"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_nXRjEdg5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_model_Tan"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_nXRjEtg5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_controller_ResponseEntity"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_nXRjFtg5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_model_AuthorizationToken"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_nXRjF9g5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_model_TeleTanType"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_nXSxMNg5Ee6IgJIrR-ubtg" entityName="app_coronawarn_verification_model_RegistrationTokenRequest"/>
</repository:Repository>
