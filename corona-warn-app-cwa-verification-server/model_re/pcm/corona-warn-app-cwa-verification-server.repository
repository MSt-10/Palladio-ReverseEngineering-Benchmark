<?xml version="1.0" encoding="UTF-8"?>
<repository:Repository xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:composition="http://palladiosimulator.org/PalladioComponentModel/Core/Composition/5.2" xmlns:repository="http://palladiosimulator.org/PalladioComponentModel/Repository/5.2" xmlns:seff="http://palladiosimulator.org/PalladioComponentModel/SEFF/5.2" xmlns:stoex="http://sdq.ipd.uka.de/StochasticExpressions/2.2" id="_aGlRcKewEe-lpbtp4RiUtA">
  <components__Repository xsi:type="repository:BasicComponent" id="_aGUyx6ewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_controller_InternalTestStateController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_aGUyxqewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/testresult[POST] Provider" providedInterface__OperationProvidedRole="_aGUyw6ewEe-lpbtp4RiUtA"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_aFtHxKewEe-lpbtp4RiUtA" describedService__SEFF="_Z_rYMaewEe-lpbtp4RiUtA">
      <steps_Behaviour xsi:type="seff:StartAction" id="_aFsgoaewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFtHwaewEe-lpbtp4RiUtA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_aFtHwaewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFsgoaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFtHwqewEe-lpbtp4RiUtA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFtHvqewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_aFtHwKewEe-lpbtp4RiUtA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_aFsgoqewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFtHvKewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_aFtHvKewEe-lpbtp4RiUtA" entityName="Switch Branch" predecessor_AbstractAction="_aFsgoqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFtHvaewEe-lpbtp4RiUtA">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFsgtaewEe-lpbtp4RiUtA">
                <branchBehaviour_BranchTransition id="_aFtHsKewEe-lpbtp4RiUtA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_aFsgo6ewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFsgr6ewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_aFsgr6ewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFsgo6ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFsgsKewEe-lpbtp4RiUtA">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFsgrKewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
                      <branchBehaviour_BranchTransition id="_aFsgrqewEe-lpbtp4RiUtA">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_aFsgpKewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFsgqqewEe-lpbtp4RiUtA"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_aFsgqqewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFsgpKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFsgq6ewEe-lpbtp4RiUtA">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFsgp6ewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_aFsgqaewEe-lpbtp4RiUtA">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_aFsgpaewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFsgpqewEe-lpbtp4RiUtA"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_aFsgpqewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFsgpaewEe-lpbtp4RiUtA"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(testResultDob.getTestResult() != testResult.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_aFsgq6ewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFsgqqewEe-lpbtp4RiUtA"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.get().getHashedGuidDob() != null)"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFsgsKewEe-lpbtp4RiUtA" entityName="log.debug(&quot;Result {}&quot;,testResult)" predecessor_AbstractAction="_aFsgr6ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFsgsaewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFsgsaewEe-lpbtp4RiUtA" entityName="log.info(&quot;The result for registration token based on hashed Guid will be returned.&quot;)" predecessor_AbstractAction="_aFsgsKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFsgsqewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_aFsgsqewEe-lpbtp4RiUtA" entityName="ResponseEntity.ok(new InternalTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId(),testResult.getResponsePadding(),appSession.get().getHashedGuid()))" predecessor_AbstractAction="_aFsgsaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFsgs6ewEe-lpbtp4RiUtA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.ResponseEntity_ok(new InternalTestResult(testResult_getTestResult(),testResult_getSc(),testResult_getLabId(),testResult_getResponsePadding(),appSession_get()_getHashedGuid()))"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="ResponseEntity_ok(new InternalTestResult(testResult_getTestResult(),testResult_getSc(),testResult_getLabId(),testResult_getResponsePadding(),appSession_get()_getHashedGuid()))"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFsgs6ewEe-lpbtp4RiUtA" entityName="log.info(&quot;Internal TestState is not allowed for TeleTan Token.&quot;)" predecessor_AbstractAction="_aFsgsqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFsgtKewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_aFsgtKewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFsgs6ewEe-lpbtp4RiUtA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFtHtKewEe-lpbtp4RiUtA">
                <branchBehaviour_BranchTransition id="_aFtHtqewEe-lpbtp4RiUtA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_aFtHsaewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFtHsqewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFtHsqewEe-lpbtp4RiUtA" entityName="log.info(&quot;Internal TestState is not allowed for TeleTan Token.&quot;)" predecessor_AbstractAction="_aFtHsaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFtHs6ewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_aFtHs6ewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFtHsqewEe-lpbtp4RiUtA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFtHuaewEe-lpbtp4RiUtA">
                <branchBehaviour_BranchTransition id="_aFtHu6ewEe-lpbtp4RiUtA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_aFtHt6ewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFtHuKewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_aFtHuKewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFtHt6ewEe-lpbtp4RiUtA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_aFtHvaewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFtHvKewEe-lpbtp4RiUtA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_aFtHwqewEe-lpbtp4RiUtA" entityName="log.info(&quot;The registration token doesn't exist.&quot;)" predecessor_AbstractAction="_aFtHwaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFtHw6ewEe-lpbtp4RiUtA"/>
      <steps_Behaviour xsi:type="seff:StopAction" id="_aFtHw6ewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFtHwqewEe-lpbtp4RiUtA"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_aGX2E6ewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_controller_ExternalTokenController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_aGX2EqewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST] Provider" providedInterface__OperationProvidedRole="_aGUyxaewEe-lpbtp4RiUtA"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_aFqEcKewEe-lpbtp4RiUtA" describedService__SEFF="_Z_smVaewEe-lpbtp4RiUtA">
      <steps_Behaviour xsi:type="seff:StartAction" id="_aFnoJaewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFnoLKewEe-lpbtp4RiUtA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_aFnoLKewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFnoJaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFnoLaewEe-lpbtp4RiUtA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFnoKaewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_aFnoK6ewEe-lpbtp4RiUtA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_aFnoJqewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFnoJ6ewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_aFnoJ6ewEe-lpbtp4RiUtA" entityName="fakeRequestController.generateRegistrationToken(request)" predecessor_AbstractAction="_aFnoJqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFnoKKewEe-lpbtp4RiUtA">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestController_generateRegistrationToken(request)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestController_generateRegistrationToken(request)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_aFnoKKewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFnoJ6ewEe-lpbtp4RiUtA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_aFnoLaewEe-lpbtp4RiUtA" entityName="stopWatch.start()" predecessor_AbstractAction="_aFnoLKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFqEbqewEe-lpbtp4RiUtA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_aFqEbqewEe-lpbtp4RiUtA" entityName="Switch Branch" predecessor_AbstractAction="_aFnoLaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFqEb6ewEe-lpbtp4RiUtA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFpdVKewEe-lpbtp4RiUtA">
          <branchBehaviour_BranchTransition id="_aFpdVqewEe-lpbtp4RiUtA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_aFoPMKewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFoPMaewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_aFoPMaewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFoPMKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFoPMqewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_aFoPMqewEe-lpbtp4RiUtA" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_aFoPMaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFo2QKewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_aFo2QKewEe-lpbtp4RiUtA" entityName="deferredResult.setResult(responseEntity)" predecessor_AbstractAction="_aFoPMqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFo2QaewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_aFo2QaewEe-lpbtp4RiUtA" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_aFo2QKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFo2QqewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_aFo2QqewEe-lpbtp4RiUtA" entityName="deferredResult" predecessor_AbstractAction="_aFo2QaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFpdUKewEe-lpbtp4RiUtA">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_aFpdUKewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFo2QqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFpdUaewEe-lpbtp4RiUtA">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFo2TKewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_aFo2TqewEe-lpbtp4RiUtA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_aFo2Q6ewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFo2RKewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFo2RKewEe-lpbtp4RiUtA" entityName="teleTan.setRedeemed(true)" predecessor_AbstractAction="_aFo2Q6ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFo2RaewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFo2RaewEe-lpbtp4RiUtA" entityName="tanService.saveTan(teleTan)" predecessor_AbstractAction="_aFo2RKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFo2RqewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFo2RqewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFo2RaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFo2R6ewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFo2R6ewEe-lpbtp4RiUtA" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_aFo2RqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFo2SKewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFo2SKewEe-lpbtp4RiUtA" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(response),fakeDelayService.realDelayToken(),MILLISECONDS)" predecessor_AbstractAction="_aFo2R6ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFo2SaewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFo2SaewEe-lpbtp4RiUtA" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_aFo2SKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFo2SqewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_aFo2SqewEe-lpbtp4RiUtA" entityName="deferredResult" predecessor_AbstractAction="_aFo2SaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFo2S6ewEe-lpbtp4RiUtA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_aFo2S6ewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFo2SqewEe-lpbtp4RiUtA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(optional.isPresent())"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_aFpdUaewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFpdUKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFpdUqewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_aFpdUqewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFpdUaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFpdU6ewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_aFpdU6ewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFpdUqewEe-lpbtp4RiUtA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(GUID)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFqEZaewEe-lpbtp4RiUtA">
          <branchBehaviour_BranchTransition id="_aFqEZ6ewEe-lpbtp4RiUtA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_aFpdV6ewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFqEYaewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_aFqEYaewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFpdV6ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFqEYqewEe-lpbtp4RiUtA">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFpdYaewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_aFqEYKewEe-lpbtp4RiUtA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_aFpdWKewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFpdWaewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFpdWaewEe-lpbtp4RiUtA" entityName="teleTan.setRedeemed(true)" predecessor_AbstractAction="_aFpdWKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFpdWqewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFpdWqewEe-lpbtp4RiUtA" entityName="tanService.saveTan(teleTan)" predecessor_AbstractAction="_aFpdWaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFpdW6ewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFpdW6ewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFpdWqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFpdXKewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFpdXKewEe-lpbtp4RiUtA" entityName="fakeDelayService.updateFakeTokenRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_aFpdW6ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFpdXaewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFpdXaewEe-lpbtp4RiUtA" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(response),fakeDelayService.realDelayToken(),MILLISECONDS)" predecessor_AbstractAction="_aFpdXKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFpdXqewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFpdXqewEe-lpbtp4RiUtA" entityName="log.info(&quot;Returning the successfully generated RegistrationToken.&quot;)" predecessor_AbstractAction="_aFpdXaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFpdX6ewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_aFpdX6ewEe-lpbtp4RiUtA" entityName="deferredResult" predecessor_AbstractAction="_aFpdXqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFpdYKewEe-lpbtp4RiUtA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_aFpdYKewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFpdX6ewEe-lpbtp4RiUtA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(optional.isPresent())"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_aFqEYqewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFqEYaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFqEY6ewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_aFqEY6ewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFqEYqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFqEZKewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_aFqEZKewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFqEY6ewEe-lpbtp4RiUtA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFqEa6ewEe-lpbtp4RiUtA">
          <branchBehaviour_BranchTransition id="_aFqEbaewEe-lpbtp4RiUtA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_aFqEaKewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFqEaaewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_aFqEaaewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFqEaKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFqEaqewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_aFqEaqewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFqEaaewEe-lpbtp4RiUtA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_aFqEb6ewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFqEbqewEe-lpbtp4RiUtA"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_aGZrTqewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_controller_ExternalTestStateController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_aGZrTaewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2 Provider" providedInterface__OperationProvidedRole="_aGUywqewEe-lpbtp4RiUtA"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_aFr5pqewEe-lpbtp4RiUtA" describedService__SEFF="_Z_rYNKewEe-lpbtp4RiUtA">
      <steps_Behaviour xsi:type="seff:StartAction" id="_aFqEcqewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFqrdaewEe-lpbtp4RiUtA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_aFqrdaewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFqEcqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFqrdqewEe-lpbtp4RiUtA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFqrcqewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_aFqrdKewEe-lpbtp4RiUtA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_aFqEc6ewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFqrcKewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_aFqrcKewEe-lpbtp4RiUtA" entityName="fakeRequestService.getTestState(registrationToken)" predecessor_AbstractAction="_aFqEc6ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFqrcaewEe-lpbtp4RiUtA">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestService_getTestState(registrationToken)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestService_getTestState(registrationToken)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_aFqrcaewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFqrcKewEe-lpbtp4RiUtA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_aFqrdqewEe-lpbtp4RiUtA" entityName="stopWatch.start()" predecessor_AbstractAction="_aFqrdaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFr5o6ewEe-lpbtp4RiUtA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_aFr5o6ewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFqrdqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFr5pKewEe-lpbtp4RiUtA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFr5oKewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_aFr5oqewEe-lpbtp4RiUtA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_aFqrd6ewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFr5nqewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_aFr5nqewEe-lpbtp4RiUtA" entityName="Switch Branch" predecessor_AbstractAction="_aFqrd6ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFr5n6ewEe-lpbtp4RiUtA">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFrSiaewEe-lpbtp4RiUtA">
                <branchBehaviour_BranchTransition id="_aFrSi6ewEe-lpbtp4RiUtA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_aFqreKewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFqreaewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFqreaewEe-lpbtp4RiUtA" entityName="testResult.setResponsePadding(RandomStringUtils.randomAlphanumeric(RESPONSE_PADDING_LENGTH))" predecessor_AbstractAction="_aFqreKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFqrhaewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_aFqrhaewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFqreaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFqrhqewEe-lpbtp4RiUtA">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFqrgqewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
                      <branchBehaviour_BranchTransition id="_aFqrhKewEe-lpbtp4RiUtA">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_aFqreqewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFqrgKewEe-lpbtp4RiUtA"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_aFqrgKewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFqreqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFqrgaewEe-lpbtp4RiUtA">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFqrfaewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_aFqrf6ewEe-lpbtp4RiUtA">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_aFqre6ewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFqrfKewEe-lpbtp4RiUtA"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_aFqrfKewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFqre6ewEe-lpbtp4RiUtA"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(testResultDob.getTestResult() != testResult.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_aFqrgaewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFqrgKewEe-lpbtp4RiUtA"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(!config.isDisableDobHashCheckForExternalTestResult() &amp;&amp; appSession.get().getHashedGuidDob() != null)"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFqrhqewEe-lpbtp4RiUtA" entityName="log.debug(&quot;Result {}&quot;,testResult)" predecessor_AbstractAction="_aFqrhaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFqrh6ewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFqrh6ewEe-lpbtp4RiUtA" entityName="log.info(&quot;The result for registration token based on hashed Guid will be returned.&quot;)" predecessor_AbstractAction="_aFqrhqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFqriKewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFqriKewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFqrh6ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFqriaewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFqriaewEe-lpbtp4RiUtA" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_aFqriKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFrSgKewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFrSgKewEe-lpbtp4RiUtA" entityName="deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(testResult.getTestResult(),testResult.getSc(),testResult.getLabId())))" predecessor_AbstractAction="_aFqriaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFrSgaewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_aFrSgaewEe-lpbtp4RiUtA" entityName="deferredResult" predecessor_AbstractAction="_aFrSgKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFrSgqewEe-lpbtp4RiUtA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFrSgqewEe-lpbtp4RiUtA" entityName="log.info(&quot;The result for registration token based on teleTAN will be returned.&quot;)" predecessor_AbstractAction="_aFrSgaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFrSg6ewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFrSg6ewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFrSgqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFrShKewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFrShKewEe-lpbtp4RiUtA" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_aFrSg6ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFrShaewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFrShaewEe-lpbtp4RiUtA" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(LabTestResult.POSITIVE.getTestResult(),appSession.get().getCreatedAt().toEpochSecond(ZoneOffset.UTC),null))),fakeDelayService.realDelayTest(),MILLISECONDS)" predecessor_AbstractAction="_aFrShKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFrShqewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_aFrShqewEe-lpbtp4RiUtA" entityName="deferredResult" predecessor_AbstractAction="_aFrShaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFrSh6ewEe-lpbtp4RiUtA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFrSh6ewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFrShqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFrSiKewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_aFrSiKewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFrSh6ewEe-lpbtp4RiUtA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFr5laewEe-lpbtp4RiUtA">
                <branchBehaviour_BranchTransition id="_aFr5l6ewEe-lpbtp4RiUtA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_aFrSjKewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFrSjaewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFrSjaewEe-lpbtp4RiUtA" entityName="log.info(&quot;The result for registration token based on teleTAN will be returned.&quot;)" predecessor_AbstractAction="_aFrSjKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFrSjqewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFrSjqewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFrSjaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFr5kKewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFr5kKewEe-lpbtp4RiUtA" entityName="fakeDelayService.updateFakeTestRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_aFrSjqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFr5kaewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFr5kaewEe-lpbtp4RiUtA" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.ok(generateReturnTestResult(LabTestResult.POSITIVE.getTestResult(),appSession.get().getCreatedAt().toEpochSecond(ZoneOffset.UTC),null))),fakeDelayService.realDelayTest(),MILLISECONDS)" predecessor_AbstractAction="_aFr5kKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFr5kqewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_aFr5kqewEe-lpbtp4RiUtA" entityName="deferredResult" predecessor_AbstractAction="_aFr5kaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFr5k6ewEe-lpbtp4RiUtA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFr5k6ewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFr5kqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFr5lKewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_aFr5lKewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFr5k6ewEe-lpbtp4RiUtA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFr5m6ewEe-lpbtp4RiUtA">
                <branchBehaviour_BranchTransition id="_aFr5naewEe-lpbtp4RiUtA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_aFr5mKewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFr5maewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFr5maewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFr5mKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFr5mqewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_aFr5mqewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFr5maewEe-lpbtp4RiUtA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_aFr5n6ewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFr5nqewEe-lpbtp4RiUtA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_aFr5pKewEe-lpbtp4RiUtA" entityName="log.info(&quot;The registration token doesn't exist.&quot;)" predecessor_AbstractAction="_aFr5o6ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFr5paewEe-lpbtp4RiUtA"/>
      <steps_Behaviour xsi:type="seff:StopAction" id="_aFr5paewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFr5pKewEe-lpbtp4RiUtA"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_aGcHhaewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_controller_InternalTanController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_aGcHg6ewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST] Provider" providedInterface__OperationProvidedRole="_aGUywaewEe-lpbtp4RiUtA"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_aGcHhKewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST] Provider" providedInterface__OperationProvidedRole="_aGUywKewEe-lpbtp4RiUtA"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_aFnoI6ewEe-lpbtp4RiUtA" describedService__SEFF="_Z_smUaewEe-lpbtp4RiUtA">
      <steps_Behaviour xsi:type="seff:StartAction" id="_aFj9w6ewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFnBEKewEe-lpbtp4RiUtA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_aFnBEKewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFj9w6ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFnoIaewEe-lpbtp4RiUtA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFly8KewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_aFmaAKewEe-lpbtp4RiUtA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_aFkk0KewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFlL4KewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_aFlL4KewEe-lpbtp4RiUtA" entityName="requiredRoles.add(AuthorizationRole.AUTH_C19_HOTLINE)" predecessor_AbstractAction="_aFkk0KewEe-lpbtp4RiUtA" successor_AbstractAction="_aFlL4aewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_aFlL4aewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFlL4KewEe-lpbtp4RiUtA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(teleTanType == null)"/>
        </branches_Branch>
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFmaBKewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_aFmaBqewEe-lpbtp4RiUtA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_aFmaAaewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFmaAqewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:InternalAction" id="_aFmaAqewEe-lpbtp4RiUtA" entityName="requiredRoles.add(AuthorizationRole.AUTH_C19_HOTLINE_EVENT)" predecessor_AbstractAction="_aFmaAaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFmaA6ewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:StopAction" id="_aFmaA6ewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFmaAqewEe-lpbtp4RiUtA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(teleTanType == TeleTanType.EVENT)"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_aFnoIaewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFnBEKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFnoIqewEe-lpbtp4RiUtA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFnBIKewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_aFnoIKewEe-lpbtp4RiUtA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_aFnBEaewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFnBHqewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_aFnBHqewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFnBEaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFnBH6ewEe-lpbtp4RiUtA">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFnBFqewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_aFnBGKewEe-lpbtp4RiUtA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_aFnBEqewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFnBE6ewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFnBE6ewEe-lpbtp4RiUtA" entityName="log.info(&quot;The teleTAN is generated.&quot;)" predecessor_AbstractAction="_aFnBEqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFnBFKewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_aFnBFKewEe-lpbtp4RiUtA" entityName="ResponseEntity.status(HttpStatus.CREATED).body(new TeleTan(teleTan))" predecessor_AbstractAction="_aFnBE6ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFnBFaewEe-lpbtp4RiUtA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.ResponseEntity_status(HttpStatus_CREATED)_body(new TeleTan(teleTan))"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="ResponseEntity_status(HttpStatus_CREATED)_body(new TeleTan(teleTan))"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_aFnBFaewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFnBFKewEe-lpbtp4RiUtA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(tanService.isTeleTanRateLimitNotExceeded())"/>
              </branches_Branch>
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFnBG6ewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_aFnBHaewEe-lpbtp4RiUtA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_aFnBGaewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFnBGqewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_aFnBGqewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFnBGaewEe-lpbtp4RiUtA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: else"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_aFnBH6ewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFnBHqewEe-lpbtp4RiUtA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(jwtService.isAuthorized(authorization.getToken(),requiredRoles))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_aFnoIqewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFnoIaewEe-lpbtp4RiUtA"/>
    </serviceEffectSpecifications__BasicComponent>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_aFj9waewEe-lpbtp4RiUtA" describedService__SEFF="_Z_r_Q6ewEe-lpbtp4RiUtA">
      <steps_Behaviour xsi:type="seff:StartAction" id="_aANjsaewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFjWsKewEe-lpbtp4RiUtA"/>
      <steps_Behaviour xsi:type="seff:SetVariableAction" id="_aFjWsKewEe-lpbtp4RiUtA" entityName="tanService.getEntityByTan(tan.getTan()).filter(t -> t.canBeRedeemed(LocalDateTime.now())).map(t -> {&#xA;  tanService.deleteTan(t);&#xA;  log.info(&quot;The Tan is valid.&quot;);&#xA;  return t;&#xA;}&#xA;).map(t -> {&#xA;  ResponseEntity.BodyBuilder responseBuilder=ResponseEntity.ok();&#xA;  if (t.getTeleTanType() != null) {&#xA;    responseBuilder.header(TELE_TAN_TYPE_HEADER,t.getTeleTanType().toString());&#xA;  }&#xA;  return responseBuilder.build();&#xA;}&#xA;).orElseGet(() -> {&#xA;  log.info(&quot;The Tan is invalid.&quot;);&#xA;  throw new VerificationServerException(HttpStatus.NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)" predecessor_AbstractAction="_aANjsaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFj9wKewEe-lpbtp4RiUtA">
        <localVariableUsages_SetVariableAction>
          <variableCharacterisation_VariableUsage type="VALUE">
            <specification_VariableCharacterisation specification="PrimitiveType.tanService_getEntityByTan(tan_getTan())_filter(t -> t_canBeRedeemed(LocalDateTime_now()))_map(t -> {&#xA;  tanService_deleteTan(t);&#xA;  log_info(&quot;The Tan is valid_&quot;);&#xA;  return t;&#xA;}&#xA;)_map(t -> {&#xA;  ResponseEntity_BodyBuilder responseBuilder=ResponseEntity_ok();&#xA;  if (t_getTeleTanType() != null) {&#xA;    responseBuilder_header(TELE_TAN_TYPE_HEADER,t_getTeleTanType()_toString());&#xA;  }&#xA;  return responseBuilder_build();&#xA;}&#xA;)_orElseGet(() -> {&#xA;  log_info(&quot;The Tan is invalid_&quot;);&#xA;  throw new VerificationServerException(HttpStatus_NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)"/>
          </variableCharacterisation_VariableUsage>
          <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
            <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="tanService_getEntityByTan(tan_getTan())_filter(t -> t_canBeRedeemed(LocalDateTime_now()))_map(t -> {&#xA;  tanService_deleteTan(t);&#xA;  log_info(&quot;The Tan is valid_&quot;);&#xA;  return t;&#xA;}&#xA;)_map(t -> {&#xA;  ResponseEntity_BodyBuilder responseBuilder=ResponseEntity_ok();&#xA;  if (t_getTeleTanType() != null) {&#xA;    responseBuilder_header(TELE_TAN_TYPE_HEADER,t_getTeleTanType()_toString());&#xA;  }&#xA;  return responseBuilder_build();&#xA;}&#xA;)_orElseGet(() -> {&#xA;  log_info(&quot;The Tan is invalid_&quot;);&#xA;  throw new VerificationServerException(HttpStatus_NOT_FOUND,&quot;No Tan found or Tan is invalid&quot;);&#xA;}&#xA;)"/>
          </namedReference__VariableUsage>
        </localVariableUsages_SetVariableAction>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_aFj9wKewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFjWsKewEe-lpbtp4RiUtA"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:BasicComponent" id="_aGfx7aewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_service_FakeRequestService"/>
  <components__Repository xsi:type="repository:BasicComponent" id="_aGfx76ewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_controller_ExternalTanController">
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_aGfx7qewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/tan[POST] Provider" providedInterface__OperationProvidedRole="_aGUyxKewEe-lpbtp4RiUtA"/>
    <serviceEffectSpecifications__BasicComponent xsi:type="seff:ResourceDemandingSEFF" id="_aFu88aewEe-lpbtp4RiUtA" describedService__SEFF="_Z-6jMKewEe-lpbtp4RiUtA">
      <steps_Behaviour xsi:type="seff:StartAction" id="_aFtHxqewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFtuxaewEe-lpbtp4RiUtA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_aFtuxaewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFtHxqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFtuxqewEe-lpbtp4RiUtA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFtuwqewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_aFtuxKewEe-lpbtp4RiUtA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_aFtHx6ewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFtuwKewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:SetVariableAction" id="_aFtuwKewEe-lpbtp4RiUtA" entityName="fakeRequestService.generateTan(registrationToken)" predecessor_AbstractAction="_aFtHx6ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFtuwaewEe-lpbtp4RiUtA">
              <localVariableUsages_SetVariableAction>
                <variableCharacterisation_VariableUsage type="VALUE">
                  <specification_VariableCharacterisation specification="PrimitiveType.fakeRequestService_generateTan(registrationToken)"/>
                </variableCharacterisation_VariableUsage>
                <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                  <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="fakeRequestService_generateTan(registrationToken)"/>
                </namedReference__VariableUsage>
              </localVariableUsages_SetVariableAction>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_aFtuwaewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFtuwKewEe-lpbtp4RiUtA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if((fake != null) &amp;&amp; (fake.equals(&quot;1&quot;)))"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:InternalAction" id="_aFtuxqewEe-lpbtp4RiUtA" entityName="stopWatch.start()" predecessor_AbstractAction="_aFtuxaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFu876ewEe-lpbtp4RiUtA"/>
      <steps_Behaviour xsi:type="seff:BranchAction" id="_aFu876ewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFtuxqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFu88KewEe-lpbtp4RiUtA">
        <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFu87KewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
          <branchBehaviour_BranchTransition id="_aFu87qewEe-lpbtp4RiUtA">
            <steps_Behaviour xsi:type="seff:StartAction" id="_aFtux6ewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFu86qewEe-lpbtp4RiUtA"/>
            <steps_Behaviour xsi:type="seff:BranchAction" id="_aFu86qewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFtux6ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFu866ewEe-lpbtp4RiUtA">
              <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFu856ewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
                <branchBehaviour_BranchTransition id="_aFu86aewEe-lpbtp4RiUtA">
                  <steps_Behaviour xsi:type="seff:StartAction" id="_aFtuyKewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFuV26ewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:BranchAction" id="_aFuV26ewEe-lpbtp4RiUtA" entityName="Switch Branch" predecessor_AbstractAction="_aFtuyKewEe-lpbtp4RiUtA" successor_AbstractAction="_aFuV3KewEe-lpbtp4RiUtA">
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFtu06ewEe-lpbtp4RiUtA">
                      <branchBehaviour_BranchTransition id="_aFtu1aewEe-lpbtp4RiUtA">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_aFtuyaewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFtu0KewEe-lpbtp4RiUtA"/>
                        <steps_Behaviour xsi:type="seff:BranchAction" id="_aFtu0KewEe-lpbtp4RiUtA" entityName="If Branch" predecessor_AbstractAction="_aFtuyaewEe-lpbtp4RiUtA" successor_AbstractAction="_aFtu0aewEe-lpbtp4RiUtA">
                          <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFtuzaewEe-lpbtp4RiUtA" entityName="Guarded Branch Transition">
                            <branchBehaviour_BranchTransition id="_aFtuz6ewEe-lpbtp4RiUtA">
                              <steps_Behaviour xsi:type="seff:StartAction" id="_aFtuyqewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFtuy6ewEe-lpbtp4RiUtA"/>
                              <steps_Behaviour xsi:type="seff:InternalAction" id="_aFtuy6ewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFtuyqewEe-lpbtp4RiUtA" successor_AbstractAction="_aFtuzKewEe-lpbtp4RiUtA"/>
                              <steps_Behaviour xsi:type="seff:StopAction" id="_aFtuzKewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFtuy6ewEe-lpbtp4RiUtA"/>
                            </branchBehaviour_BranchTransition>
                            <branchCondition_GuardedBranchTransition specification="@position: Condition: if(covidTestResult.getTestResult() != LabTestResult.POSITIVE.getTestResult() &amp;&amp; covidTestResult.getTestResult() != LabTestResult.QUICK_POSITIVE.getTestResult())"/>
                          </branches_Branch>
                        </steps_Behaviour>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_aFtu0aewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFtu0KewEe-lpbtp4RiUtA" successor_AbstractAction="_aFtu0qewEe-lpbtp4RiUtA"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_aFtu0qewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFtu0aewEe-lpbtp4RiUtA"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(HASHED_GUID)"/>
                    </branches_Branch>
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFuV0qewEe-lpbtp4RiUtA">
                      <branchBehaviour_BranchTransition id="_aFuV1KewEe-lpbtp4RiUtA">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_aFtu1qewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFuV0KewEe-lpbtp4RiUtA"/>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_aFuV0KewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFtu1qewEe-lpbtp4RiUtA" successor_AbstractAction="_aFuV0aewEe-lpbtp4RiUtA"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_aFuV0aewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFuV0KewEe-lpbtp4RiUtA"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if(TELETAN)"/>
                    </branches_Branch>
                    <branches_Branch xsi:type="seff:GuardedBranchTransition" id="_aFuV2KewEe-lpbtp4RiUtA">
                      <branchBehaviour_BranchTransition id="_aFuV2qewEe-lpbtp4RiUtA">
                        <steps_Behaviour xsi:type="seff:StartAction" id="_aFuV1aewEe-lpbtp4RiUtA" entityName="Start Action" successor_AbstractAction="_aFuV1qewEe-lpbtp4RiUtA"/>
                        <steps_Behaviour xsi:type="seff:InternalAction" id="_aFuV1qewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFuV1aewEe-lpbtp4RiUtA" successor_AbstractAction="_aFuV16ewEe-lpbtp4RiUtA"/>
                        <steps_Behaviour xsi:type="seff:StopAction" id="_aFuV16ewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFuV1qewEe-lpbtp4RiUtA"/>
                      </branchBehaviour_BranchTransition>
                      <branchCondition_GuardedBranchTransition specification="@position: Condition: if()"/>
                    </branches_Branch>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFuV3KewEe-lpbtp4RiUtA" entityName="appSession.incrementTanCounter()" predecessor_AbstractAction="_aFuV26ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFuV3aewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFuV3aewEe-lpbtp4RiUtA" entityName="appSession.setUpdatedAt(LocalDateTime.now())" predecessor_AbstractAction="_aFuV3KewEe-lpbtp4RiUtA" successor_AbstractAction="_aFu84KewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFu84KewEe-lpbtp4RiUtA" entityName="appSessionService.saveAppSession(appSession)" predecessor_AbstractAction="_aFuV3aewEe-lpbtp4RiUtA" successor_AbstractAction="_aFu84aewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFu84aewEe-lpbtp4RiUtA" entityName="stopWatch.stop()" predecessor_AbstractAction="_aFu84KewEe-lpbtp4RiUtA" successor_AbstractAction="_aFu84qewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFu84qewEe-lpbtp4RiUtA" entityName="fakeDelayService.updateFakeTanRequestDelay(stopWatch.getTotalTimeMillis())" predecessor_AbstractAction="_aFu84aewEe-lpbtp4RiUtA" successor_AbstractAction="_aFu846ewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFu846ewEe-lpbtp4RiUtA" entityName="scheduledExecutor.schedule(() -> deferredResult.setResult(ResponseEntity.status(HttpStatus.CREATED).body(returnTan)),fakeDelayService.realDelayTan(),MILLISECONDS)" predecessor_AbstractAction="_aFu84qewEe-lpbtp4RiUtA" successor_AbstractAction="_aFu85KewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:InternalAction" id="_aFu85KewEe-lpbtp4RiUtA" entityName="log.info(&quot;Returning the successfully generated tan.&quot;)" predecessor_AbstractAction="_aFu846ewEe-lpbtp4RiUtA" successor_AbstractAction="_aFu85aewEe-lpbtp4RiUtA"/>
                  <steps_Behaviour xsi:type="seff:SetVariableAction" id="_aFu85aewEe-lpbtp4RiUtA" entityName="deferredResult" predecessor_AbstractAction="_aFu85KewEe-lpbtp4RiUtA" successor_AbstractAction="_aFu85qewEe-lpbtp4RiUtA">
                    <localVariableUsages_SetVariableAction>
                      <variableCharacterisation_VariableUsage type="VALUE">
                        <specification_VariableCharacterisation specification="PrimitiveType.deferredResult"/>
                      </variableCharacterisation_VariableUsage>
                      <namedReference__VariableUsage xsi:type="stoex:NamespaceReference" referenceName="PrimitiveType">
                        <innerReference_NamespaceReference xsi:type="stoex:VariableReference" referenceName="deferredResult"/>
                      </namedReference__VariableUsage>
                    </localVariableUsages_SetVariableAction>
                  </steps_Behaviour>
                  <steps_Behaviour xsi:type="seff:StopAction" id="_aFu85qewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFu85aewEe-lpbtp4RiUtA"/>
                </branchBehaviour_BranchTransition>
                <branchCondition_GuardedBranchTransition specification="@position: Condition: if(appSession.getTanCounter() &lt; tancountermax)"/>
              </branches_Branch>
            </steps_Behaviour>
            <steps_Behaviour xsi:type="seff:StopAction" id="_aFu866ewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFu86qewEe-lpbtp4RiUtA"/>
          </branchBehaviour_BranchTransition>
          <branchCondition_GuardedBranchTransition specification="@position: Condition: if(actual.isPresent())"/>
        </branches_Branch>
      </steps_Behaviour>
      <steps_Behaviour xsi:type="seff:StopAction" id="_aFu88KewEe-lpbtp4RiUtA" entityName="Stop Action" predecessor_AbstractAction="_aFu876ewEe-lpbtp4RiUtA"/>
    </serviceEffectSpecifications__BasicComponent>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_aGkDUKewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_service_FakeRequestService">
    <assemblyContexts__ComposedStructure id="_aGkqZKewEe-lpbtp4RiUtA" encapsulatedComponent__AssemblyContext="_aGfx7aewEe-lpbtp4RiUtA"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_aGkDUqewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_controller_ExternalTestStateController">
    <assemblyContexts__ComposedStructure id="_aGkqaqewEe-lpbtp4RiUtA" encapsulatedComponent__AssemblyContext="_aGZrTqewEe-lpbtp4RiUtA"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_aGl4gKewEe-lpbtp4RiUtA" innerProvidedRole_ProvidedDelegationConnector="_aGZrTaewEe-lpbtp4RiUtA" outerProvidedRole_ProvidedDelegationConnector="_aGkDUaewEe-lpbtp4RiUtA" assemblyContext_ProvidedDelegationConnector="_aGkqaqewEe-lpbtp4RiUtA"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_aGkDUaewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2 Provider" providedInterface__OperationProvidedRole="_aGUywqewEe-lpbtp4RiUtA"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_aGkDVKewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_controller_InternalTestStateController">
    <assemblyContexts__ComposedStructure id="_aGkqZqewEe-lpbtp4RiUtA" encapsulatedComponent__AssemblyContext="_aGUyx6ewEe-lpbtp4RiUtA"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_aGl4g6ewEe-lpbtp4RiUtA" innerProvidedRole_ProvidedDelegationConnector="_aGUyxqewEe-lpbtp4RiUtA" outerProvidedRole_ProvidedDelegationConnector="_aGkDU6ewEe-lpbtp4RiUtA" assemblyContext_ProvidedDelegationConnector="_aGkqZqewEe-lpbtp4RiUtA"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_aGkDU6ewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/testresult[POST] Provider" providedInterface__OperationProvidedRole="_aGUyw6ewEe-lpbtp4RiUtA"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_aGkDVqewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_controller_ExternalTokenController">
    <assemblyContexts__ComposedStructure id="_aGkqYqewEe-lpbtp4RiUtA" encapsulatedComponent__AssemblyContext="_aGX2E6ewEe-lpbtp4RiUtA"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_aGl4hKewEe-lpbtp4RiUtA" innerProvidedRole_ProvidedDelegationConnector="_aGX2EqewEe-lpbtp4RiUtA" outerProvidedRole_ProvidedDelegationConnector="_aGkDVaewEe-lpbtp4RiUtA" assemblyContext_ProvidedDelegationConnector="_aGkqYqewEe-lpbtp4RiUtA"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_aGkDVaewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST] Provider" providedInterface__OperationProvidedRole="_aGUyxaewEe-lpbtp4RiUtA"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_aGkDWKewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_controller_ExternalTanController">
    <assemblyContexts__ComposedStructure id="_aGkqYKewEe-lpbtp4RiUtA" encapsulatedComponent__AssemblyContext="_aGfx76ewEe-lpbtp4RiUtA"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_aGl4haewEe-lpbtp4RiUtA" innerProvidedRole_ProvidedDelegationConnector="_aGfx7qewEe-lpbtp4RiUtA" outerProvidedRole_ProvidedDelegationConnector="_aGkDV6ewEe-lpbtp4RiUtA" assemblyContext_ProvidedDelegationConnector="_aGkqYKewEe-lpbtp4RiUtA"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_aGkDV6ewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/tan[POST] Provider" providedInterface__OperationProvidedRole="_aGUyxKewEe-lpbtp4RiUtA"/>
  </components__Repository>
  <components__Repository xsi:type="repository:CompositeComponent" id="_aGkDW6ewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_controller_InternalTanController">
    <assemblyContexts__ComposedStructure id="_aGkqaKewEe-lpbtp4RiUtA" encapsulatedComponent__AssemblyContext="_aGcHhaewEe-lpbtp4RiUtA"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_aGl4gaewEe-lpbtp4RiUtA" innerProvidedRole_ProvidedDelegationConnector="_aGcHg6ewEe-lpbtp4RiUtA" outerProvidedRole_ProvidedDelegationConnector="_aGkDWqewEe-lpbtp4RiUtA" assemblyContext_ProvidedDelegationConnector="_aGkqaKewEe-lpbtp4RiUtA"/>
    <connectors__ComposedStructure xsi:type="composition:ProvidedDelegationConnector" id="_aGl4gqewEe-lpbtp4RiUtA" innerProvidedRole_ProvidedDelegationConnector="_aGcHhKewEe-lpbtp4RiUtA" outerProvidedRole_ProvidedDelegationConnector="_aGkDWaewEe-lpbtp4RiUtA" assemblyContext_ProvidedDelegationConnector="_aGkqaKewEe-lpbtp4RiUtA"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_aGkDWaewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST] Provider" providedInterface__OperationProvidedRole="_aGUywKewEe-lpbtp4RiUtA"/>
    <providedRoles_InterfaceProvidingEntity xsi:type="repository:OperationProvidedRole" id="_aGkDWqewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST] Provider" providedInterface__OperationProvidedRole="_aGUywaewEe-lpbtp4RiUtA"/>
  </components__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_aGUywKewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST]">
    <signatures__OperationInterface id="_Z_r_Q6ewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/tan/verify[POST]" returnType__OperationSignature="_Z_rYMKewEe-lpbtp4RiUtA">
      <parameters__OperationSignature dataType__Parameter="_Z_r_QqewEe-lpbtp4RiUtA" parameterName="tan" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_aGUywaewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST]">
    <signatures__OperationInterface id="_Z_smUaewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/tan/teletan[POST]" returnType__OperationSignature="_Z_rYMKewEe-lpbtp4RiUtA">
      <parameters__OperationSignature dataType__Parameter="_Z_r_RqewEe-lpbtp4RiUtA" parameterName="authorization" modifier__Parameter="in"/>
      <parameters__OperationSignature dataType__Parameter="_Z_smUKewEe-lpbtp4RiUtA" parameterName="teleTanType" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_aGUywqewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2">
    <signatures__OperationInterface id="_Z_rYNKewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/testresult[POST]$2" returnType__OperationSignature="_Z-58IKewEe-lpbtp4RiUtA">
      <parameters__OperationSignature dataType__Parameter="_Z-4uAKewEe-lpbtp4RiUtA" parameterName="registrationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="fake" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_aGUyw6ewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/testresult[POST]">
    <signatures__OperationInterface id="_Z_rYMaewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/testresult[POST]" returnType__OperationSignature="_Z_rYMKewEe-lpbtp4RiUtA">
      <parameters__OperationSignature dataType__Parameter="_Z-4uAKewEe-lpbtp4RiUtA" parameterName="registrationToken" modifier__Parameter="in"/>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_aGUyxKewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/tan[POST]">
    <signatures__OperationInterface id="_Z-6jMKewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/tan[POST]" returnType__OperationSignature="_Z-58IKewEe-lpbtp4RiUtA">
      <parameters__OperationSignature dataType__Parameter="_Z-4uAKewEe-lpbtp4RiUtA" parameterName="registrationToken" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="fake" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <interfaces__Repository xsi:type="repository:OperationInterface" id="_aGUyxaewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST]">
    <signatures__OperationInterface id="_Z_smVaewEe-lpbtp4RiUtA" entityName="SPRING-APPLICATION/version/v1/registrationToken[POST]" returnType__OperationSignature="_Z-58IKewEe-lpbtp4RiUtA">
      <parameters__OperationSignature dataType__Parameter="_Z_smVKewEe-lpbtp4RiUtA" parameterName="request" modifier__Parameter="in"/>
      <parameters__OperationSignature parameterName="fake" modifier__Parameter="in">
        <dataType__Parameter xsi:type="repository:PrimitiveDataType" href="pathmap://PCM_MODELS/PrimitiveTypes.repository#//@dataTypes__Repository.1"/>
      </parameters__OperationSignature>
    </signatures__OperationInterface>
  </interfaces__Repository>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_Z-4uAKewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_model_RegistrationToken"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_Z-58IKewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_controller_DeferredResult"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_Z_rYMKewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_controller_ResponseEntity"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_Z_r_QqewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_model_Tan"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_Z_r_RqewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_model_AuthorizationToken"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_Z_smUKewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_model_TeleTanType"/>
  <dataTypes__Repository xsi:type="repository:CompositeDataType" id="_Z_smVKewEe-lpbtp4RiUtA" entityName="app_coronawarn_verification_model_RegistrationTokenRequest"/>
</repository:Repository>
